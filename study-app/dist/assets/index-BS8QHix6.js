var ly=h=>{throw TypeError(h)};var Gh=(h,t,e)=>t.has(h)||ly("Cannot "+e);var ne=(h,t,e)=>(Gh(h,t,"read from private field"),e?e.call(h):t.get(h)),Wn=(h,t,e)=>t.has(h)?ly("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(h):t.set(h,e),sn=(h,t,e,s)=>(Gh(h,t,"write to private field"),s?s.call(h,e):t.set(h,e),e),Qn=(h,t,e)=>(Gh(h,t,"access private method"),e);var cy=(h,t,e,s)=>({set _(a){sn(h,t,a,e)},get _(){return ne(h,t,s)}});function Jx(h,t){for(var e=0;e<t.length;e++){const s=t[e];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in h)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(h,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function vb(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Vh={exports:{}},Hr={};var uy;function tA(){if(uy)return Hr;uy=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,a,o){var l=null;if(o!==void 0&&(l=""+o),a.key!==void 0&&(l=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:h,type:s,key:l,ref:a!==void 0?a:null,props:o}}return Hr.Fragment=t,Hr.jsx=e,Hr.jsxs=e,Hr}var hy;function eA(){return hy||(hy=1,Vh.exports=tA()),Vh.exports}var v=eA(),qh={exports:{}},xt={};var dy;function nA(){if(dy)return xt;dy=1;var h=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(O){return O===null||typeof O!="object"?null:(O=b&&O[b]||O["@@iterator"],typeof O=="function"?O:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(O,q,K){this.props=O,this.context=q,this.refs=E,this.updater=K||w}C.prototype.isReactComponent={},C.prototype.setState=function(O,q){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,q,"setState")},C.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function T(){}T.prototype=C.prototype;function M(O,q,K){this.props=O,this.context=q,this.refs=E,this.updater=K||w}var D=M.prototype=new T;D.constructor=M,S(D,C.prototype),D.isPureReactComponent=!0;var k=Array.isArray;function F(){}var B={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function H(O,q,K){var tt=K.ref;return{$$typeof:h,type:O,key:q,ref:tt!==void 0?tt:null,props:K}}function Z(O,q){return H(O.type,q,O.props)}function J(O){return typeof O=="object"&&O!==null&&O.$$typeof===h}function ct(O){var q={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(K){return q[K]})}var dt=/\/+/g;function at(O,q){return typeof O=="object"&&O!==null&&O.key!=null?ct(""+O.key):q.toString(36)}function ht(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(F,F):(O.status="pending",O.then(function(q){O.status==="pending"&&(O.status="fulfilled",O.value=q)},function(q){O.status==="pending"&&(O.status="rejected",O.reason=q)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function L(O,q,K,tt,lt){var ft=typeof O;(ft==="undefined"||ft==="boolean")&&(O=null);var et=!1;if(O===null)et=!0;else switch(ft){case"bigint":case"string":case"number":et=!0;break;case"object":switch(O.$$typeof){case h:case t:et=!0;break;case m:return et=O._init,L(et(O._payload),q,K,tt,lt)}}if(et)return lt=lt(O),et=tt===""?"."+at(O,0):tt,k(lt)?(K="",et!=null&&(K=et.replace(dt,"$&/")+"/"),L(lt,q,K,"",function(jt){return jt})):lt!=null&&(J(lt)&&(lt=Z(lt,K+(lt.key==null||O&&O.key===lt.key?"":(""+lt.key).replace(dt,"$&/")+"/")+et)),q.push(lt)),1;et=0;var Gt=tt===""?".":tt+":";if(k(O))for(var wt=0;wt<O.length;wt++)tt=O[wt],ft=Gt+at(tt,wt),et+=L(tt,q,K,ft,lt);else if(wt=A(O),typeof wt=="function")for(O=wt.call(O),wt=0;!(tt=O.next()).done;)tt=tt.value,ft=Gt+at(tt,wt++),et+=L(tt,q,K,ft,lt);else if(ft==="object"){if(typeof O.then=="function")return L(ht(O),q,K,tt,lt);throw q=String(O),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return et}function V(O,q,K){if(O==null)return O;var tt=[],lt=0;return L(O,tt,"","",function(ft){return q.call(K,ft,lt++)}),tt}function Y(O){if(O._status===-1){var q=O._result;q=q(),q.then(function(K){(O._status===0||O._status===-1)&&(O._status=1,O._result=K)},function(K){(O._status===0||O._status===-1)&&(O._status=2,O._result=K)}),O._status===-1&&(O._status=0,O._result=q)}if(O._status===1)return O._result.default;throw O._result}var pt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},vt={map:V,forEach:function(O,q,K){V(O,function(){q.apply(this,arguments)},K)},count:function(O){var q=0;return V(O,function(){q++}),q},toArray:function(O){return V(O,function(q){return q})||[]},only:function(O){if(!J(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return xt.Activity=y,xt.Children=vt,xt.Component=C,xt.Fragment=e,xt.Profiler=a,xt.PureComponent=M,xt.StrictMode=s,xt.Suspense=d,xt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,xt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return B.H.useMemoCache(O)}},xt.cache=function(O){return function(){return O.apply(null,arguments)}},xt.cacheSignal=function(){return null},xt.cloneElement=function(O,q,K){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var tt=S({},O.props),lt=O.key;if(q!=null)for(ft in q.key!==void 0&&(lt=""+q.key),q)!P.call(q,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&q.ref===void 0||(tt[ft]=q[ft]);var ft=arguments.length-2;if(ft===1)tt.children=K;else if(1<ft){for(var et=Array(ft),Gt=0;Gt<ft;Gt++)et[Gt]=arguments[Gt+2];tt.children=et}return H(O.type,lt,tt)},xt.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},xt.createElement=function(O,q,K){var tt,lt={},ft=null;if(q!=null)for(tt in q.key!==void 0&&(ft=""+q.key),q)P.call(q,tt)&&tt!=="key"&&tt!=="__self"&&tt!=="__source"&&(lt[tt]=q[tt]);var et=arguments.length-2;if(et===1)lt.children=K;else if(1<et){for(var Gt=Array(et),wt=0;wt<et;wt++)Gt[wt]=arguments[wt+2];lt.children=Gt}if(O&&O.defaultProps)for(tt in et=O.defaultProps,et)lt[tt]===void 0&&(lt[tt]=et[tt]);return H(O,ft,lt)},xt.createRef=function(){return{current:null}},xt.forwardRef=function(O){return{$$typeof:u,render:O}},xt.isValidElement=J,xt.lazy=function(O){return{$$typeof:m,_payload:{_status:-1,_result:O},_init:Y}},xt.memo=function(O,q){return{$$typeof:f,type:O,compare:q===void 0?null:q}},xt.startTransition=function(O){var q=B.T,K={};B.T=K;try{var tt=O(),lt=B.S;lt!==null&&lt(K,tt),typeof tt=="object"&&tt!==null&&typeof tt.then=="function"&&tt.then(F,pt)}catch(ft){pt(ft)}finally{q!==null&&K.types!==null&&(q.types=K.types),B.T=q}},xt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},xt.use=function(O){return B.H.use(O)},xt.useActionState=function(O,q,K){return B.H.useActionState(O,q,K)},xt.useCallback=function(O,q){return B.H.useCallback(O,q)},xt.useContext=function(O){return B.H.useContext(O)},xt.useDebugValue=function(){},xt.useDeferredValue=function(O,q){return B.H.useDeferredValue(O,q)},xt.useEffect=function(O,q){return B.H.useEffect(O,q)},xt.useEffectEvent=function(O){return B.H.useEffectEvent(O)},xt.useId=function(){return B.H.useId()},xt.useImperativeHandle=function(O,q,K){return B.H.useImperativeHandle(O,q,K)},xt.useInsertionEffect=function(O,q){return B.H.useInsertionEffect(O,q)},xt.useLayoutEffect=function(O,q){return B.H.useLayoutEffect(O,q)},xt.useMemo=function(O,q){return B.H.useMemo(O,q)},xt.useOptimistic=function(O,q){return B.H.useOptimistic(O,q)},xt.useReducer=function(O,q,K){return B.H.useReducer(O,q,K)},xt.useRef=function(O){return B.H.useRef(O)},xt.useState=function(O){return B.H.useState(O)},xt.useSyncExternalStore=function(O,q,K){return B.H.useSyncExternalStore(O,q,K)},xt.useTransition=function(){return B.H.useTransition()},xt.version="19.2.0",xt}var fy;function Cd(){return fy||(fy=1,qh.exports=nA()),qh.exports}var R=Cd();const me=vb(R),_d=Jx({__proto__:null,default:me},[R]);var Xh={exports:{}},Gr={},Yh={exports:{}},$h={};var py;function iA(){return py||(py=1,(function(h){function t(L,V){var Y=L.length;L.push(V);t:for(;0<Y;){var pt=Y-1>>>1,vt=L[pt];if(0<a(vt,V))L[pt]=V,L[Y]=vt,Y=pt;else break t}}function e(L){return L.length===0?null:L[0]}function s(L){if(L.length===0)return null;var V=L[0],Y=L.pop();if(Y!==V){L[0]=Y;t:for(var pt=0,vt=L.length,O=vt>>>1;pt<O;){var q=2*(pt+1)-1,K=L[q],tt=q+1,lt=L[tt];if(0>a(K,Y))tt<vt&&0>a(lt,K)?(L[pt]=lt,L[tt]=Y,pt=tt):(L[pt]=K,L[q]=Y,pt=q);else if(tt<vt&&0>a(lt,Y))L[pt]=lt,L[tt]=Y,pt=tt;else break t}}return V}function a(L,V){var Y=L.sortIndex-V.sortIndex;return Y!==0?Y:L.id-V.id}if(h.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;h.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();h.unstable_now=function(){return l.now()-u}}var d=[],f=[],m=1,y=null,b=3,A=!1,w=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function D(L){for(var V=e(f);V!==null;){if(V.callback===null)s(f);else if(V.startTime<=L)s(f),V.sortIndex=V.expirationTime,t(d,V);else break;V=e(f)}}function k(L){if(S=!1,D(L),!w)if(e(d)!==null)w=!0,F||(F=!0,ct());else{var V=e(f);V!==null&&ht(k,V.startTime-L)}}var F=!1,B=-1,P=5,H=-1;function Z(){return E?!0:!(h.unstable_now()-H<P)}function J(){if(E=!1,F){var L=h.unstable_now();H=L;var V=!0;try{t:{w=!1,S&&(S=!1,T(B),B=-1),A=!0;var Y=b;try{e:{for(D(L),y=e(d);y!==null&&!(y.expirationTime>L&&Z());){var pt=y.callback;if(typeof pt=="function"){y.callback=null,b=y.priorityLevel;var vt=pt(y.expirationTime<=L);if(L=h.unstable_now(),typeof vt=="function"){y.callback=vt,D(L),V=!0;break e}y===e(d)&&s(d),D(L)}else s(d);y=e(d)}if(y!==null)V=!0;else{var O=e(f);O!==null&&ht(k,O.startTime-L),V=!1}}break t}finally{y=null,b=Y,A=!1}V=void 0}}finally{V?ct():F=!1}}}var ct;if(typeof M=="function")ct=function(){M(J)};else if(typeof MessageChannel<"u"){var dt=new MessageChannel,at=dt.port2;dt.port1.onmessage=J,ct=function(){at.postMessage(null)}}else ct=function(){C(J,0)};function ht(L,V){B=C(function(){L(h.unstable_now())},V)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(L){L.callback=null},h.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},h.unstable_getCurrentPriorityLevel=function(){return b},h.unstable_next=function(L){switch(b){case 1:case 2:case 3:var V=3;break;default:V=b}var Y=b;b=V;try{return L()}finally{b=Y}},h.unstable_requestPaint=function(){E=!0},h.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var Y=b;b=L;try{return V()}finally{b=Y}},h.unstable_scheduleCallback=function(L,V,Y){var pt=h.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?pt+Y:pt):Y=pt,L){case 1:var vt=-1;break;case 2:vt=250;break;case 5:vt=1073741823;break;case 4:vt=1e4;break;default:vt=5e3}return vt=Y+vt,L={id:m++,callback:V,priorityLevel:L,startTime:Y,expirationTime:vt,sortIndex:-1},Y>pt?(L.sortIndex=Y,t(f,L),e(d)===null&&L===e(f)&&(S?(T(B),B=-1):S=!0,ht(k,Y-pt))):(L.sortIndex=vt,t(d,L),w||A||(w=!0,F||(F=!0,ct()))),L},h.unstable_shouldYield=Z,h.unstable_wrapCallback=function(L){var V=b;return function(){var Y=b;b=V;try{return L.apply(this,arguments)}finally{b=Y}}}})($h)),$h}var my;function sA(){return my||(my=1,Yh.exports=iA()),Yh.exports}var Kh={exports:{}},Ie={};var gy;function aA(){if(gy)return Ie;gy=1;var h=Cd();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:m}}var l=h.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ie.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ie.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(d,f,null,m)},Ie.flushSync=function(d){var f=l.T,m=s.p;try{if(l.T=null,s.p=2,d)return d()}finally{l.T=f,s.p=m,s.d.f()}},Ie.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},Ie.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Ie.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,y=u(m,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):m==="script"&&s.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ie.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=u(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},Ie.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,y=u(m,f.crossOrigin);s.d.L(d,m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ie.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=u(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},Ie.requestFormReset=function(d){s.d.r(d)},Ie.unstable_batchedUpdates=function(d,f){return d(f)},Ie.useFormState=function(d,f,m){return l.H.useFormState(d,f,m)},Ie.useFormStatus=function(){return l.H.useHostTransitionStatus()},Ie.version="19.2.0",Ie}var yy;function xb(){if(yy)return Kh.exports;yy=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Kh.exports=aA(),Kh.exports}var by;function rA(){if(by)return Gr;by=1;var h=sA(),t=Cd(),e=xb();function s(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,r=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(r=i.return),n=i.return;while(n)}return i.tag===3?r:null}function l(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function u(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function d(n){if(o(n)!==n)throw Error(s(188))}function f(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(s(188));return i!==n?null:n}for(var r=n,c=i;;){var p=r.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){r=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===r)return d(p),n;if(g===c)return d(p),i;g=g.sibling}throw Error(s(188))}if(r.return!==c.return)r=p,c=g;else{for(var x=!1,_=p.child;_;){if(_===r){x=!0,r=p,c=g;break}if(_===c){x=!0,c=p,r=g;break}_=_.sibling}if(!x){for(_=g.child;_;){if(_===r){x=!0,r=g,c=p;break}if(_===c){x=!0,c=g,r=p;break}_=_.sibling}if(!x)throw Error(s(189))}}if(r.alternate!==c)throw Error(s(190))}if(r.tag!==3)throw Error(s(188));return r.stateNode.current===r?n:i}function m(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=m(n),i!==null)return i;n=n.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),M=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function ct(n){return n===null||typeof n!="object"?null:(n=J&&n[J]||n["@@iterator"],typeof n=="function"?n:null)}var dt=Symbol.for("react.client.reference");function at(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===dt?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case F:return"SuspenseList";case H:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case M:return n.displayName||"Context";case T:return(n._context.displayName||"Context")+".Consumer";case D:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return i=n.displayName||null,i!==null?i:at(n.type)||"Memo";case P:i=n._payload,n=n._init;try{return at(n(i))}catch{}}return null}var ht=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},pt=[],vt=-1;function O(n){return{current:n}}function q(n){0>vt||(n.current=pt[vt],pt[vt]=null,vt--)}function K(n,i){vt++,pt[vt]=n.current,n.current=i}var tt=O(null),lt=O(null),ft=O(null),et=O(null);function Gt(n,i){switch(K(ft,i),K(lt,n),K(tt,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Dg(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Dg(i),n=kg(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}q(tt),K(tt,n)}function wt(){q(tt),q(lt),q(ft)}function jt(n){n.memoizedState!==null&&K(et,n);var i=tt.current,r=kg(i,n.type);i!==r&&(K(lt,n),K(tt,r))}function Ce(n){lt.current===n&&(q(tt),q(lt)),et.current===n&&(q(et),Fr._currentValue=Y)}var _e,Bt;function Ft(n){if(_e===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);_e=i&&i[1]||"",Bt=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_e+n+Bt}var se=!1;function le(n,i){if(!n||se)return"";se=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(X){var G=X}Reflect.construct(n,[],Q)}else{try{Q.call()}catch(X){G=X}n.call(Q.prototype)}}else{try{throw Error()}catch(X){G=X}(Q=n())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(X){if(X&&G&&typeof X.stack=="string")return[X.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),x=g[0],_=g[1];if(x&&_){var N=x.split(`
`),U=_.split(`
`);for(p=c=0;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;for(;p<U.length&&!U[p].includes("DetermineComponentFrameRoot");)p++;if(c===N.length||p===U.length)for(c=N.length-1,p=U.length-1;1<=c&&0<=p&&N[c]!==U[p];)p--;for(;1<=c&&0<=p;c--,p--)if(N[c]!==U[p]){if(c!==1||p!==1)do if(c--,p--,0>p||N[c]!==U[p]){var $=`
`+N[c].replace(" at new "," at ");return n.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",n.displayName)),$}while(1<=c&&0<=p);break}}}finally{se=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?Ft(r):""}function Mi(n,i){switch(n.tag){case 26:case 27:case 5:return Ft(n.type);case 16:return Ft("Lazy");case 13:return n.child!==i&&i!==null?Ft("Suspense Fallback"):Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 15:return le(n.type,!1);case 11:return le(n.type.render,!1);case 1:return le(n.type,!0);case 31:return Ft("Activity");default:return""}}function Ri(n){try{var i="",r=null;do i+=Mi(n,r),r=n,n=n.return;while(n);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var os=Object.prototype.hasOwnProperty,Ka=h.unstable_scheduleCallback,Ni=h.unstable_cancelCallback,Mc=h.unstable_shouldYield,Rc=h.unstable_requestPaint,Ve=h.unstable_now,Nc=h.unstable_getCurrentPriorityLevel,wo=h.unstable_ImmediatePriority,Ln=h.unstable_UserBlockingPriority,On=h.unstable_NormalPriority,qn=h.unstable_LowPriority,zs=h.unstable_IdlePriority,Pv=h.log,jv=h.unstable_setDisableYieldValue,Wa=null,on=null;function Di(n){if(typeof Pv=="function"&&jv(n),on&&typeof on.setStrictMode=="function")try{on.setStrictMode(Wa,n)}catch{}}var ln=Math.clz32?Math.clz32:zv,Bv=Math.log,Fv=Math.LN2;function zv(n){return n>>>=0,n===0?32:31-(Bv(n)/Fv|0)|0}var Eo=256,Co=262144,_o=4194304;function ls(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function To(n,i,r){var c=n.pendingLanes;if(c===0)return 0;var p=0,g=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var _=c&134217727;return _!==0?(c=_&~g,c!==0?p=ls(c):(x&=_,x!==0?p=ls(x):r||(r=_&~n,r!==0&&(p=ls(r))))):(_=c&~g,_!==0?p=ls(_):x!==0?p=ls(x):r||(r=c&~n,r!==0&&(p=ls(r)))),p===0?0:i!==0&&i!==p&&(i&g)===0&&(g=p&-p,r=i&-i,g>=r||g===32&&(r&4194048)!==0)?i:p}function Qa(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Iv(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function df(){var n=_o;return _o<<=1,(_o&62914560)===0&&(_o=4194304),n}function Dc(n){for(var i=[],r=0;31>r;r++)i.push(n);return i}function Za(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Uv(n,i,r,c,p,g){var x=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var _=n.entanglements,N=n.expirationTimes,U=n.hiddenUpdates;for(r=x&~r;0<r;){var $=31-ln(r),Q=1<<$;_[$]=0,N[$]=-1;var G=U[$];if(G!==null)for(U[$]=null,$=0;$<G.length;$++){var X=G[$];X!==null&&(X.lane&=-536870913)}r&=~Q}c!==0&&ff(n,c,0),g!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=g&~(x&~i))}function ff(n,i,r){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-ln(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|r&261930}function pf(n,i){var r=n.entangledLanes|=i;for(n=n.entanglements;r;){var c=31-ln(r),p=1<<c;p&i|n[c]&i&&(n[c]|=i),r&=~p}}function mf(n,i){var r=i&-i;return r=(r&42)!==0?1:kc(r),(r&(n.suspendedLanes|i))!==0?0:r}function kc(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Lc(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gf(){var n=V.p;return n!==0?n:(n=window.event,n===void 0?32:ey(n.type))}function yf(n,i){var r=V.p;try{return V.p=n,i()}finally{V.p=r}}var ki=Math.random().toString(36).slice(2),ke="__reactFiber$"+ki,We="__reactProps$"+ki,Is="__reactContainer$"+ki,Oc="__reactEvents$"+ki,Hv="__reactListeners$"+ki,Gv="__reactHandles$"+ki,bf="__reactResources$"+ki,Ja="__reactMarker$"+ki;function Pc(n){delete n[ke],delete n[We],delete n[Oc],delete n[Hv],delete n[Gv]}function Us(n){var i=n[ke];if(i)return i;for(var r=n.parentNode;r;){if(i=r[Is]||r[ke]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(n=zg(n);n!==null;){if(r=n[ke])return r;n=zg(n)}return i}n=r,r=n.parentNode}return null}function Hs(n){if(n=n[ke]||n[Is]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function tr(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(s(33))}function Gs(n){var i=n[bf];return i||(i=n[bf]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Te(n){n[Ja]=!0}var vf=new Set,xf={};function cs(n,i){Vs(n,i),Vs(n+"Capture",i)}function Vs(n,i){for(xf[n]=i,n=0;n<i.length;n++)vf.add(i[n])}var Vv=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Af={},Sf={};function qv(n){return os.call(Sf,n)?!0:os.call(Af,n)?!1:Vv.test(n)?Sf[n]=!0:(Af[n]=!0,!1)}function Mo(n,i,r){if(qv(i))if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+r)}}function Ro(n,i,r){if(r===null)n.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+r)}}function ai(n,i,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(i,r,""+c)}}function xn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function wf(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Xv(n,i,r){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,g=c.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return p.call(this)},set:function(x){r=""+x,g.call(this,x)}}),Object.defineProperty(n,i,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(x){r=""+x},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function jc(n){if(!n._valueTracker){var i=wf(n)?"checked":"value";n._valueTracker=Xv(n,i,""+n[i])}}function Ef(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return n&&(c=wf(n)?n.checked?"true":"false":n.value),n=c,n!==r?(i.setValue(n),!0):!1}function No(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Yv=/[\n"\\]/g;function An(n){return n.replace(Yv,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Bc(n,i,r,c,p,g,x,_){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),i!=null?x==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+xn(i)):n.value!==""+xn(i)&&(n.value=""+xn(i)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),i!=null?Fc(n,x,xn(i)):r!=null?Fc(n,x,xn(r)):c!=null&&n.removeAttribute("value"),p==null&&g!=null&&(n.defaultChecked=!!g),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.name=""+xn(_):n.removeAttribute("name")}function Cf(n,i,r,c,p,g,x,_){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||r!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){jc(n);return}r=r!=null?""+xn(r):"",i=i!=null?""+xn(i):r,_||i===n.value||(n.value=i),n.defaultValue=i}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=_?n.checked:!!c,n.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),jc(n)}function Fc(n,i,r){i==="number"&&No(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function qs(n,i,r,c){if(n=n.options,i){i={};for(var p=0;p<r.length;p++)i["$"+r[p]]=!0;for(r=0;r<n.length;r++)p=i.hasOwnProperty("$"+n[r].value),n[r].selected!==p&&(n[r].selected=p),p&&c&&(n[r].defaultSelected=!0)}else{for(r=""+xn(r),i=null,p=0;p<n.length;p++){if(n[p].value===r){n[p].selected=!0,c&&(n[p].defaultSelected=!0);return}i!==null||n[p].disabled||(i=n[p])}i!==null&&(i.selected=!0)}}function _f(n,i,r){if(i!=null&&(i=""+xn(i),i!==n.value&&(n.value=i),r==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=r!=null?""+xn(r):""}function Tf(n,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(s(92));if(ht(c)){if(1<c.length)throw Error(s(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=xn(i),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c),jc(n)}function Xs(n,i){if(i){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=i;return}}n.textContent=i}var $v=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mf(n,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,r):typeof r!="number"||r===0||$v.has(i)?i==="float"?n.cssFloat=r:n[i]=(""+r).trim():n[i]=r+"px"}function Rf(n,i,r){if(i!=null&&typeof i!="object")throw Error(s(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var p in i)c=i[p],i.hasOwnProperty(p)&&r[p]!==c&&Mf(n,p,c)}else for(var g in i)i.hasOwnProperty(g)&&Mf(n,g,i[g])}function zc(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(n){return Wv.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ri(){}var Ic=null;function Uc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ys=null,$s=null;function Nf(n){var i=Hs(n);if(i&&(n=i.stateNode)){var r=n[We]||null;t:switch(n=i.stateNode,i.type){case"input":if(Bc(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+An(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==n&&c.form===n.form){var p=c[We]||null;if(!p)throw Error(s(90));Bc(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===n.form&&Ef(c)}break t;case"textarea":_f(n,r.value,r.defaultValue);break t;case"select":i=r.value,i!=null&&qs(n,!!r.multiple,i,!1)}}}var Hc=!1;function Df(n,i,r){if(Hc)return n(i,r);Hc=!0;try{var c=n(i);return c}finally{if(Hc=!1,(Ys!==null||$s!==null)&&(bl(),Ys&&(i=Ys,n=$s,$s=Ys=null,Nf(i),n)))for(i=0;i<n.length;i++)Nf(n[i])}}function er(n,i){var r=n.stateNode;if(r===null)return null;var c=r[We]||null;if(c===null)return null;r=c[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break t;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(s(231,i,typeof r));return r}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gc=!1;if(oi)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){Gc=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{Gc=!1}var Li=null,Vc=null,ko=null;function kf(){if(ko)return ko;var n,i=Vc,r=i.length,c,p="value"in Li?Li.value:Li.textContent,g=p.length;for(n=0;n<r&&i[n]===p[n];n++);var x=r-n;for(c=1;c<=x&&i[r-c]===p[g-c];c++);return ko=p.slice(n,1<c?1-c:void 0)}function Lo(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Oo(){return!0}function Lf(){return!1}function Qe(n){function i(r,c,p,g,x){this._reactName=r,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var _ in n)n.hasOwnProperty(_)&&(r=n[_],this[_]=r?r(g):g[_]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Oo:Lf,this.isPropagationStopped=Lf,this}return y(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),i}var us={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Po=Qe(us),ir=y({},us,{view:0,detail:0}),Qv=Qe(ir),qc,Xc,sr,jo=y({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$c,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==sr&&(sr&&n.type==="mousemove"?(qc=n.screenX-sr.screenX,Xc=n.screenY-sr.screenY):Xc=qc=0,sr=n),qc)},movementY:function(n){return"movementY"in n?n.movementY:Xc}}),Of=Qe(jo),Zv=y({},jo,{dataTransfer:0}),Jv=Qe(Zv),t1=y({},ir,{relatedTarget:0}),Yc=Qe(t1),e1=y({},us,{animationName:0,elapsedTime:0,pseudoElement:0}),n1=Qe(e1),i1=y({},us,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),s1=Qe(i1),a1=y({},us,{data:0}),Pf=Qe(a1),r1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c1(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=l1[n])?!!i[n]:!1}function $c(){return c1}var u1=y({},ir,{key:function(n){if(n.key){var i=r1[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Lo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?o1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$c,charCode:function(n){return n.type==="keypress"?Lo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Lo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),h1=Qe(u1),d1=y({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jf=Qe(d1),f1=y({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$c}),p1=Qe(f1),m1=y({},us,{propertyName:0,elapsedTime:0,pseudoElement:0}),g1=Qe(m1),y1=y({},jo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),b1=Qe(y1),v1=y({},us,{newState:0,oldState:0}),x1=Qe(v1),A1=[9,13,27,32],Kc=oi&&"CompositionEvent"in window,ar=null;oi&&"documentMode"in document&&(ar=document.documentMode);var S1=oi&&"TextEvent"in window&&!ar,Bf=oi&&(!Kc||ar&&8<ar&&11>=ar),Ff=" ",zf=!1;function If(n,i){switch(n){case"keyup":return A1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ks=!1;function w1(n,i){switch(n){case"compositionend":return Uf(i);case"keypress":return i.which!==32?null:(zf=!0,Ff);case"textInput":return n=i.data,n===Ff&&zf?null:n;default:return null}}function E1(n,i){if(Ks)return n==="compositionend"||!Kc&&If(n,i)?(n=kf(),ko=Vc=Li=null,Ks=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Bf&&i.locale!=="ko"?null:i.data;default:return null}}var C1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!C1[n.type]:i==="textarea"}function Gf(n,i,r,c){Ys?$s?$s.push(c):$s=[c]:Ys=c,i=Cl(i,"onChange"),0<i.length&&(r=new Po("onChange","change",null,r,c),n.push({event:r,listeners:i}))}var rr=null,or=null;function _1(n){Cg(n,0)}function Bo(n){var i=tr(n);if(Ef(i))return n}function Vf(n,i){if(n==="change")return i}var qf=!1;if(oi){var Wc;if(oi){var Qc="oninput"in document;if(!Qc){var Xf=document.createElement("div");Xf.setAttribute("oninput","return;"),Qc=typeof Xf.oninput=="function"}Wc=Qc}else Wc=!1;qf=Wc&&(!document.documentMode||9<document.documentMode)}function Yf(){rr&&(rr.detachEvent("onpropertychange",$f),or=rr=null)}function $f(n){if(n.propertyName==="value"&&Bo(or)){var i=[];Gf(i,or,n,Uc(n)),Df(_1,i)}}function T1(n,i,r){n==="focusin"?(Yf(),rr=i,or=r,rr.attachEvent("onpropertychange",$f)):n==="focusout"&&Yf()}function M1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bo(or)}function R1(n,i){if(n==="click")return Bo(i)}function N1(n,i){if(n==="input"||n==="change")return Bo(i)}function D1(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var cn=typeof Object.is=="function"?Object.is:D1;function lr(n,i){if(cn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var r=Object.keys(n),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var p=r[c];if(!os.call(i,p)||!cn(n[p],i[p]))return!1}return!0}function Kf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wf(n,i){var r=Kf(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=i&&c>=i)return{node:r,offset:i-n};n=c}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Kf(r)}}function Qf(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Qf(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Zf(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=No(n.document);i instanceof n.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)n=i.contentWindow;else break;i=No(n.document)}return i}function Zc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var k1=oi&&"documentMode"in document&&11>=document.documentMode,Ws=null,Jc=null,cr=null,tu=!1;function Jf(n,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tu||Ws==null||Ws!==No(c)||(c=Ws,"selectionStart"in c&&Zc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),cr&&lr(cr,c)||(cr=c,c=Cl(Jc,"onSelect"),0<c.length&&(i=new Po("onSelect","select",null,i,r),n.push({event:i,listeners:c}),i.target=Ws)))}function hs(n,i){var r={};return r[n.toLowerCase()]=i.toLowerCase(),r["Webkit"+n]="webkit"+i,r["Moz"+n]="moz"+i,r}var Qs={animationend:hs("Animation","AnimationEnd"),animationiteration:hs("Animation","AnimationIteration"),animationstart:hs("Animation","AnimationStart"),transitionrun:hs("Transition","TransitionRun"),transitionstart:hs("Transition","TransitionStart"),transitioncancel:hs("Transition","TransitionCancel"),transitionend:hs("Transition","TransitionEnd")},eu={},tp={};oi&&(tp=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function ds(n){if(eu[n])return eu[n];if(!Qs[n])return n;var i=Qs[n],r;for(r in i)if(i.hasOwnProperty(r)&&r in tp)return eu[n]=i[r];return n}var ep=ds("animationend"),np=ds("animationiteration"),ip=ds("animationstart"),L1=ds("transitionrun"),O1=ds("transitionstart"),P1=ds("transitioncancel"),sp=ds("transitionend"),ap=new Map,nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nu.push("scrollEnd");function Pn(n,i){ap.set(n,i),cs(i,[n])}var Fo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Sn=[],Zs=0,iu=0;function zo(){for(var n=Zs,i=iu=Zs=0;i<n;){var r=Sn[i];Sn[i++]=null;var c=Sn[i];Sn[i++]=null;var p=Sn[i];Sn[i++]=null;var g=Sn[i];if(Sn[i++]=null,c!==null&&p!==null){var x=c.pending;x===null?p.next=p:(p.next=x.next,x.next=p),c.pending=p}g!==0&&rp(r,p,g)}}function Io(n,i,r,c){Sn[Zs++]=n,Sn[Zs++]=i,Sn[Zs++]=r,Sn[Zs++]=c,iu|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function su(n,i,r,c){return Io(n,i,r,c),Uo(n)}function fs(n,i){return Io(n,null,null,i),Uo(n)}function rp(n,i,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var p=!1,g=n.return;g!==null;)g.childLanes|=r,c=g.alternate,c!==null&&(c.childLanes|=r),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(p=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,p&&i!==null&&(p=31-ln(r),n=g.hiddenUpdates,c=n[p],c===null?n[p]=[i]:c.push(i),i.lane=r|536870912),g):null}function Uo(n){if(50<Dr)throw Dr=0,fh=null,Error(s(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Js={};function j1(n,i,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(n,i,r,c){return new j1(n,i,r,c)}function au(n){return n=n.prototype,!(!n||!n.isReactComponent)}function li(n,i){var r=n.alternate;return r===null?(r=un(n.tag,i,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=i,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,i=n.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function op(n,i){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,i=r.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Ho(n,i,r,c,p,g){var x=0;if(c=n,typeof n=="function")au(n)&&(x=1);else if(typeof n=="string")x=Ux(n,r,tt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case H:return n=un(31,r,i,p),n.elementType=H,n.lanes=g,n;case S:return ps(r.children,p,g,i);case E:x=8,p|=24;break;case C:return n=un(12,r,i,p|2),n.elementType=C,n.lanes=g,n;case k:return n=un(13,r,i,p),n.elementType=k,n.lanes=g,n;case F:return n=un(19,r,i,p),n.elementType=F,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:x=10;break t;case T:x=9;break t;case D:x=11;break t;case B:x=14;break t;case P:x=16,c=null;break t}x=29,r=Error(s(130,n===null?"null":typeof n,"")),c=null}return i=un(x,r,i,p),i.elementType=n,i.type=c,i.lanes=g,i}function ps(n,i,r,c){return n=un(7,n,c,i),n.lanes=r,n}function ru(n,i,r){return n=un(6,n,null,i),n.lanes=r,n}function lp(n){var i=un(18,null,null,0);return i.stateNode=n,i}function ou(n,i,r){return i=un(4,n.children!==null?n.children:[],n.key,i),i.lanes=r,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var cp=new WeakMap;function wn(n,i){if(typeof n=="object"&&n!==null){var r=cp.get(n);return r!==void 0?r:(i={value:n,source:i,stack:Ri(i)},cp.set(n,i),i)}return{value:n,source:i,stack:Ri(i)}}var ta=[],ea=0,Go=null,ur=0,En=[],Cn=0,Oi=null,Xn=1,Yn="";function ci(n,i){ta[ea++]=ur,ta[ea++]=Go,Go=n,ur=i}function up(n,i,r){En[Cn++]=Xn,En[Cn++]=Yn,En[Cn++]=Oi,Oi=n;var c=Xn;n=Yn;var p=32-ln(c)-1;c&=~(1<<p),r+=1;var g=32-ln(i)+p;if(30<g){var x=p-p%5;g=(c&(1<<x)-1).toString(32),c>>=x,p-=x,Xn=1<<32-ln(i)+p|r<<p|c,Yn=g+n}else Xn=1<<g|r<<p|c,Yn=n}function lu(n){n.return!==null&&(ci(n,1),up(n,1,0))}function cu(n){for(;n===Go;)Go=ta[--ea],ta[ea]=null,ur=ta[--ea],ta[ea]=null;for(;n===Oi;)Oi=En[--Cn],En[Cn]=null,Yn=En[--Cn],En[Cn]=null,Xn=En[--Cn],En[Cn]=null}function hp(n,i){En[Cn++]=Xn,En[Cn++]=Yn,En[Cn++]=Oi,Xn=i.id,Yn=i.overflow,Oi=n}var Le=null,Jt=null,Ot=!1,Pi=null,_n=!1,uu=Error(s(519));function ji(n){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hr(wn(i,n)),uu}function dp(n){var i=n.stateNode,r=n.type,c=n.memoizedProps;switch(i[ke]=n,i[We]=c,r){case"dialog":Nt("cancel",i),Nt("close",i);break;case"iframe":case"object":case"embed":Nt("load",i);break;case"video":case"audio":for(r=0;r<Lr.length;r++)Nt(Lr[r],i);break;case"source":Nt("error",i);break;case"img":case"image":case"link":Nt("error",i),Nt("load",i);break;case"details":Nt("toggle",i);break;case"input":Nt("invalid",i),Cf(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Nt("invalid",i);break;case"textarea":Nt("invalid",i),Tf(i,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||Rg(i.textContent,r)?(c.popover!=null&&(Nt("beforetoggle",i),Nt("toggle",i)),c.onScroll!=null&&Nt("scroll",i),c.onScrollEnd!=null&&Nt("scrollend",i),c.onClick!=null&&(i.onclick=ri),i=!0):i=!1,i||ji(n,!0)}function fp(n){for(Le=n.return;Le;)switch(Le.tag){case 5:case 31:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:Le=Le.return}}function na(n){if(n!==Le)return!1;if(!Ot)return fp(n),Ot=!0,!1;var i=n.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||Mh(n.type,n.memoizedProps)),r=!r),r&&Jt&&ji(n),fp(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Jt=Fg(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Jt=Fg(n)}else i===27?(i=Jt,Wi(n.type)?(n=Lh,Lh=null,Jt=n):Jt=i):Jt=Le?Mn(n.stateNode.nextSibling):null;return!0}function ms(){Jt=Le=null,Ot=!1}function hu(){var n=Pi;return n!==null&&(en===null?en=n:en.push.apply(en,n),Pi=null),n}function hr(n){Pi===null?Pi=[n]:Pi.push(n)}var du=O(null),gs=null,ui=null;function Bi(n,i,r){K(du,i._currentValue),i._currentValue=r}function hi(n){n._currentValue=du.current,q(du)}function fu(n,i,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===r)break;n=n.return}}function pu(n,i,r,c){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var g=p.dependencies;if(g!==null){var x=p.child;g=g.firstContext;t:for(;g!==null;){var _=g;g=p;for(var N=0;N<i.length;N++)if(_.context===i[N]){g.lanes|=r,_=g.alternate,_!==null&&(_.lanes|=r),fu(g.return,r,n),c||(x=null);break t}g=_.next}}else if(p.tag===18){if(x=p.return,x===null)throw Error(s(341));x.lanes|=r,g=x.alternate,g!==null&&(g.lanes|=r),fu(x,r,n),x=null}else x=p.child;if(x!==null)x.return=p;else for(x=p;x!==null;){if(x===n){x=null;break}if(p=x.sibling,p!==null){p.return=x.return,x=p;break}x=x.return}p=x}}function ia(n,i,r,c){n=null;for(var p=i,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var x=p.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var _=p.type;cn(p.pendingProps.value,x.value)||(n!==null?n.push(_):n=[_])}}else if(p===et.current){if(x=p.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(Fr):n=[Fr])}p=p.return}n!==null&&pu(i,n,r,c),i.flags|=262144}function Vo(n){for(n=n.firstContext;n!==null;){if(!cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ys(n){gs=n,ui=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Oe(n){return pp(gs,n)}function qo(n,i){return gs===null&&ys(n),pp(n,i)}function pp(n,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},ui===null){if(n===null)throw Error(s(308));ui=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ui=ui.next=i;return r}var B1=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(r){return r()})}},F1=h.unstable_scheduleCallback,z1=h.unstable_NormalPriority,ge={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mu(){return{controller:new B1,data:new Map,refCount:0}}function dr(n){n.refCount--,n.refCount===0&&F1(z1,function(){n.controller.abort()})}var fr=null,gu=0,sa=0,aa=null;function I1(n,i){if(fr===null){var r=fr=[];gu=0,sa=vh(),aa={status:"pending",value:void 0,then:function(c){r.push(c)}}}return gu++,i.then(mp,mp),i}function mp(){if(--gu===0&&fr!==null){aa!==null&&(aa.status="fulfilled");var n=fr;fr=null,sa=0,aa=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function U1(n,i){var r=[],c={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var p=0;p<r.length;p++)(0,r[p])(i)},function(p){for(c.status="rejected",c.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),c}var gp=L.S;L.S=function(n,i){Jm=Ve(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&I1(n,i),gp!==null&&gp(n,i)};var bs=O(null);function yu(){var n=bs.current;return n!==null?n:Wt.pooledCache}function Xo(n,i){i===null?K(bs,bs.current):K(bs,i.pool)}function yp(){var n=yu();return n===null?null:{parent:ge._currentValue,pool:n}}var ra=Error(s(460)),bu=Error(s(474)),Yo=Error(s(542)),$o={then:function(){}};function bp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function vp(n,i,r){switch(r=n[r],r===void 0?n.push(i):r!==i&&(i.then(ri,ri),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Ap(n),n;default:if(typeof i.status=="string")i.then(ri,ri);else{if(n=Wt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var p=i;p.status="fulfilled",p.value=c}},function(c){if(i.status==="pending"){var p=i;p.status="rejected",p.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Ap(n),n}throw xs=i,ra}}function vs(n){try{var i=n._init;return i(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(xs=r,ra):r}}var xs=null;function xp(){if(xs===null)throw Error(s(459));var n=xs;return xs=null,n}function Ap(n){if(n===ra||n===Yo)throw Error(s(483))}var oa=null,pr=0;function Ko(n){var i=pr;return pr+=1,oa===null&&(oa=[]),vp(oa,n,i)}function mr(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Wo(n,i){throw i.$$typeof===b?Error(s(525)):(n=Object.prototype.toString.call(i),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Sp(n){function i(z,j){if(n){var I=z.deletions;I===null?(z.deletions=[j],z.flags|=16):I.push(j)}}function r(z,j){if(!n)return null;for(;j!==null;)i(z,j),j=j.sibling;return null}function c(z){for(var j=new Map;z!==null;)z.key!==null?j.set(z.key,z):j.set(z.index,z),z=z.sibling;return j}function p(z,j){return z=li(z,j),z.index=0,z.sibling=null,z}function g(z,j,I){return z.index=I,n?(I=z.alternate,I!==null?(I=I.index,I<j?(z.flags|=67108866,j):I):(z.flags|=67108866,j)):(z.flags|=1048576,j)}function x(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function _(z,j,I,W){return j===null||j.tag!==6?(j=ru(I,z.mode,W),j.return=z,j):(j=p(j,I),j.return=z,j)}function N(z,j,I,W){var mt=I.type;return mt===S?$(z,j,I.props.children,W,I.key):j!==null&&(j.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===P&&vs(mt)===j.type)?(j=p(j,I.props),mr(j,I),j.return=z,j):(j=Ho(I.type,I.key,I.props,null,z.mode,W),mr(j,I),j.return=z,j)}function U(z,j,I,W){return j===null||j.tag!==4||j.stateNode.containerInfo!==I.containerInfo||j.stateNode.implementation!==I.implementation?(j=ou(I,z.mode,W),j.return=z,j):(j=p(j,I.children||[]),j.return=z,j)}function $(z,j,I,W,mt){return j===null||j.tag!==7?(j=ps(I,z.mode,W,mt),j.return=z,j):(j=p(j,I),j.return=z,j)}function Q(z,j,I){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=ru(""+j,z.mode,I),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return I=Ho(j.type,j.key,j.props,null,z.mode,I),mr(I,j),I.return=z,I;case w:return j=ou(j,z.mode,I),j.return=z,j;case P:return j=vs(j),Q(z,j,I)}if(ht(j)||ct(j))return j=ps(j,z.mode,I,null),j.return=z,j;if(typeof j.then=="function")return Q(z,Ko(j),I);if(j.$$typeof===M)return Q(z,qo(z,j),I);Wo(z,j)}return null}function G(z,j,I,W){var mt=j!==null?j.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return mt!==null?null:_(z,j,""+I,W);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case A:return I.key===mt?N(z,j,I,W):null;case w:return I.key===mt?U(z,j,I,W):null;case P:return I=vs(I),G(z,j,I,W)}if(ht(I)||ct(I))return mt!==null?null:$(z,j,I,W,null);if(typeof I.then=="function")return G(z,j,Ko(I),W);if(I.$$typeof===M)return G(z,j,qo(z,I),W);Wo(z,I)}return null}function X(z,j,I,W,mt){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return z=z.get(I)||null,_(j,z,""+W,mt);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return z=z.get(W.key===null?I:W.key)||null,N(j,z,W,mt);case w:return z=z.get(W.key===null?I:W.key)||null,U(j,z,W,mt);case P:return W=vs(W),X(z,j,I,W,mt)}if(ht(W)||ct(W))return z=z.get(I)||null,$(j,z,W,mt,null);if(typeof W.then=="function")return X(z,j,I,Ko(W),mt);if(W.$$typeof===M)return X(z,j,I,qo(j,W),mt);Wo(j,W)}return null}function st(z,j,I,W){for(var mt=null,zt=null,ut=j,Ct=j=0,kt=null;ut!==null&&Ct<I.length;Ct++){ut.index>Ct?(kt=ut,ut=null):kt=ut.sibling;var It=G(z,ut,I[Ct],W);if(It===null){ut===null&&(ut=kt);break}n&&ut&&It.alternate===null&&i(z,ut),j=g(It,j,Ct),zt===null?mt=It:zt.sibling=It,zt=It,ut=kt}if(Ct===I.length)return r(z,ut),Ot&&ci(z,Ct),mt;if(ut===null){for(;Ct<I.length;Ct++)ut=Q(z,I[Ct],W),ut!==null&&(j=g(ut,j,Ct),zt===null?mt=ut:zt.sibling=ut,zt=ut);return Ot&&ci(z,Ct),mt}for(ut=c(ut);Ct<I.length;Ct++)kt=X(ut,z,Ct,I[Ct],W),kt!==null&&(n&&kt.alternate!==null&&ut.delete(kt.key===null?Ct:kt.key),j=g(kt,j,Ct),zt===null?mt=kt:zt.sibling=kt,zt=kt);return n&&ut.forEach(function(es){return i(z,es)}),Ot&&ci(z,Ct),mt}function yt(z,j,I,W){if(I==null)throw Error(s(151));for(var mt=null,zt=null,ut=j,Ct=j=0,kt=null,It=I.next();ut!==null&&!It.done;Ct++,It=I.next()){ut.index>Ct?(kt=ut,ut=null):kt=ut.sibling;var es=G(z,ut,It.value,W);if(es===null){ut===null&&(ut=kt);break}n&&ut&&es.alternate===null&&i(z,ut),j=g(es,j,Ct),zt===null?mt=es:zt.sibling=es,zt=es,ut=kt}if(It.done)return r(z,ut),Ot&&ci(z,Ct),mt;if(ut===null){for(;!It.done;Ct++,It=I.next())It=Q(z,It.value,W),It!==null&&(j=g(It,j,Ct),zt===null?mt=It:zt.sibling=It,zt=It);return Ot&&ci(z,Ct),mt}for(ut=c(ut);!It.done;Ct++,It=I.next())It=X(ut,z,Ct,It.value,W),It!==null&&(n&&It.alternate!==null&&ut.delete(It.key===null?Ct:It.key),j=g(It,j,Ct),zt===null?mt=It:zt.sibling=It,zt=It);return n&&ut.forEach(function(Zx){return i(z,Zx)}),Ot&&ci(z,Ct),mt}function $t(z,j,I,W){if(typeof I=="object"&&I!==null&&I.type===S&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case A:t:{for(var mt=I.key;j!==null;){if(j.key===mt){if(mt=I.type,mt===S){if(j.tag===7){r(z,j.sibling),W=p(j,I.props.children),W.return=z,z=W;break t}}else if(j.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===P&&vs(mt)===j.type){r(z,j.sibling),W=p(j,I.props),mr(W,I),W.return=z,z=W;break t}r(z,j);break}else i(z,j);j=j.sibling}I.type===S?(W=ps(I.props.children,z.mode,W,I.key),W.return=z,z=W):(W=Ho(I.type,I.key,I.props,null,z.mode,W),mr(W,I),W.return=z,z=W)}return x(z);case w:t:{for(mt=I.key;j!==null;){if(j.key===mt)if(j.tag===4&&j.stateNode.containerInfo===I.containerInfo&&j.stateNode.implementation===I.implementation){r(z,j.sibling),W=p(j,I.children||[]),W.return=z,z=W;break t}else{r(z,j);break}else i(z,j);j=j.sibling}W=ou(I,z.mode,W),W.return=z,z=W}return x(z);case P:return I=vs(I),$t(z,j,I,W)}if(ht(I))return st(z,j,I,W);if(ct(I)){if(mt=ct(I),typeof mt!="function")throw Error(s(150));return I=mt.call(I),yt(z,j,I,W)}if(typeof I.then=="function")return $t(z,j,Ko(I),W);if(I.$$typeof===M)return $t(z,j,qo(z,I),W);Wo(z,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,j!==null&&j.tag===6?(r(z,j.sibling),W=p(j,I),W.return=z,z=W):(r(z,j),W=ru(I,z.mode,W),W.return=z,z=W),x(z)):r(z,j)}return function(z,j,I,W){try{pr=0;var mt=$t(z,j,I,W);return oa=null,mt}catch(ut){if(ut===ra||ut===Yo)throw ut;var zt=un(29,ut,null,z.mode);return zt.lanes=W,zt.return=z,zt}finally{}}}var As=Sp(!0),wp=Sp(!1),Fi=!1;function vu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xu(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ii(n,i,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Ht&2)!==0){var p=c.pending;return p===null?i.next=i:(i.next=p.next,p.next=i),c.pending=i,i=Uo(n),rp(n,null,r),i}return Io(n,c,i,r),Uo(n)}function gr(n,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,pf(n,r)}}function Au(n,i){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var p=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var x={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};g===null?p=g=x:g=g.next=x,r=r.next}while(r!==null);g===null?p=g=i:g=g.next=i}else p=g=i;r={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=i:n.next=i,r.lastBaseUpdate=i}var Su=!1;function yr(){if(Su){var n=aa;if(n!==null)throw n}}function br(n,i,r,c){Su=!1;var p=n.updateQueue;Fi=!1;var g=p.firstBaseUpdate,x=p.lastBaseUpdate,_=p.shared.pending;if(_!==null){p.shared.pending=null;var N=_,U=N.next;N.next=null,x===null?g=U:x.next=U,x=N;var $=n.alternate;$!==null&&($=$.updateQueue,_=$.lastBaseUpdate,_!==x&&(_===null?$.firstBaseUpdate=U:_.next=U,$.lastBaseUpdate=N))}if(g!==null){var Q=p.baseState;x=0,$=U=N=null,_=g;do{var G=_.lane&-536870913,X=G!==_.lane;if(X?(Dt&G)===G:(c&G)===G){G!==0&&G===sa&&(Su=!0),$!==null&&($=$.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var st=n,yt=_;G=i;var $t=r;switch(yt.tag){case 1:if(st=yt.payload,typeof st=="function"){Q=st.call($t,Q,G);break t}Q=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=yt.payload,G=typeof st=="function"?st.call($t,Q,G):st,G==null)break t;Q=y({},Q,G);break t;case 2:Fi=!0}}G=_.callback,G!==null&&(n.flags|=64,X&&(n.flags|=8192),X=p.callbacks,X===null?p.callbacks=[G]:X.push(G))}else X={lane:G,tag:_.tag,payload:_.payload,callback:_.callback,next:null},$===null?(U=$=X,N=Q):$=$.next=X,x|=G;if(_=_.next,_===null){if(_=p.shared.pending,_===null)break;X=_,_=X.next,X.next=null,p.lastBaseUpdate=X,p.shared.pending=null}}while(!0);$===null&&(N=Q),p.baseState=N,p.firstBaseUpdate=U,p.lastBaseUpdate=$,g===null&&(p.shared.lanes=0),qi|=x,n.lanes=x,n.memoizedState=Q}}function Ep(n,i){if(typeof n!="function")throw Error(s(191,n));n.call(i)}function Cp(n,i){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Ep(r[n],i)}var la=O(null),Qo=O(0);function _p(n,i){n=xi,K(Qo,n),K(la,i),xi=n|i.baseLanes}function wu(){K(Qo,xi),K(la,la.current)}function Eu(){xi=Qo.current,q(la),q(Qo)}var hn=O(null),Tn=null;function Ui(n){var i=n.alternate;K(he,he.current&1),K(hn,n),Tn===null&&(i===null||la.current!==null||i.memoizedState!==null)&&(Tn=n)}function Cu(n){K(he,he.current),K(hn,n),Tn===null&&(Tn=n)}function Tp(n){n.tag===22?(K(he,he.current),K(hn,n),Tn===null&&(Tn=n)):Hi()}function Hi(){K(he,he.current),K(hn,hn.current)}function dn(n){q(hn),Tn===n&&(Tn=null),q(he)}var he=O(0);function Zo(n){for(var i=n;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Dh(r)||kh(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var di=0,Et=null,Xt=null,ye=null,Jo=!1,ca=!1,Ss=!1,tl=0,vr=0,ua=null,H1=0;function ce(){throw Error(s(321))}function _u(n,i){if(i===null)return!1;for(var r=0;r<i.length&&r<n.length;r++)if(!cn(n[r],i[r]))return!1;return!0}function Tu(n,i,r,c,p,g){return di=g,Et=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,L.H=n===null||n.memoizedState===null?um:Hu,Ss=!1,g=r(c,p),Ss=!1,ca&&(g=Rp(i,r,c,p)),Mp(n),g}function Mp(n){L.H=Sr;var i=Xt!==null&&Xt.next!==null;if(di=0,ye=Xt=Et=null,Jo=!1,vr=0,ua=null,i)throw Error(s(300));n===null||be||(n=n.dependencies,n!==null&&Vo(n)&&(be=!0))}function Rp(n,i,r,c){Et=n;var p=0;do{if(ca&&(ua=null),vr=0,ca=!1,25<=p)throw Error(s(301));if(p+=1,ye=Xt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=hm,g=i(r,c)}while(ca);return g}function G1(){var n=L.H,i=n.useState()[0];return i=typeof i.then=="function"?xr(i):i,n=n.useState()[0],(Xt!==null?Xt.memoizedState:null)!==n&&(Et.flags|=1024),i}function Mu(){var n=tl!==0;return tl=0,n}function Ru(n,i,r){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~r}function Nu(n){if(Jo){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Jo=!1}di=0,ye=Xt=Et=null,ca=!1,vr=tl=0,ua=null}function qe(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ye===null?Et.memoizedState=ye=n:ye=ye.next=n,ye}function de(){if(Xt===null){var n=Et.alternate;n=n!==null?n.memoizedState:null}else n=Xt.next;var i=ye===null?Et.memoizedState:ye.next;if(i!==null)ye=i,Xt=n;else{if(n===null)throw Et.alternate===null?Error(s(467)):Error(s(310));Xt=n,n={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},ye===null?Et.memoizedState=ye=n:ye=ye.next=n}return ye}function el(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xr(n){var i=vr;return vr+=1,ua===null&&(ua=[]),n=vp(ua,n,i),i=Et,(ye===null?i.memoizedState:ye.next)===null&&(i=i.alternate,L.H=i===null||i.memoizedState===null?um:Hu),n}function nl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return xr(n);if(n.$$typeof===M)return Oe(n)}throw Error(s(438,String(n)))}function Du(n){var i=null,r=Et.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=Et.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(p){return p.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=el(),Et.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(n),c=0;c<n;c++)r[c]=Z;return i.index++,r}function fi(n,i){return typeof i=="function"?i(n):i}function il(n){var i=de();return ku(i,Xt,n)}function ku(n,i,r){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=r;var p=n.baseQueue,g=c.pending;if(g!==null){if(p!==null){var x=p.next;p.next=g.next,g.next=x}i.baseQueue=p=g,c.pending=null}if(g=n.baseState,p===null)n.memoizedState=g;else{i=p.next;var _=x=null,N=null,U=i,$=!1;do{var Q=U.lane&-536870913;if(Q!==U.lane?(Dt&Q)===Q:(di&Q)===Q){var G=U.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),Q===sa&&($=!0);else if((di&G)===G){U=U.next,G===sa&&($=!0);continue}else Q={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(_=N=Q,x=g):N=N.next=Q,Et.lanes|=G,qi|=G;Q=U.action,Ss&&r(g,Q),g=U.hasEagerState?U.eagerState:r(g,Q)}else G={lane:Q,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},N===null?(_=N=G,x=g):N=N.next=G,Et.lanes|=Q,qi|=Q;U=U.next}while(U!==null&&U!==i);if(N===null?x=g:N.next=_,!cn(g,n.memoizedState)&&(be=!0,$&&(r=aa,r!==null)))throw r;n.memoizedState=g,n.baseState=x,n.baseQueue=N,c.lastRenderedState=g}return p===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Lu(n){var i=de(),r=i.queue;if(r===null)throw Error(s(311));r.lastRenderedReducer=n;var c=r.dispatch,p=r.pending,g=i.memoizedState;if(p!==null){r.pending=null;var x=p=p.next;do g=n(g,x.action),x=x.next;while(x!==p);cn(g,i.memoizedState)||(be=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),r.lastRenderedState=g}return[g,c]}function Np(n,i,r){var c=Et,p=de(),g=Ot;if(g){if(r===void 0)throw Error(s(407));r=r()}else r=i();var x=!cn((Xt||p).memoizedState,r);if(x&&(p.memoizedState=r,be=!0),p=p.queue,ju(Lp.bind(null,c,p,n),[n]),p.getSnapshot!==i||x||ye!==null&&ye.memoizedState.tag&1){if(c.flags|=2048,ha(9,{destroy:void 0},kp.bind(null,c,p,r,i),null),Wt===null)throw Error(s(349));g||(di&127)!==0||Dp(c,i,r)}return r}function Dp(n,i,r){n.flags|=16384,n={getSnapshot:i,value:r},i=Et.updateQueue,i===null?(i=el(),Et.updateQueue=i,i.stores=[n]):(r=i.stores,r===null?i.stores=[n]:r.push(n))}function kp(n,i,r,c){i.value=r,i.getSnapshot=c,Op(i)&&Pp(n)}function Lp(n,i,r){return r(function(){Op(i)&&Pp(n)})}function Op(n){var i=n.getSnapshot;n=n.value;try{var r=i();return!cn(n,r)}catch{return!0}}function Pp(n){var i=fs(n,2);i!==null&&nn(i,n,2)}function Ou(n){var i=qe();if(typeof n=="function"){var r=n;if(n=r(),Ss){Di(!0);try{r()}finally{Di(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:n},i}function jp(n,i,r,c){return n.baseState=r,ku(n,Xt,typeof c=="function"?c:fi)}function V1(n,i,r,c,p){if(rl(n))throw Error(s(485));if(n=i.action,n!==null){var g={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};L.T!==null?r(!0):g.isTransition=!1,c(g),r=i.pending,r===null?(g.next=i.pending=g,Bp(i,g)):(g.next=r.next,i.pending=r.next=g)}}function Bp(n,i){var r=i.action,c=i.payload,p=n.state;if(i.isTransition){var g=L.T,x={};L.T=x;try{var _=r(p,c),N=L.S;N!==null&&N(x,_),Fp(n,i,_)}catch(U){Pu(n,i,U)}finally{g!==null&&x.types!==null&&(g.types=x.types),L.T=g}}else try{g=r(p,c),Fp(n,i,g)}catch(U){Pu(n,i,U)}}function Fp(n,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){zp(n,i,c)},function(c){return Pu(n,i,c)}):zp(n,i,r)}function zp(n,i,r){i.status="fulfilled",i.value=r,Ip(i),n.state=r,i=n.pending,i!==null&&(r=i.next,r===i?n.pending=null:(r=r.next,i.next=r,Bp(n,r)))}function Pu(n,i,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,Ip(i),i=i.next;while(i!==c)}n.action=null}function Ip(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Up(n,i){return i}function Hp(n,i){if(Ot){var r=Wt.formState;if(r!==null){t:{var c=Et;if(Ot){if(Jt){e:{for(var p=Jt,g=_n;p.nodeType!==8;){if(!g){p=null;break e}if(p=Mn(p.nextSibling),p===null){p=null;break e}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){Jt=Mn(p.nextSibling),c=p.data==="F!";break t}}ji(c)}c=!1}c&&(i=r[0])}}return r=qe(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Up,lastRenderedState:i},r.queue=c,r=om.bind(null,Et,c),c.dispatch=r,c=Ou(!1),g=Uu.bind(null,Et,!1,c.queue),c=qe(),p={state:i,dispatch:null,action:n,pending:null},c.queue=p,r=V1.bind(null,Et,p,g,r),p.dispatch=r,c.memoizedState=n,[i,r,!1]}function Gp(n){var i=de();return Vp(i,Xt,n)}function Vp(n,i,r){if(i=ku(n,i,Up)[0],n=il(fi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=xr(i)}catch(x){throw x===ra?Yo:x}else c=i;i=de();var p=i.queue,g=p.dispatch;return r!==i.memoizedState&&(Et.flags|=2048,ha(9,{destroy:void 0},q1.bind(null,p,r),null)),[c,g,n]}function q1(n,i){n.action=i}function qp(n){var i=de(),r=Xt;if(r!==null)return Vp(i,r,n);de(),i=i.memoizedState,r=de();var c=r.queue.dispatch;return r.memoizedState=n,[i,c,!1]}function ha(n,i,r,c){return n={tag:n,create:r,deps:c,inst:i,next:null},i=Et.updateQueue,i===null&&(i=el(),Et.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,i.lastEffect=n),n}function Xp(){return de().memoizedState}function sl(n,i,r,c){var p=qe();Et.flags|=n,p.memoizedState=ha(1|i,{destroy:void 0},r,c===void 0?null:c)}function al(n,i,r,c){var p=de();c=c===void 0?null:c;var g=p.memoizedState.inst;Xt!==null&&c!==null&&_u(c,Xt.memoizedState.deps)?p.memoizedState=ha(i,g,r,c):(Et.flags|=n,p.memoizedState=ha(1|i,g,r,c))}function Yp(n,i){sl(8390656,8,n,i)}function ju(n,i){al(2048,8,n,i)}function X1(n){Et.flags|=4;var i=Et.updateQueue;if(i===null)i=el(),Et.updateQueue=i,i.events=[n];else{var r=i.events;r===null?i.events=[n]:r.push(n)}}function $p(n){var i=de().memoizedState;return X1({ref:i,nextImpl:n}),function(){if((Ht&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Kp(n,i){return al(4,2,n,i)}function Wp(n,i){return al(4,4,n,i)}function Qp(n,i){if(typeof i=="function"){n=n();var r=i(n);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Zp(n,i,r){r=r!=null?r.concat([n]):null,al(4,4,Qp.bind(null,i,n),r)}function Bu(){}function Jp(n,i){var r=de();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&_u(i,c[1])?c[0]:(r.memoizedState=[n,i],n)}function tm(n,i){var r=de();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&_u(i,c[1]))return c[0];if(c=n(),Ss){Di(!0);try{n()}finally{Di(!1)}}return r.memoizedState=[c,i],c}function Fu(n,i,r){return r===void 0||(di&1073741824)!==0&&(Dt&261930)===0?n.memoizedState=i:(n.memoizedState=r,n=eg(),Et.lanes|=n,qi|=n,r)}function em(n,i,r,c){return cn(r,i)?r:la.current!==null?(n=Fu(n,r,c),cn(n,i)||(be=!0),n):(di&42)===0||(di&1073741824)!==0&&(Dt&261930)===0?(be=!0,n.memoizedState=r):(n=eg(),Et.lanes|=n,qi|=n,i)}function nm(n,i,r,c,p){var g=V.p;V.p=g!==0&&8>g?g:8;var x=L.T,_={};L.T=_,Uu(n,!1,i,r);try{var N=p(),U=L.S;if(U!==null&&U(_,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=U1(N,c);Ar(n,i,$,mn(n))}else Ar(n,i,c,mn(n))}catch(Q){Ar(n,i,{then:function(){},status:"rejected",reason:Q},mn())}finally{V.p=g,x!==null&&_.types!==null&&(x.types=_.types),L.T=x}}function Y1(){}function zu(n,i,r,c){if(n.tag!==5)throw Error(s(476));var p=im(n).queue;nm(n,p,i,Y,r===null?Y1:function(){return sm(n),r(c)})}function im(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:Y},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:r},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function sm(n){var i=im(n);i.next===null&&(i=n.alternate.memoizedState),Ar(n,i.next.queue,{},mn())}function Iu(){return Oe(Fr)}function am(){return de().memoizedState}function rm(){return de().memoizedState}function $1(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var r=mn();n=zi(r);var c=Ii(i,n,r);c!==null&&(nn(c,i,r),gr(c,i,r)),i={cache:mu()},n.payload=i;return}i=i.return}}function K1(n,i,r){var c=mn();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},rl(n)?lm(i,r):(r=su(n,i,r,c),r!==null&&(nn(r,n,c),cm(r,i,c)))}function om(n,i,r){var c=mn();Ar(n,i,r,c)}function Ar(n,i,r,c){var p={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(rl(n))lm(i,p);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var x=i.lastRenderedState,_=g(x,r);if(p.hasEagerState=!0,p.eagerState=_,cn(_,x))return Io(n,i,p,0),Wt===null&&zo(),!1}catch{}finally{}if(r=su(n,i,p,c),r!==null)return nn(r,n,c),cm(r,i,c),!0}return!1}function Uu(n,i,r,c){if(c={lane:2,revertLane:vh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rl(n)){if(i)throw Error(s(479))}else i=su(n,r,c,2),i!==null&&nn(i,n,2)}function rl(n){var i=n.alternate;return n===Et||i!==null&&i===Et}function lm(n,i){ca=Jo=!0;var r=n.pending;r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i}function cm(n,i,r){if((r&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,r|=c,i.lanes=r,pf(n,r)}}var Sr={readContext:Oe,use:nl,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce,useHostTransitionStatus:ce,useFormState:ce,useActionState:ce,useOptimistic:ce,useMemoCache:ce,useCacheRefresh:ce};Sr.useEffectEvent=ce;var um={readContext:Oe,use:nl,useCallback:function(n,i){return qe().memoizedState=[n,i===void 0?null:i],n},useContext:Oe,useEffect:Yp,useImperativeHandle:function(n,i,r){r=r!=null?r.concat([n]):null,sl(4194308,4,Qp.bind(null,i,n),r)},useLayoutEffect:function(n,i){return sl(4194308,4,n,i)},useInsertionEffect:function(n,i){sl(4,2,n,i)},useMemo:function(n,i){var r=qe();i=i===void 0?null:i;var c=n();if(Ss){Di(!0);try{n()}finally{Di(!1)}}return r.memoizedState=[c,i],c},useReducer:function(n,i,r){var c=qe();if(r!==void 0){var p=r(i);if(Ss){Di(!0);try{r(i)}finally{Di(!1)}}}else p=i;return c.memoizedState=c.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},c.queue=n,n=n.dispatch=K1.bind(null,Et,n),[c.memoizedState,n]},useRef:function(n){var i=qe();return n={current:n},i.memoizedState=n},useState:function(n){n=Ou(n);var i=n.queue,r=om.bind(null,Et,i);return i.dispatch=r,[n.memoizedState,r]},useDebugValue:Bu,useDeferredValue:function(n,i){var r=qe();return Fu(r,n,i)},useTransition:function(){var n=Ou(!1);return n=nm.bind(null,Et,n.queue,!0,!1),qe().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,r){var c=Et,p=qe();if(Ot){if(r===void 0)throw Error(s(407));r=r()}else{if(r=i(),Wt===null)throw Error(s(349));(Dt&127)!==0||Dp(c,i,r)}p.memoizedState=r;var g={value:r,getSnapshot:i};return p.queue=g,Yp(Lp.bind(null,c,g,n),[n]),c.flags|=2048,ha(9,{destroy:void 0},kp.bind(null,c,g,r,i),null),r},useId:function(){var n=qe(),i=Wt.identifierPrefix;if(Ot){var r=Yn,c=Xn;r=(c&~(1<<32-ln(c)-1)).toString(32)+r,i="_"+i+"R_"+r,r=tl++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=H1++,i="_"+i+"r_"+r.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:Iu,useFormState:Hp,useActionState:Hp,useOptimistic:function(n){var i=qe();i.memoizedState=i.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=Uu.bind(null,Et,!0,r),r.dispatch=i,[n,i]},useMemoCache:Du,useCacheRefresh:function(){return qe().memoizedState=$1.bind(null,Et)},useEffectEvent:function(n){var i=qe(),r={impl:n};return i.memoizedState=r,function(){if((Ht&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}},Hu={readContext:Oe,use:nl,useCallback:Jp,useContext:Oe,useEffect:ju,useImperativeHandle:Zp,useInsertionEffect:Kp,useLayoutEffect:Wp,useMemo:tm,useReducer:il,useRef:Xp,useState:function(){return il(fi)},useDebugValue:Bu,useDeferredValue:function(n,i){var r=de();return em(r,Xt.memoizedState,n,i)},useTransition:function(){var n=il(fi)[0],i=de().memoizedState;return[typeof n=="boolean"?n:xr(n),i]},useSyncExternalStore:Np,useId:am,useHostTransitionStatus:Iu,useFormState:Gp,useActionState:Gp,useOptimistic:function(n,i){var r=de();return jp(r,Xt,n,i)},useMemoCache:Du,useCacheRefresh:rm};Hu.useEffectEvent=$p;var hm={readContext:Oe,use:nl,useCallback:Jp,useContext:Oe,useEffect:ju,useImperativeHandle:Zp,useInsertionEffect:Kp,useLayoutEffect:Wp,useMemo:tm,useReducer:Lu,useRef:Xp,useState:function(){return Lu(fi)},useDebugValue:Bu,useDeferredValue:function(n,i){var r=de();return Xt===null?Fu(r,n,i):em(r,Xt.memoizedState,n,i)},useTransition:function(){var n=Lu(fi)[0],i=de().memoizedState;return[typeof n=="boolean"?n:xr(n),i]},useSyncExternalStore:Np,useId:am,useHostTransitionStatus:Iu,useFormState:qp,useActionState:qp,useOptimistic:function(n,i){var r=de();return Xt!==null?jp(r,Xt,n,i):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:Du,useCacheRefresh:rm};hm.useEffectEvent=$p;function Gu(n,i,r,c){i=n.memoizedState,r=r(c,i),r=r==null?i:y({},i,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Vu={enqueueSetState:function(n,i,r){n=n._reactInternals;var c=mn(),p=zi(c);p.payload=i,r!=null&&(p.callback=r),i=Ii(n,p,c),i!==null&&(nn(i,n,c),gr(i,n,c))},enqueueReplaceState:function(n,i,r){n=n._reactInternals;var c=mn(),p=zi(c);p.tag=1,p.payload=i,r!=null&&(p.callback=r),i=Ii(n,p,c),i!==null&&(nn(i,n,c),gr(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var r=mn(),c=zi(r);c.tag=2,i!=null&&(c.callback=i),i=Ii(n,c,r),i!==null&&(nn(i,n,r),gr(i,n,r))}};function dm(n,i,r,c,p,g,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,x):i.prototype&&i.prototype.isPureReactComponent?!lr(r,c)||!lr(p,g):!0}function fm(n,i,r,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==n&&Vu.enqueueReplaceState(i,i.state,null)}function ws(n,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(n=n.defaultProps){r===i&&(r=y({},r));for(var p in n)r[p]===void 0&&(r[p]=n[p])}return r}function pm(n){Fo(n)}function mm(n){console.error(n)}function gm(n){Fo(n)}function ol(n,i){try{var r=n.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function ym(n,i,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function qu(n,i,r){return r=zi(r),r.tag=3,r.payload={element:null},r.callback=function(){ol(n,i)},r}function bm(n){return n=zi(n),n.tag=3,n}function vm(n,i,r,c){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var g=c.value;n.payload=function(){return p(g)},n.callback=function(){ym(i,r,c)}}var x=r.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){ym(i,r,c),typeof p!="function"&&(Xi===null?Xi=new Set([this]):Xi.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function W1(n,i,r,c,p){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&ia(i,r,p,!0),r=hn.current,r!==null){switch(r.tag){case 31:case 13:return Tn===null?vl():r.alternate===null&&ue===0&&(ue=3),r.flags&=-257,r.flags|=65536,r.lanes=p,c===$o?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),gh(n,c,p)),!1;case 22:return r.flags|=65536,c===$o?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),gh(n,c,p)),!1}throw Error(s(435,r.tag))}return gh(n,c,p),vl(),!1}if(Ot)return i=hn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=p,c!==uu&&(n=Error(s(422),{cause:c}),hr(wn(n,r)))):(c!==uu&&(i=Error(s(423),{cause:c}),hr(wn(i,r))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,c=wn(c,r),p=qu(n.stateNode,c,p),Au(n,p),ue!==4&&(ue=2)),!1;var g=Error(s(520),{cause:c});if(g=wn(g,r),Nr===null?Nr=[g]:Nr.push(g),ue!==4&&(ue=2),i===null)return!0;c=wn(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,n=p&-p,r.lanes|=n,n=qu(r.stateNode,c,n),Au(r,n),!1;case 1:if(i=r.type,g=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Xi===null||!Xi.has(g))))return r.flags|=65536,p&=-p,r.lanes|=p,p=bm(p),vm(p,n,r,c),Au(r,p),!1}r=r.return}while(r!==null);return!1}var Xu=Error(s(461)),be=!1;function Pe(n,i,r,c){i.child=n===null?wp(i,null,r,c):As(i,n.child,r,c)}function xm(n,i,r,c,p){r=r.render;var g=i.ref;if("ref"in c){var x={};for(var _ in c)_!=="ref"&&(x[_]=c[_])}else x=c;return ys(i),c=Tu(n,i,r,x,g,p),_=Mu(),n!==null&&!be?(Ru(n,i,p),pi(n,i,p)):(Ot&&_&&lu(i),i.flags|=1,Pe(n,i,c,p),i.child)}function Am(n,i,r,c,p){if(n===null){var g=r.type;return typeof g=="function"&&!au(g)&&g.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=g,Sm(n,i,g,c,p)):(n=Ho(r.type,null,c,i,i.mode,p),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!th(n,p)){var x=g.memoizedProps;if(r=r.compare,r=r!==null?r:lr,r(x,c)&&n.ref===i.ref)return pi(n,i,p)}return i.flags|=1,n=li(g,c),n.ref=i.ref,n.return=i,i.child=n}function Sm(n,i,r,c,p){if(n!==null){var g=n.memoizedProps;if(lr(g,c)&&n.ref===i.ref)if(be=!1,i.pendingProps=c=g,th(n,p))(n.flags&131072)!==0&&(be=!0);else return i.lanes=n.lanes,pi(n,i,p)}return Yu(n,i,r,c,p)}function wm(n,i,r,c){var p=c.children,g=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|r:r,n!==null){for(c=i.child=n.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~g}else c=0,i.child=null;return Em(n,i,g,r,c)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Xo(i,g!==null?g.cachePool:null),g!==null?_p(i,g):wu(),Tp(i);else return c=i.lanes=536870912,Em(n,i,g!==null?g.baseLanes|r:r,r,c)}else g!==null?(Xo(i,g.cachePool),_p(i,g),Hi(),i.memoizedState=null):(n!==null&&Xo(i,null),wu(),Hi());return Pe(n,i,p,r),i.child}function wr(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Em(n,i,r,c,p){var g=yu();return g=g===null?null:{parent:ge._currentValue,pool:g},i.memoizedState={baseLanes:r,cachePool:g},n!==null&&Xo(i,null),wu(),Tp(i),n!==null&&ia(n,i,c,!0),i.childLanes=p,null}function ll(n,i){return i=ul({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Cm(n,i,r){return As(i,n.child,null,r),n=ll(i,i.pendingProps),n.flags|=2,dn(i),i.memoizedState=null,n}function Q1(n,i,r){var c=i.pendingProps,p=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(Ot){if(c.mode==="hidden")return n=ll(i,c),i.lanes=536870912,wr(null,n);if(Cu(i),(n=Jt)?(n=Bg(n,_n),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Oi!==null?{id:Xn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},r=lp(n),r.return=i,i.child=r,Le=i,Jt=null)):n=null,n===null)throw ji(i);return i.lanes=536870912,null}return ll(i,c)}var g=n.memoizedState;if(g!==null){var x=g.dehydrated;if(Cu(i),p)if(i.flags&256)i.flags&=-257,i=Cm(n,i,r);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(s(558));else if(be||ia(n,i,r,!1),p=(r&n.childLanes)!==0,be||p){if(c=Wt,c!==null&&(x=mf(c,r),x!==0&&x!==g.retryLane))throw g.retryLane=x,fs(n,x),nn(c,n,x),Xu;vl(),i=Cm(n,i,r)}else n=g.treeContext,Jt=Mn(x.nextSibling),Le=i,Ot=!0,Pi=null,_n=!1,n!==null&&hp(i,n),i=ll(i,c),i.flags|=4096;return i}return n=li(n.child,{mode:c.mode,children:c.children}),n.ref=i.ref,i.child=n,n.return=i,n}function cl(n,i){var r=i.ref;if(r===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(s(284));(n===null||n.ref!==r)&&(i.flags|=4194816)}}function Yu(n,i,r,c,p){return ys(i),r=Tu(n,i,r,c,void 0,p),c=Mu(),n!==null&&!be?(Ru(n,i,p),pi(n,i,p)):(Ot&&c&&lu(i),i.flags|=1,Pe(n,i,r,p),i.child)}function _m(n,i,r,c,p,g){return ys(i),i.updateQueue=null,r=Rp(i,c,r,p),Mp(n),c=Mu(),n!==null&&!be?(Ru(n,i,g),pi(n,i,g)):(Ot&&c&&lu(i),i.flags|=1,Pe(n,i,r,g),i.child)}function Tm(n,i,r,c,p){if(ys(i),i.stateNode===null){var g=Js,x=r.contextType;typeof x=="object"&&x!==null&&(g=Oe(x)),g=new r(c,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Vu,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=c,g.state=i.memoizedState,g.refs={},vu(i),x=r.contextType,g.context=typeof x=="object"&&x!==null?Oe(x):Js,g.state=i.memoizedState,x=r.getDerivedStateFromProps,typeof x=="function"&&(Gu(i,r,x,c),g.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&Vu.enqueueReplaceState(g,g.state,null),br(i,c,g,p),yr(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){g=i.stateNode;var _=i.memoizedProps,N=ws(r,_);g.props=N;var U=g.context,$=r.contextType;x=Js,typeof $=="object"&&$!==null&&(x=Oe($));var Q=r.getDerivedStateFromProps;$=typeof Q=="function"||typeof g.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,$||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_||U!==x)&&fm(i,g,c,x),Fi=!1;var G=i.memoizedState;g.state=G,br(i,c,g,p),yr(),U=i.memoizedState,_||G!==U||Fi?(typeof Q=="function"&&(Gu(i,r,Q,c),U=i.memoizedState),(N=Fi||dm(i,r,N,c,G,U,x))?($||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=U),g.props=c,g.state=U,g.context=x,c=N):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{g=i.stateNode,xu(n,i),x=i.memoizedProps,$=ws(r,x),g.props=$,Q=i.pendingProps,G=g.context,U=r.contextType,N=Js,typeof U=="object"&&U!==null&&(N=Oe(U)),_=r.getDerivedStateFromProps,(U=typeof _=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==Q||G!==N)&&fm(i,g,c,N),Fi=!1,G=i.memoizedState,g.state=G,br(i,c,g,p),yr();var X=i.memoizedState;x!==Q||G!==X||Fi||n!==null&&n.dependencies!==null&&Vo(n.dependencies)?(typeof _=="function"&&(Gu(i,r,_,c),X=i.memoizedState),($=Fi||dm(i,r,$,c,G,X,N)||n!==null&&n.dependencies!==null&&Vo(n.dependencies))?(U||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,X,N),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,X,N)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=X),g.props=c,g.state=X,g.context=N,c=$):(typeof g.componentDidUpdate!="function"||x===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return g=c,cl(n,i),c=(i.flags&128)!==0,g||c?(g=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&c?(i.child=As(i,n.child,null,p),i.child=As(i,null,r,p)):Pe(n,i,r,p),i.memoizedState=g.state,n=i.child):n=pi(n,i,p),n}function Mm(n,i,r,c){return ms(),i.flags|=256,Pe(n,i,r,c),i.child}var $u={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ku(n){return{baseLanes:n,cachePool:yp()}}function Wu(n,i,r){return n=n!==null?n.childLanes&~r:0,i&&(n|=pn),n}function Rm(n,i,r){var c=i.pendingProps,p=!1,g=(i.flags&128)!==0,x;if((x=g)||(x=n!==null&&n.memoizedState===null?!1:(he.current&2)!==0),x&&(p=!0,i.flags&=-129),x=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ot){if(p?Ui(i):Hi(),(n=Jt)?(n=Bg(n,_n),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:Oi!==null?{id:Xn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},r=lp(n),r.return=i,i.child=r,Le=i,Jt=null)):n=null,n===null)throw ji(i);return kh(n)?i.lanes=32:i.lanes=536870912,null}var _=c.children;return c=c.fallback,p?(Hi(),p=i.mode,_=ul({mode:"hidden",children:_},p),c=ps(c,p,r,null),_.return=i,c.return=i,_.sibling=c,i.child=_,c=i.child,c.memoizedState=Ku(r),c.childLanes=Wu(n,x,r),i.memoizedState=$u,wr(null,c)):(Ui(i),Qu(i,_))}var N=n.memoizedState;if(N!==null&&(_=N.dehydrated,_!==null)){if(g)i.flags&256?(Ui(i),i.flags&=-257,i=Zu(n,i,r)):i.memoizedState!==null?(Hi(),i.child=n.child,i.flags|=128,i=null):(Hi(),_=c.fallback,p=i.mode,c=ul({mode:"visible",children:c.children},p),_=ps(_,p,r,null),_.flags|=2,c.return=i,_.return=i,c.sibling=_,i.child=c,As(i,n.child,null,r),c=i.child,c.memoizedState=Ku(r),c.childLanes=Wu(n,x,r),i.memoizedState=$u,i=wr(null,c));else if(Ui(i),kh(_)){if(x=_.nextSibling&&_.nextSibling.dataset,x)var U=x.dgst;x=U,c=Error(s(419)),c.stack="",c.digest=x,hr({value:c,source:null,stack:null}),i=Zu(n,i,r)}else if(be||ia(n,i,r,!1),x=(r&n.childLanes)!==0,be||x){if(x=Wt,x!==null&&(c=mf(x,r),c!==0&&c!==N.retryLane))throw N.retryLane=c,fs(n,c),nn(x,n,c),Xu;Dh(_)||vl(),i=Zu(n,i,r)}else Dh(_)?(i.flags|=192,i.child=n.child,i=null):(n=N.treeContext,Jt=Mn(_.nextSibling),Le=i,Ot=!0,Pi=null,_n=!1,n!==null&&hp(i,n),i=Qu(i,c.children),i.flags|=4096);return i}return p?(Hi(),_=c.fallback,p=i.mode,N=n.child,U=N.sibling,c=li(N,{mode:"hidden",children:c.children}),c.subtreeFlags=N.subtreeFlags&65011712,U!==null?_=li(U,_):(_=ps(_,p,r,null),_.flags|=2),_.return=i,c.return=i,c.sibling=_,i.child=c,wr(null,c),c=i.child,_=n.child.memoizedState,_===null?_=Ku(r):(p=_.cachePool,p!==null?(N=ge._currentValue,p=p.parent!==N?{parent:N,pool:N}:p):p=yp(),_={baseLanes:_.baseLanes|r,cachePool:p}),c.memoizedState=_,c.childLanes=Wu(n,x,r),i.memoizedState=$u,wr(n.child,c)):(Ui(i),r=n.child,n=r.sibling,r=li(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,n!==null&&(x=i.deletions,x===null?(i.deletions=[n],i.flags|=16):x.push(n)),i.child=r,i.memoizedState=null,r)}function Qu(n,i){return i=ul({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function ul(n,i){return n=un(22,n,null,i),n.lanes=0,n}function Zu(n,i,r){return As(i,n.child,null,r),n=Qu(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Nm(n,i,r){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),fu(n.return,i,r)}function Ju(n,i,r,c,p,g){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:p,treeForkCount:g}:(x.isBackwards=i,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=r,x.tailMode=p,x.treeForkCount=g)}function Dm(n,i,r){var c=i.pendingProps,p=c.revealOrder,g=c.tail;c=c.children;var x=he.current,_=(x&2)!==0;if(_?(x=x&1|2,i.flags|=128):x&=1,K(he,x),Pe(n,i,c,r),c=Ot?ur:0,!_&&n!==null&&(n.flags&128)!==0)t:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Nm(n,r,i);else if(n.tag===19)Nm(n,r,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break t;for(;n.sibling===null;){if(n.return===null||n.return===i)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(r=i.child,p=null;r!==null;)n=r.alternate,n!==null&&Zo(n)===null&&(p=r),r=r.sibling;r=p,r===null?(p=i.child,i.child=null):(p=r.sibling,r.sibling=null),Ju(i,!1,p,r,g,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=i.child,i.child=null;p!==null;){if(n=p.alternate,n!==null&&Zo(n)===null){i.child=p;break}n=p.sibling,p.sibling=r,r=p,p=n}Ju(i,!0,r,null,g,c);break;case"together":Ju(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function pi(n,i,r){if(n!==null&&(i.dependencies=n.dependencies),qi|=i.lanes,(r&i.childLanes)===0)if(n!==null){if(ia(n,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(s(153));if(i.child!==null){for(n=i.child,r=li(n,n.pendingProps),i.child=r,r.return=i;n.sibling!==null;)n=n.sibling,r=r.sibling=li(n,n.pendingProps),r.return=i;r.sibling=null}return i.child}function th(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Vo(n)))}function Z1(n,i,r){switch(i.tag){case 3:Gt(i,i.stateNode.containerInfo),Bi(i,ge,n.memoizedState.cache),ms();break;case 27:case 5:jt(i);break;case 4:Gt(i,i.stateNode.containerInfo);break;case 10:Bi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Cu(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ui(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Rm(n,i,r):(Ui(i),n=pi(n,i,r),n!==null?n.sibling:null);Ui(i);break;case 19:var p=(n.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(ia(n,i,r,!1),c=(r&i.childLanes)!==0),p){if(c)return Dm(n,i,r);i.flags|=128}if(p=i.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),K(he,he.current),c)break;return null;case 22:return i.lanes=0,wm(n,i,r,i.pendingProps);case 24:Bi(i,ge,n.memoizedState.cache)}return pi(n,i,r)}function km(n,i,r){if(n!==null)if(n.memoizedProps!==i.pendingProps)be=!0;else{if(!th(n,r)&&(i.flags&128)===0)return be=!1,Z1(n,i,r);be=(n.flags&131072)!==0}else be=!1,Ot&&(i.flags&1048576)!==0&&up(i,ur,i.index);switch(i.lanes=0,i.tag){case 16:t:{var c=i.pendingProps;if(n=vs(i.elementType),i.type=n,typeof n=="function")au(n)?(c=ws(n,c),i.tag=1,i=Tm(null,i,n,c,r)):(i.tag=0,i=Yu(null,i,n,c,r));else{if(n!=null){var p=n.$$typeof;if(p===D){i.tag=11,i=xm(null,i,n,c,r);break t}else if(p===B){i.tag=14,i=Am(null,i,n,c,r);break t}}throw i=at(n)||n,Error(s(306,i,""))}}return i;case 0:return Yu(n,i,i.type,i.pendingProps,r);case 1:return c=i.type,p=ws(c,i.pendingProps),Tm(n,i,c,p,r);case 3:t:{if(Gt(i,i.stateNode.containerInfo),n===null)throw Error(s(387));c=i.pendingProps;var g=i.memoizedState;p=g.element,xu(n,i),br(i,c,null,r);var x=i.memoizedState;if(c=x.cache,Bi(i,ge,c),c!==g.cache&&pu(i,[ge],r,!0),yr(),c=x.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:x.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Mm(n,i,c,r);break t}else if(c!==p){p=wn(Error(s(424)),i),hr(p),i=Mm(n,i,c,r);break t}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Jt=Mn(n.firstChild),Le=i,Ot=!0,Pi=null,_n=!0,r=wp(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ms(),c===p){i=pi(n,i,r);break t}Pe(n,i,c,r)}i=i.child}return i;case 26:return cl(n,i),n===null?(r=Gg(i.type,null,i.pendingProps,null))?i.memoizedState=r:Ot||(r=i.type,n=i.pendingProps,c=_l(ft.current).createElement(r),c[ke]=i,c[We]=n,je(c,r,n),Te(c),i.stateNode=c):i.memoizedState=Gg(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return jt(i),n===null&&Ot&&(c=i.stateNode=Ig(i.type,i.pendingProps,ft.current),Le=i,_n=!0,p=Jt,Wi(i.type)?(Lh=p,Jt=Mn(c.firstChild)):Jt=p),Pe(n,i,i.pendingProps.children,r),cl(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ot&&((p=c=Jt)&&(c=Mx(c,i.type,i.pendingProps,_n),c!==null?(i.stateNode=c,Le=i,Jt=Mn(c.firstChild),_n=!1,p=!0):p=!1),p||ji(i)),jt(i),p=i.type,g=i.pendingProps,x=n!==null?n.memoizedProps:null,c=g.children,Mh(p,g)?c=null:x!==null&&Mh(p,x)&&(i.flags|=32),i.memoizedState!==null&&(p=Tu(n,i,G1,null,null,r),Fr._currentValue=p),cl(n,i),Pe(n,i,c,r),i.child;case 6:return n===null&&Ot&&((n=r=Jt)&&(r=Rx(r,i.pendingProps,_n),r!==null?(i.stateNode=r,Le=i,Jt=null,n=!0):n=!1),n||ji(i)),null;case 13:return Rm(n,i,r);case 4:return Gt(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=As(i,null,c,r):Pe(n,i,c,r),i.child;case 11:return xm(n,i,i.type,i.pendingProps,r);case 7:return Pe(n,i,i.pendingProps,r),i.child;case 8:return Pe(n,i,i.pendingProps.children,r),i.child;case 12:return Pe(n,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,Bi(i,i.type,c.value),Pe(n,i,c.children,r),i.child;case 9:return p=i.type._context,c=i.pendingProps.children,ys(i),p=Oe(p),c=c(p),i.flags|=1,Pe(n,i,c,r),i.child;case 14:return Am(n,i,i.type,i.pendingProps,r);case 15:return Sm(n,i,i.type,i.pendingProps,r);case 19:return Dm(n,i,r);case 31:return Q1(n,i,r);case 22:return wm(n,i,r,i.pendingProps);case 24:return ys(i),c=Oe(ge),n===null?(p=yu(),p===null&&(p=Wt,g=mu(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=r),p=g),i.memoizedState={parent:c,cache:p},vu(i),Bi(i,ge,p)):((n.lanes&r)!==0&&(xu(n,i),br(i,null,null,r),yr()),p=n.memoizedState,g=i.memoizedState,p.parent!==c?(p={parent:c,cache:c},i.memoizedState=p,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=p),Bi(i,ge,c)):(c=g.cache,Bi(i,ge,c),c!==p.cache&&pu(i,[ge],r,!0))),Pe(n,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function mi(n){n.flags|=4}function eh(n,i,r,c,p){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(ag())n.flags|=8192;else throw xs=$o,bu}else n.flags&=-16777217}function Lm(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!$g(i))if(ag())n.flags|=8192;else throw xs=$o,bu}function hl(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?df():536870912,n.lanes|=i,ma|=i)}function Er(n,i){if(!Ot)switch(n.tailMode){case"hidden":i=n.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function te(n){var i=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(i)for(var p=n.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)r|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=c,n.childLanes=r,i}function J1(n,i,r){var c=i.pendingProps;switch(cu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return te(i),null;case 1:return te(i),null;case 3:return r=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),hi(ge),wt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(na(i)?mi(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,hu())),te(i),null;case 26:var p=i.type,g=i.memoizedState;return n===null?(mi(i),g!==null?(te(i),Lm(i,g)):(te(i),eh(i,p,null,c,r))):g?g!==n.memoizedState?(mi(i),te(i),Lm(i,g)):(te(i),i.flags&=-16777217):(n=n.memoizedProps,n!==c&&mi(i),te(i),eh(i,p,n,c,r)),null;case 27:if(Ce(i),r=ft.current,p=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&mi(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return te(i),null}n=tt.current,na(i)?dp(i):(n=Ig(p,c,r),i.stateNode=n,mi(i))}return te(i),null;case 5:if(Ce(i),p=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&mi(i);else{if(!c){if(i.stateNode===null)throw Error(s(166));return te(i),null}if(g=tt.current,na(i))dp(i);else{var x=_l(ft.current);switch(g){case 1:g=x.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=x.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=x.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=x.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?x.createElement(p,{is:c.is}):x.createElement(p)}}g[ke]=i,g[We]=c;t:for(x=i.child;x!==null;){if(x.tag===5||x.tag===6)g.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===i)break t;for(;x.sibling===null;){if(x.return===null||x.return===i)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}i.stateNode=g;t:switch(je(g,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&mi(i)}}return te(i),eh(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,r),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&mi(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(s(166));if(n=ft.current,na(i)){if(n=i.stateNode,r=i.memoizedProps,c=null,p=Le,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}n[ke]=i,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Rg(n.nodeValue,r)),n||ji(i,!0)}else n=_l(n).createTextNode(c),n[ke]=i,i.stateNode=n}return te(i),null;case 31:if(r=i.memoizedState,n===null||n.memoizedState!==null){if(c=na(i),r!==null){if(n===null){if(!c)throw Error(s(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[ke]=i}else ms(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;te(i),n=!1}else r=hu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return i.flags&256?(dn(i),i):(dn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return te(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=na(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(s(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));p[ke]=i}else ms(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;te(i),p=!1}else p=hu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return i.flags&256?(dn(i),i):(dn(i),null)}return dn(i),(i.flags&128)!==0?(i.lanes=r,i):(r=c!==null,n=n!==null&&n.memoizedState!==null,r&&(c=i.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==p&&(c.flags|=2048)),r!==n&&r&&(i.child.flags|=8192),hl(i,i.updateQueue),te(i),null);case 4:return wt(),n===null&&wh(i.stateNode.containerInfo),te(i),null;case 10:return hi(i.type),te(i),null;case 19:if(q(he),c=i.memoizedState,c===null)return te(i),null;if(p=(i.flags&128)!==0,g=c.rendering,g===null)if(p)Er(c,!1);else{if(ue!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=Zo(n),g!==null){for(i.flags|=128,Er(c,!1),n=g.updateQueue,i.updateQueue=n,hl(i,n),i.subtreeFlags=0,n=r,r=i.child;r!==null;)op(r,n),r=r.sibling;return K(he,he.current&1|2),Ot&&ci(i,c.treeForkCount),i.child}n=n.sibling}c.tail!==null&&Ve()>gl&&(i.flags|=128,p=!0,Er(c,!1),i.lanes=4194304)}else{if(!p)if(n=Zo(g),n!==null){if(i.flags|=128,p=!0,n=n.updateQueue,i.updateQueue=n,hl(i,n),Er(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Ot)return te(i),null}else 2*Ve()-c.renderingStartTime>gl&&r!==536870912&&(i.flags|=128,p=!0,Er(c,!1),i.lanes=4194304);c.isBackwards?(g.sibling=i.child,i.child=g):(n=c.last,n!==null?n.sibling=g:i.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Ve(),n.sibling=null,r=he.current,K(he,p?r&1|2:r&1),Ot&&ci(i,c.treeForkCount),n):(te(i),null);case 22:case 23:return dn(i),Eu(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(te(i),i.subtreeFlags&6&&(i.flags|=8192)):te(i),r=i.updateQueue,r!==null&&hl(i,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),n!==null&&q(bs),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),hi(ge),te(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function tx(n,i){switch(cu(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return hi(ge),wt(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ce(i),null;case 31:if(i.memoizedState!==null){if(dn(i),i.alternate===null)throw Error(s(340));ms()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(dn(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ms()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return q(he),null;case 4:return wt(),null;case 10:return hi(i.type),null;case 22:case 23:return dn(i),Eu(),n!==null&&q(bs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return hi(ge),null;case 25:return null;default:return null}}function Om(n,i){switch(cu(i),i.tag){case 3:hi(ge),wt();break;case 26:case 27:case 5:Ce(i);break;case 4:wt();break;case 31:i.memoizedState!==null&&dn(i);break;case 13:dn(i);break;case 19:q(he);break;case 10:hi(i.type);break;case 22:case 23:dn(i),Eu(),n!==null&&q(bs);break;case 24:hi(ge)}}function Cr(n,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var p=c.next;r=p;do{if((r.tag&n)===n){c=void 0;var g=r.create,x=r.inst;c=g(),x.destroy=c}r=r.next}while(r!==p)}}catch(_){qt(i,i.return,_)}}function Gi(n,i,r){try{var c=i.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var g=p.next;c=g;do{if((c.tag&n)===n){var x=c.inst,_=x.destroy;if(_!==void 0){x.destroy=void 0,p=i;var N=r,U=_;try{U()}catch($){qt(p,N,$)}}}c=c.next}while(c!==g)}}catch($){qt(i,i.return,$)}}function Pm(n){var i=n.updateQueue;if(i!==null){var r=n.stateNode;try{Cp(i,r)}catch(c){qt(n,n.return,c)}}}function jm(n,i,r){r.props=ws(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){qt(n,i,c)}}function _r(n,i){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(p){qt(n,i,p)}}function $n(n,i){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(p){qt(n,i,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){qt(n,i,p)}else r.current=null}function Bm(n){var i=n.type,r=n.memoizedProps,c=n.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break t;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(p){qt(n,n.return,p)}}function nh(n,i,r){try{var c=n.stateNode;Sx(c,n.type,r,i),c[We]=i}catch(p){qt(n,n.return,p)}}function Fm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Wi(n.type)||n.tag===4}function ih(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Fm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Wi(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sh(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(n),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=ri));else if(c!==4&&(c===27&&Wi(n.type)&&(r=n.stateNode,i=null),n=n.child,n!==null))for(sh(n,i,r),n=n.sibling;n!==null;)sh(n,i,r),n=n.sibling}function dl(n,i,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?r.insertBefore(n,i):r.appendChild(n);else if(c!==4&&(c===27&&Wi(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(dl(n,i,r),n=n.sibling;n!==null;)dl(n,i,r),n=n.sibling}function zm(n){var i=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);je(i,c,r),i[ke]=n,i[We]=r}catch(g){qt(n,n.return,g)}}var gi=!1,ve=!1,ah=!1,Im=typeof WeakSet=="function"?WeakSet:Set,Me=null;function ex(n,i){if(n=n.containerInfo,_h=Ll,n=Zf(n),Zc(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else t:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break t}var x=0,_=-1,N=-1,U=0,$=0,Q=n,G=null;e:for(;;){for(var X;Q!==r||p!==0&&Q.nodeType!==3||(_=x+p),Q!==g||c!==0&&Q.nodeType!==3||(N=x+c),Q.nodeType===3&&(x+=Q.nodeValue.length),(X=Q.firstChild)!==null;)G=Q,Q=X;for(;;){if(Q===n)break e;if(G===r&&++U===p&&(_=x),G===g&&++$===c&&(N=x),(X=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=X}r=_===-1||N===-1?null:{start:_,end:N}}else r=null}r=r||{start:0,end:0}}else r=null;for(Th={focusedElem:n,selectionRange:r},Ll=!1,Me=i;Me!==null;)if(i=Me,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Me=n;else for(;Me!==null;){switch(i=Me,g=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)p=n[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,r=i,p=g.memoizedProps,g=g.memoizedState,c=r.stateNode;try{var st=ws(r.type,p);n=c.getSnapshotBeforeUpdate(st,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(yt){qt(r,r.return,yt)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,r=n.nodeType,r===9)Nh(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Nh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=i.sibling,n!==null){n.return=i.return,Me=n;break}Me=i.return}}function Um(n,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:bi(n,r),c&4&&Cr(5,r);break;case 1:if(bi(n,r),c&4)if(n=r.stateNode,i===null)try{n.componentDidMount()}catch(x){qt(r,r.return,x)}else{var p=ws(r.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(p,i,n.__reactInternalSnapshotBeforeUpdate)}catch(x){qt(r,r.return,x)}}c&64&&Pm(r),c&512&&_r(r,r.return);break;case 3:if(bi(n,r),c&64&&(n=r.updateQueue,n!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Cp(n,i)}catch(x){qt(r,r.return,x)}}break;case 27:i===null&&c&4&&zm(r);case 26:case 5:bi(n,r),i===null&&c&4&&Bm(r),c&512&&_r(r,r.return);break;case 12:bi(n,r);break;case 31:bi(n,r),c&4&&Vm(n,r);break;case 13:bi(n,r),c&4&&qm(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=ux.bind(null,r),Nx(n,r))));break;case 22:if(c=r.memoizedState!==null||gi,!c){i=i!==null&&i.memoizedState!==null||ve,p=gi;var g=ve;gi=c,(ve=i)&&!g?vi(n,r,(r.subtreeFlags&8772)!==0):bi(n,r),gi=p,ve=g}break;case 30:break;default:bi(n,r)}}function Hm(n){var i=n.alternate;i!==null&&(n.alternate=null,Hm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Pc(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ee=null,Ze=!1;function yi(n,i,r){for(r=r.child;r!==null;)Gm(n,i,r),r=r.sibling}function Gm(n,i,r){if(on&&typeof on.onCommitFiberUnmount=="function")try{on.onCommitFiberUnmount(Wa,r)}catch{}switch(r.tag){case 26:ve||$n(r,i),yi(n,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ve||$n(r,i);var c=ee,p=Ze;Wi(r.type)&&(ee=r.stateNode,Ze=!1),yi(n,i,r),Pr(r.stateNode),ee=c,Ze=p;break;case 5:ve||$n(r,i);case 6:if(c=ee,p=Ze,ee=null,yi(n,i,r),ee=c,Ze=p,ee!==null)if(Ze)try{(ee.nodeType===9?ee.body:ee.nodeName==="HTML"?ee.ownerDocument.body:ee).removeChild(r.stateNode)}catch(g){qt(r,i,g)}else try{ee.removeChild(r.stateNode)}catch(g){qt(r,i,g)}break;case 18:ee!==null&&(Ze?(n=ee,Pg(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),wa(n)):Pg(ee,r.stateNode));break;case 4:c=ee,p=Ze,ee=r.stateNode.containerInfo,Ze=!0,yi(n,i,r),ee=c,Ze=p;break;case 0:case 11:case 14:case 15:Gi(2,r,i),ve||Gi(4,r,i),yi(n,i,r);break;case 1:ve||($n(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&jm(r,i,c)),yi(n,i,r);break;case 21:yi(n,i,r);break;case 22:ve=(c=ve)||r.memoizedState!==null,yi(n,i,r),ve=c;break;default:yi(n,i,r)}}function Vm(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{wa(n)}catch(r){qt(i,i.return,r)}}}function qm(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{wa(n)}catch(r){qt(i,i.return,r)}}function nx(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Im),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Im),i;default:throw Error(s(435,n.tag))}}function fl(n,i){var r=nx(n);i.forEach(function(c){if(!r.has(c)){r.add(c);var p=hx.bind(null,n,c);c.then(p,p)}})}function Je(n,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var p=r[c],g=n,x=i,_=x;t:for(;_!==null;){switch(_.tag){case 27:if(Wi(_.type)){ee=_.stateNode,Ze=!1;break t}break;case 5:ee=_.stateNode,Ze=!1;break t;case 3:case 4:ee=_.stateNode.containerInfo,Ze=!0;break t}_=_.return}if(ee===null)throw Error(s(160));Gm(g,x,p),ee=null,Ze=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Xm(i,n),i=i.sibling}var jn=null;function Xm(n,i){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Je(i,n),tn(n),c&4&&(Gi(3,n,n.return),Cr(3,n),Gi(5,n,n.return));break;case 1:Je(i,n),tn(n),c&512&&(ve||r===null||$n(r,r.return)),c&64&&gi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var p=jn;if(Je(i,n),tn(n),c&512&&(ve||r===null||$n(r,r.return)),c&4){var g=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){t:{c=n.type,r=n.memoizedProps,p=p.ownerDocument||p;e:switch(c){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Ja]||g[ke]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(c),p.head.insertBefore(g,p.querySelector("head > title"))),je(g,c,r),g[ke]=n,Te(g),c=g;break t;case"link":var x=Xg("link","href",p).get(c+(r.href||""));if(x){for(var _=0;_<x.length;_++)if(g=x[_],g.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&g.getAttribute("rel")===(r.rel==null?null:r.rel)&&g.getAttribute("title")===(r.title==null?null:r.title)&&g.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){x.splice(_,1);break e}}g=p.createElement(c),je(g,c,r),p.head.appendChild(g);break;case"meta":if(x=Xg("meta","content",p).get(c+(r.content||""))){for(_=0;_<x.length;_++)if(g=x[_],g.getAttribute("content")===(r.content==null?null:""+r.content)&&g.getAttribute("name")===(r.name==null?null:r.name)&&g.getAttribute("property")===(r.property==null?null:r.property)&&g.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&g.getAttribute("charset")===(r.charSet==null?null:r.charSet)){x.splice(_,1);break e}}g=p.createElement(c),je(g,c,r),p.head.appendChild(g);break;default:throw Error(s(468,c))}g[ke]=n,Te(g),c=g}n.stateNode=c}else Yg(p,n.type,n.stateNode);else n.stateNode=qg(p,c,n.memoizedProps);else g!==c?(g===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):g.count--,c===null?Yg(p,n.type,n.stateNode):qg(p,c,n.memoizedProps)):c===null&&n.stateNode!==null&&nh(n,n.memoizedProps,r.memoizedProps)}break;case 27:Je(i,n),tn(n),c&512&&(ve||r===null||$n(r,r.return)),r!==null&&c&4&&nh(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Je(i,n),tn(n),c&512&&(ve||r===null||$n(r,r.return)),n.flags&32){p=n.stateNode;try{Xs(p,"")}catch(st){qt(n,n.return,st)}}c&4&&n.stateNode!=null&&(p=n.memoizedProps,nh(n,p,r!==null?r.memoizedProps:p)),c&1024&&(ah=!0);break;case 6:if(Je(i,n),tn(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(st){qt(n,n.return,st)}}break;case 3:if(Rl=null,p=jn,jn=Tl(i.containerInfo),Je(i,n),jn=p,tn(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{wa(i.containerInfo)}catch(st){qt(n,n.return,st)}ah&&(ah=!1,Ym(n));break;case 4:c=jn,jn=Tl(n.stateNode.containerInfo),Je(i,n),tn(n),jn=c;break;case 12:Je(i,n),tn(n);break;case 31:Je(i,n),tn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,fl(n,c)));break;case 13:Je(i,n),tn(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ml=Ve()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,fl(n,c)));break;case 22:p=n.memoizedState!==null;var N=r!==null&&r.memoizedState!==null,U=gi,$=ve;if(gi=U||p,ve=$||N,Je(i,n),ve=$,gi=U,tn(n),c&8192)t:for(i=n.stateNode,i._visibility=p?i._visibility&-2:i._visibility|1,p&&(r===null||N||gi||ve||Es(n)),r=null,i=n;;){if(i.tag===5||i.tag===26){if(r===null){N=r=i;try{if(g=N.stateNode,p)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{_=N.stateNode;var Q=N.memoizedProps.style,G=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;_.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(st){qt(N,N.return,st)}}}else if(i.tag===6){if(r===null){N=i;try{N.stateNode.nodeValue=p?"":N.memoizedProps}catch(st){qt(N,N.return,st)}}}else if(i.tag===18){if(r===null){N=i;try{var X=N.stateNode;p?jg(X,!0):jg(N.stateNode,!1)}catch(st){qt(N,N.return,st)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break t;for(;i.sibling===null;){if(i.return===null||i.return===n)break t;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,fl(n,r))));break;case 19:Je(i,n),tn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,fl(n,c)));break;case 30:break;case 21:break;default:Je(i,n),tn(n)}}function tn(n){var i=n.flags;if(i&2){try{for(var r,c=n.return;c!==null;){if(Fm(c)){r=c;break}c=c.return}if(r==null)throw Error(s(160));switch(r.tag){case 27:var p=r.stateNode,g=ih(n);dl(n,g,p);break;case 5:var x=r.stateNode;r.flags&32&&(Xs(x,""),r.flags&=-33);var _=ih(n);dl(n,_,x);break;case 3:case 4:var N=r.stateNode.containerInfo,U=ih(n);sh(n,U,N);break;default:throw Error(s(161))}}catch($){qt(n,n.return,$)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Ym(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;Ym(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function bi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Um(n,i.alternate,i),i=i.sibling}function Es(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Gi(4,i,i.return),Es(i);break;case 1:$n(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&jm(i,i.return,r),Es(i);break;case 27:Pr(i.stateNode);case 26:case 5:$n(i,i.return),Es(i);break;case 22:i.memoizedState===null&&Es(i);break;case 30:Es(i);break;default:Es(i)}n=n.sibling}}function vi(n,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,p=n,g=i,x=g.flags;switch(g.tag){case 0:case 11:case 15:vi(p,g,r),Cr(4,g);break;case 1:if(vi(p,g,r),c=g,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(U){qt(c,c.return,U)}if(c=g,p=c.updateQueue,p!==null){var _=c.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)Ep(N[p],_)}catch(U){qt(c,c.return,U)}}r&&x&64&&Pm(g),_r(g,g.return);break;case 27:zm(g);case 26:case 5:vi(p,g,r),r&&c===null&&x&4&&Bm(g),_r(g,g.return);break;case 12:vi(p,g,r);break;case 31:vi(p,g,r),r&&x&4&&Vm(p,g);break;case 13:vi(p,g,r),r&&x&4&&qm(p,g);break;case 22:g.memoizedState===null&&vi(p,g,r),_r(g,g.return);break;case 30:break;default:vi(p,g,r)}i=i.sibling}}function rh(n,i){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&dr(r))}function oh(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&dr(n))}function Bn(n,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)$m(n,i,r,c),i=i.sibling}function $m(n,i,r,c){var p=i.flags;switch(i.tag){case 0:case 11:case 15:Bn(n,i,r,c),p&2048&&Cr(9,i);break;case 1:Bn(n,i,r,c);break;case 3:Bn(n,i,r,c),p&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&dr(n)));break;case 12:if(p&2048){Bn(n,i,r,c),n=i.stateNode;try{var g=i.memoizedProps,x=g.id,_=g.onPostCommit;typeof _=="function"&&_(x,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){qt(i,i.return,N)}}else Bn(n,i,r,c);break;case 31:Bn(n,i,r,c);break;case 13:Bn(n,i,r,c);break;case 23:break;case 22:g=i.stateNode,x=i.alternate,i.memoizedState!==null?g._visibility&2?Bn(n,i,r,c):Tr(n,i):g._visibility&2?Bn(n,i,r,c):(g._visibility|=2,da(n,i,r,c,(i.subtreeFlags&10256)!==0||!1)),p&2048&&rh(x,i);break;case 24:Bn(n,i,r,c),p&2048&&oh(i.alternate,i);break;default:Bn(n,i,r,c)}}function da(n,i,r,c,p){for(p=p&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=n,x=i,_=r,N=c,U=x.flags;switch(x.tag){case 0:case 11:case 15:da(g,x,_,N,p),Cr(8,x);break;case 23:break;case 22:var $=x.stateNode;x.memoizedState!==null?$._visibility&2?da(g,x,_,N,p):Tr(g,x):($._visibility|=2,da(g,x,_,N,p)),p&&U&2048&&rh(x.alternate,x);break;case 24:da(g,x,_,N,p),p&&U&2048&&oh(x.alternate,x);break;default:da(g,x,_,N,p)}i=i.sibling}}function Tr(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=n,c=i,p=c.flags;switch(c.tag){case 22:Tr(r,c),p&2048&&rh(c.alternate,c);break;case 24:Tr(r,c),p&2048&&oh(c.alternate,c);break;default:Tr(r,c)}i=i.sibling}}var Mr=8192;function fa(n,i,r){if(n.subtreeFlags&Mr)for(n=n.child;n!==null;)Km(n,i,r),n=n.sibling}function Km(n,i,r){switch(n.tag){case 26:fa(n,i,r),n.flags&Mr&&n.memoizedState!==null&&Hx(r,jn,n.memoizedState,n.memoizedProps);break;case 5:fa(n,i,r);break;case 3:case 4:var c=jn;jn=Tl(n.stateNode.containerInfo),fa(n,i,r),jn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=Mr,Mr=16777216,fa(n,i,r),Mr=c):fa(n,i,r));break;default:fa(n,i,r)}}function Wm(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Rr(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];Me=c,Zm(c,n)}Wm(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Qm(n),n=n.sibling}function Qm(n){switch(n.tag){case 0:case 11:case 15:Rr(n),n.flags&2048&&Gi(9,n,n.return);break;case 3:Rr(n);break;case 12:Rr(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,pl(n)):Rr(n);break;default:Rr(n)}}function pl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];Me=c,Zm(c,n)}Wm(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Gi(8,i,i.return),pl(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,pl(i));break;default:pl(i)}n=n.sibling}}function Zm(n,i){for(;Me!==null;){var r=Me;switch(r.tag){case 0:case 11:case 15:Gi(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:dr(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,Me=c;else t:for(r=n;Me!==null;){c=Me;var p=c.sibling,g=c.return;if(Hm(c),c===r){Me=null;break t}if(p!==null){p.return=g,Me=p;break t}Me=g}}}var ix={getCacheForType:function(n){var i=Oe(ge),r=i.data.get(n);return r===void 0&&(r=n(),i.data.set(n,r)),r},cacheSignal:function(){return Oe(ge).controller.signal}},sx=typeof WeakMap=="function"?WeakMap:Map,Ht=0,Wt=null,Rt=null,Dt=0,Vt=0,fn=null,Vi=!1,pa=!1,lh=!1,xi=0,ue=0,qi=0,Cs=0,ch=0,pn=0,ma=0,Nr=null,en=null,uh=!1,ml=0,Jm=0,gl=1/0,yl=null,Xi=null,Se=0,Yi=null,ga=null,Ai=0,hh=0,dh=null,tg=null,Dr=0,fh=null;function mn(){return(Ht&2)!==0&&Dt!==0?Dt&-Dt:L.T!==null?vh():gf()}function eg(){if(pn===0)if((Dt&536870912)===0||Ot){var n=Co;Co<<=1,(Co&3932160)===0&&(Co=262144),pn=n}else pn=536870912;return n=hn.current,n!==null&&(n.flags|=32),pn}function nn(n,i,r){(n===Wt&&(Vt===2||Vt===9)||n.cancelPendingCommit!==null)&&(ya(n,0),$i(n,Dt,pn,!1)),Za(n,r),((Ht&2)===0||n!==Wt)&&(n===Wt&&((Ht&2)===0&&(Cs|=r),ue===4&&$i(n,Dt,pn,!1)),Kn(n))}function ng(n,i,r){if((Ht&6)!==0)throw Error(s(327));var c=!r&&(i&127)===0&&(i&n.expiredLanes)===0||Qa(n,i),p=c?ox(n,i):mh(n,i,!0),g=c;do{if(p===0){pa&&!c&&$i(n,i,0,!1);break}else{if(r=n.current.alternate,g&&!ax(r)){p=mh(n,i,!1),g=!1;continue}if(p===2){if(g=i,n.errorRecoveryDisabledLanes&g)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){i=x;t:{var _=n;p=Nr;var N=_.current.memoizedState.isDehydrated;if(N&&(ya(_,x).flags|=256),x=mh(_,x,!1),x!==2){if(lh&&!N){_.errorRecoveryDisabledLanes|=g,Cs|=g,p=4;break t}g=en,en=p,g!==null&&(en===null?en=g:en.push.apply(en,g))}p=x}if(g=!1,p!==2)continue}}if(p===1){ya(n,0),$i(n,i,0,!0);break}t:{switch(c=n,g=p,g){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:$i(c,i,pn,!Vi);break t;case 2:en=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(p=ml+300-Ve(),10<p)){if($i(c,i,pn,!Vi),To(c,0,!0)!==0)break t;Ai=i,c.timeoutHandle=Lg(ig.bind(null,c,r,en,yl,uh,i,pn,Cs,ma,Vi,g,"Throttled",-0,0),p);break t}ig(c,r,en,yl,uh,i,pn,Cs,ma,Vi,g,null,-0,0)}}break}while(!0);Kn(n)}function ig(n,i,r,c,p,g,x,_,N,U,$,Q,G,X){if(n.timeoutHandle=-1,Q=i.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ri},Km(i,g,Q);var st=(g&62914560)===g?ml-Ve():(g&4194048)===g?Jm-Ve():0;if(st=Gx(Q,st),st!==null){Ai=g,n.cancelPendingCommit=st(hg.bind(null,n,i,g,r,c,p,x,_,N,$,Q,null,G,X)),$i(n,g,x,!U);return}}hg(n,i,g,r,c,p,x,_,N)}function ax(n){for(var i=n;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var p=r[c],g=p.getSnapshot;p=p.value;try{if(!cn(g(),p))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $i(n,i,r,c){i&=~ch,i&=~Cs,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var p=i;0<p;){var g=31-ln(p),x=1<<g;c[g]=-1,p&=~x}r!==0&&ff(n,r,i)}function bl(){return(Ht&6)===0?(kr(0),!1):!0}function ph(){if(Rt!==null){if(Vt===0)var n=Rt.return;else n=Rt,ui=gs=null,Nu(n),oa=null,pr=0,n=Rt;for(;n!==null;)Om(n.alternate,n),n=n.return;Rt=null}}function ya(n,i){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,Cx(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Ai=0,ph(),Wt=n,Rt=r=li(n.current,null),Dt=i,Vt=0,fn=null,Vi=!1,pa=Qa(n,i),lh=!1,ma=pn=ch=Cs=qi=ue=0,en=Nr=null,uh=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var p=31-ln(c),g=1<<p;i|=n[p],c&=~g}return xi=i,zo(),r}function sg(n,i){Et=null,L.H=Sr,i===ra||i===Yo?(i=xp(),Vt=3):i===bu?(i=xp(),Vt=4):Vt=i===Xu?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,fn=i,Rt===null&&(ue=1,ol(n,wn(i,n.current)))}function ag(){var n=hn.current;return n===null?!0:(Dt&4194048)===Dt?Tn===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?n===Tn:!1}function rg(){var n=L.H;return L.H=Sr,n===null?Sr:n}function og(){var n=L.A;return L.A=ix,n}function vl(){ue=4,Vi||(Dt&4194048)!==Dt&&hn.current!==null||(pa=!0),(qi&134217727)===0&&(Cs&134217727)===0||Wt===null||$i(Wt,Dt,pn,!1)}function mh(n,i,r){var c=Ht;Ht|=2;var p=rg(),g=og();(Wt!==n||Dt!==i)&&(yl=null,ya(n,i)),i=!1;var x=ue;t:do try{if(Vt!==0&&Rt!==null){var _=Rt,N=fn;switch(Vt){case 8:ph(),x=6;break t;case 3:case 2:case 9:case 6:hn.current===null&&(i=!0);var U=Vt;if(Vt=0,fn=null,ba(n,_,N,U),r&&pa){x=0;break t}break;default:U=Vt,Vt=0,fn=null,ba(n,_,N,U)}}rx(),x=ue;break}catch($){sg(n,$)}while(!0);return i&&n.shellSuspendCounter++,ui=gs=null,Ht=c,L.H=p,L.A=g,Rt===null&&(Wt=null,Dt=0,zo()),x}function rx(){for(;Rt!==null;)lg(Rt)}function ox(n,i){var r=Ht;Ht|=2;var c=rg(),p=og();Wt!==n||Dt!==i?(yl=null,gl=Ve()+500,ya(n,i)):pa=Qa(n,i);t:do try{if(Vt!==0&&Rt!==null){i=Rt;var g=fn;e:switch(Vt){case 1:Vt=0,fn=null,ba(n,i,g,1);break;case 2:case 9:if(bp(g)){Vt=0,fn=null,cg(i);break}i=function(){Vt!==2&&Vt!==9||Wt!==n||(Vt=7),Kn(n)},g.then(i,i);break t;case 3:Vt=7;break t;case 4:Vt=5;break t;case 7:bp(g)?(Vt=0,fn=null,cg(i)):(Vt=0,fn=null,ba(n,i,g,7));break;case 5:var x=null;switch(Rt.tag){case 26:x=Rt.memoizedState;case 5:case 27:var _=Rt;if(x?$g(x):_.stateNode.complete){Vt=0,fn=null;var N=_.sibling;if(N!==null)Rt=N;else{var U=_.return;U!==null?(Rt=U,xl(U)):Rt=null}break e}}Vt=0,fn=null,ba(n,i,g,5);break;case 6:Vt=0,fn=null,ba(n,i,g,6);break;case 8:ph(),ue=6;break t;default:throw Error(s(462))}}lx();break}catch($){sg(n,$)}while(!0);return ui=gs=null,L.H=c,L.A=p,Ht=r,Rt!==null?0:(Wt=null,Dt=0,zo(),ue)}function lx(){for(;Rt!==null&&!Mc();)lg(Rt)}function lg(n){var i=km(n.alternate,n,xi);n.memoizedProps=n.pendingProps,i===null?xl(n):Rt=i}function cg(n){var i=n,r=i.alternate;switch(i.tag){case 15:case 0:i=_m(r,i,i.pendingProps,i.type,void 0,Dt);break;case 11:i=_m(r,i,i.pendingProps,i.type.render,i.ref,Dt);break;case 5:Nu(i);default:Om(r,i),i=Rt=op(i,xi),i=km(r,i,xi)}n.memoizedProps=n.pendingProps,i===null?xl(n):Rt=i}function ba(n,i,r,c){ui=gs=null,Nu(i),oa=null,pr=0;var p=i.return;try{if(W1(n,p,i,r,Dt)){ue=1,ol(n,wn(r,n.current)),Rt=null;return}}catch(g){if(p!==null)throw Rt=p,g;ue=1,ol(n,wn(r,n.current)),Rt=null;return}i.flags&32768?(Ot||c===1?n=!0:pa||(Dt&536870912)!==0?n=!1:(Vi=n=!0,(c===2||c===9||c===3||c===6)&&(c=hn.current,c!==null&&c.tag===13&&(c.flags|=16384))),ug(i,n)):xl(i)}function xl(n){var i=n;do{if((i.flags&32768)!==0){ug(i,Vi);return}n=i.return;var r=J1(i.alternate,i,xi);if(r!==null){Rt=r;return}if(i=i.sibling,i!==null){Rt=i;return}Rt=i=n}while(i!==null);ue===0&&(ue=5)}function ug(n,i){do{var r=tx(n.alternate,n);if(r!==null){r.flags&=32767,Rt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(n=n.sibling,n!==null)){Rt=n;return}Rt=n=r}while(n!==null);ue=6,Rt=null}function hg(n,i,r,c,p,g,x,_,N){n.cancelPendingCommit=null;do Al();while(Se!==0);if((Ht&6)!==0)throw Error(s(327));if(i!==null){if(i===n.current)throw Error(s(177));if(g=i.lanes|i.childLanes,g|=iu,Uv(n,r,g,x,_,N),n===Wt&&(Rt=Wt=null,Dt=0),ga=i,Yi=n,Ai=r,hh=g,dh=p,tg=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,dx(On,function(){return gg(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=L.T,L.T=null,p=V.p,V.p=2,x=Ht,Ht|=4;try{ex(n,i,r)}finally{Ht=x,V.p=p,L.T=c}}Se=1,dg(),fg(),pg()}}function dg(){if(Se===1){Se=0;var n=Yi,i=ga,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var c=V.p;V.p=2;var p=Ht;Ht|=4;try{Xm(i,n);var g=Th,x=Zf(n.containerInfo),_=g.focusedElem,N=g.selectionRange;if(x!==_&&_&&_.ownerDocument&&Qf(_.ownerDocument.documentElement,_)){if(N!==null&&Zc(_)){var U=N.start,$=N.end;if($===void 0&&($=U),"selectionStart"in _)_.selectionStart=U,_.selectionEnd=Math.min($,_.value.length);else{var Q=_.ownerDocument||document,G=Q&&Q.defaultView||window;if(G.getSelection){var X=G.getSelection(),st=_.textContent.length,yt=Math.min(N.start,st),$t=N.end===void 0?yt:Math.min(N.end,st);!X.extend&&yt>$t&&(x=$t,$t=yt,yt=x);var z=Wf(_,yt),j=Wf(_,$t);if(z&&j&&(X.rangeCount!==1||X.anchorNode!==z.node||X.anchorOffset!==z.offset||X.focusNode!==j.node||X.focusOffset!==j.offset)){var I=Q.createRange();I.setStart(z.node,z.offset),X.removeAllRanges(),yt>$t?(X.addRange(I),X.extend(j.node,j.offset)):(I.setEnd(j.node,j.offset),X.addRange(I))}}}}for(Q=[],X=_;X=X.parentNode;)X.nodeType===1&&Q.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Q.length;_++){var W=Q[_];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Ll=!!_h,Th=_h=null}finally{Ht=p,V.p=c,L.T=r}}n.current=i,Se=2}}function fg(){if(Se===2){Se=0;var n=Yi,i=ga,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var c=V.p;V.p=2;var p=Ht;Ht|=4;try{Um(n,i.alternate,i)}finally{Ht=p,V.p=c,L.T=r}}Se=3}}function pg(){if(Se===4||Se===3){Se=0,Rc();var n=Yi,i=ga,r=Ai,c=tg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Se=5:(Se=0,ga=Yi=null,mg(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(Xi=null),Lc(r),i=i.stateNode,on&&typeof on.onCommitFiberRoot=="function")try{on.onCommitFiberRoot(Wa,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=L.T,p=V.p,V.p=2,L.T=null;try{for(var g=n.onRecoverableError,x=0;x<c.length;x++){var _=c[x];g(_.value,{componentStack:_.stack})}}finally{L.T=i,V.p=p}}(Ai&3)!==0&&Al(),Kn(n),p=n.pendingLanes,(r&261930)!==0&&(p&42)!==0?n===fh?Dr++:(Dr=0,fh=n):Dr=0,kr(0)}}function mg(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,dr(i)))}function Al(){return dg(),fg(),pg(),gg()}function gg(){if(Se!==5)return!1;var n=Yi,i=hh;hh=0;var r=Lc(Ai),c=L.T,p=V.p;try{V.p=32>r?32:r,L.T=null,r=dh,dh=null;var g=Yi,x=Ai;if(Se=0,ga=Yi=null,Ai=0,(Ht&6)!==0)throw Error(s(331));var _=Ht;if(Ht|=4,Qm(g.current),$m(g,g.current,x,r),Ht=_,kr(0,!1),on&&typeof on.onPostCommitFiberRoot=="function")try{on.onPostCommitFiberRoot(Wa,g)}catch{}return!0}finally{V.p=p,L.T=c,mg(n,i)}}function yg(n,i,r){i=wn(r,i),i=qu(n.stateNode,i,2),n=Ii(n,i,2),n!==null&&(Za(n,2),Kn(n))}function qt(n,i,r){if(n.tag===3)yg(n,n,r);else for(;i!==null;){if(i.tag===3){yg(i,n,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Xi===null||!Xi.has(c))){n=wn(r,n),r=bm(2),c=Ii(i,r,2),c!==null&&(vm(r,c,i,n),Za(c,2),Kn(c));break}}i=i.return}}function gh(n,i,r){var c=n.pingCache;if(c===null){c=n.pingCache=new sx;var p=new Set;c.set(i,p)}else p=c.get(i),p===void 0&&(p=new Set,c.set(i,p));p.has(r)||(lh=!0,p.add(r),n=cx.bind(null,n,i,r),i.then(n,n))}function cx(n,i,r){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Wt===n&&(Dt&r)===r&&(ue===4||ue===3&&(Dt&62914560)===Dt&&300>Ve()-ml?(Ht&2)===0&&ya(n,0):ch|=r,ma===Dt&&(ma=0)),Kn(n)}function bg(n,i){i===0&&(i=df()),n=fs(n,i),n!==null&&(Za(n,i),Kn(n))}function ux(n){var i=n.memoizedState,r=0;i!==null&&(r=i.retryLane),bg(n,r)}function hx(n,i){var r=0;switch(n.tag){case 31:case 13:var c=n.stateNode,p=n.memoizedState;p!==null&&(r=p.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(i),bg(n,r)}function dx(n,i){return Ka(n,i)}var Sl=null,va=null,yh=!1,wl=!1,bh=!1,Ki=0;function Kn(n){n!==va&&n.next===null&&(va===null?Sl=va=n:va=va.next=n),wl=!0,yh||(yh=!0,px())}function kr(n,i){if(!bh&&wl){bh=!0;do for(var r=!1,c=Sl;c!==null;){if(n!==0){var p=c.pendingLanes;if(p===0)var g=0;else{var x=c.suspendedLanes,_=c.pingedLanes;g=(1<<31-ln(42|n)+1)-1,g&=p&~(x&~_),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(r=!0,Sg(c,g))}else g=Dt,g=To(c,c===Wt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Qa(c,g)||(r=!0,Sg(c,g));c=c.next}while(r);bh=!1}}function fx(){vg()}function vg(){wl=yh=!1;var n=0;Ki!==0&&Ex()&&(n=Ki);for(var i=Ve(),r=null,c=Sl;c!==null;){var p=c.next,g=xg(c,i);g===0?(c.next=null,r===null?Sl=p:r.next=p,p===null&&(va=r)):(r=c,(n!==0||(g&3)!==0)&&(wl=!0)),c=p}Se!==0&&Se!==5||kr(n),Ki!==0&&(Ki=0)}function xg(n,i){for(var r=n.suspendedLanes,c=n.pingedLanes,p=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var x=31-ln(g),_=1<<x,N=p[x];N===-1?((_&r)===0||(_&c)!==0)&&(p[x]=Iv(_,i)):N<=i&&(n.expiredLanes|=_),g&=~_}if(i=Wt,r=Dt,r=To(n,n===i?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===i&&(Vt===2||Vt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ni(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Qa(n,r)){if(i=r&-r,i===n.callbackPriority)return i;switch(c!==null&&Ni(c),Lc(r)){case 2:case 8:r=Ln;break;case 32:r=On;break;case 268435456:r=zs;break;default:r=On}return c=Ag.bind(null,n),r=Ka(r,c),n.callbackPriority=i,n.callbackNode=r,i}return c!==null&&c!==null&&Ni(c),n.callbackPriority=2,n.callbackNode=null,2}function Ag(n,i){if(Se!==0&&Se!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Al()&&n.callbackNode!==r)return null;var c=Dt;return c=To(n,n===Wt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(ng(n,c,i),xg(n,Ve()),n.callbackNode!=null&&n.callbackNode===r?Ag.bind(null,n):null)}function Sg(n,i){if(Al())return null;ng(n,i,!0)}function px(){_x(function(){(Ht&6)!==0?Ka(wo,fx):vg()})}function vh(){if(Ki===0){var n=sa;n===0&&(n=Eo,Eo<<=1,(Eo&261888)===0&&(Eo=256)),Ki=n}return Ki}function wg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Do(""+n)}function Eg(n,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,n.id&&r.setAttribute("form",n.id),i.parentNode.insertBefore(r,i),n=new FormData(n),r.parentNode.removeChild(r),n}function mx(n,i,r,c,p){if(i==="submit"&&r&&r.stateNode===p){var g=wg((p[We]||null).action),x=c.submitter;x&&(i=(i=x[We]||null)?wg(i.formAction):x.getAttribute("formAction"),i!==null&&(g=i,x=null));var _=new Po("action","action",null,c,p);n.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ki!==0){var N=x?Eg(p,x):new FormData(p);zu(r,{pending:!0,data:N,method:p.method,action:g},null,N)}}else typeof g=="function"&&(_.preventDefault(),N=x?Eg(p,x):new FormData(p),zu(r,{pending:!0,data:N,method:p.method,action:g},g,N))},currentTarget:p}]})}}for(var xh=0;xh<nu.length;xh++){var Ah=nu[xh],gx=Ah.toLowerCase(),yx=Ah[0].toUpperCase()+Ah.slice(1);Pn(gx,"on"+yx)}Pn(ep,"onAnimationEnd"),Pn(np,"onAnimationIteration"),Pn(ip,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(L1,"onTransitionRun"),Pn(O1,"onTransitionStart"),Pn(P1,"onTransitionCancel"),Pn(sp,"onTransitionEnd"),Vs("onMouseEnter",["mouseout","mouseover"]),Vs("onMouseLeave",["mouseout","mouseover"]),Vs("onPointerEnter",["pointerout","pointerover"]),Vs("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lr));function Cg(n,i){i=(i&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],p=c.event;c=c.listeners;t:{var g=void 0;if(i)for(var x=c.length-1;0<=x;x--){var _=c[x],N=_.instance,U=_.currentTarget;if(_=_.listener,N!==g&&p.isPropagationStopped())break t;g=_,p.currentTarget=U;try{g(p)}catch($){Fo($)}p.currentTarget=null,g=N}else for(x=0;x<c.length;x++){if(_=c[x],N=_.instance,U=_.currentTarget,_=_.listener,N!==g&&p.isPropagationStopped())break t;g=_,p.currentTarget=U;try{g(p)}catch($){Fo($)}p.currentTarget=null,g=N}}}}function Nt(n,i){var r=i[Oc];r===void 0&&(r=i[Oc]=new Set);var c=n+"__bubble";r.has(c)||(_g(i,n,2,!1),r.add(c))}function Sh(n,i,r){var c=0;i&&(c|=4),_g(r,n,c,i)}var El="_reactListening"+Math.random().toString(36).slice(2);function wh(n){if(!n[El]){n[El]=!0,vf.forEach(function(r){r!=="selectionchange"&&(bx.has(r)||Sh(r,!1,n),Sh(r,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[El]||(i[El]=!0,Sh("selectionchange",!1,i))}}function _g(n,i,r,c){switch(ey(i)){case 2:var p=Xx;break;case 8:p=Yx;break;default:p=Fh}r=p.bind(null,i,r,n),p=void 0,!Gc||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(p=!0),c?p!==void 0?n.addEventListener(i,r,{capture:!0,passive:p}):n.addEventListener(i,r,!0):p!==void 0?n.addEventListener(i,r,{passive:p}):n.addEventListener(i,r,!1)}function Eh(n,i,r,c,p){var g=c;if((i&1)===0&&(i&2)===0&&c!==null)t:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var _=c.stateNode.containerInfo;if(_===p)break;if(x===4)for(x=c.return;x!==null;){var N=x.tag;if((N===3||N===4)&&x.stateNode.containerInfo===p)return;x=x.return}for(;_!==null;){if(x=Us(_),x===null)return;if(N=x.tag,N===5||N===6||N===26||N===27){c=g=x;continue t}_=_.parentNode}}c=c.return}Df(function(){var U=g,$=Uc(r),Q=[];t:{var G=ap.get(n);if(G!==void 0){var X=Po,st=n;switch(n){case"keypress":if(Lo(r)===0)break t;case"keydown":case"keyup":X=h1;break;case"focusin":st="focus",X=Yc;break;case"focusout":st="blur",X=Yc;break;case"beforeblur":case"afterblur":X=Yc;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Jv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=p1;break;case ep:case np:case ip:X=n1;break;case sp:X=g1;break;case"scroll":case"scrollend":X=Qv;break;case"wheel":X=b1;break;case"copy":case"cut":case"paste":X=s1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=jf;break;case"toggle":case"beforetoggle":X=x1}var yt=(i&4)!==0,$t=!yt&&(n==="scroll"||n==="scrollend"),z=yt?G!==null?G+"Capture":null:G;yt=[];for(var j=U,I;j!==null;){var W=j;if(I=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||I===null||z===null||(W=er(j,z),W!=null&&yt.push(Or(j,W,I))),$t)break;j=j.return}0<yt.length&&(G=new X(G,st,null,r,$),Q.push({event:G,listeners:yt}))}}if((i&7)===0){t:{if(G=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",G&&r!==Ic&&(st=r.relatedTarget||r.fromElement)&&(Us(st)||st[Is]))break t;if((X||G)&&(G=$.window===$?$:(G=$.ownerDocument)?G.defaultView||G.parentWindow:window,X?(st=r.relatedTarget||r.toElement,X=U,st=st?Us(st):null,st!==null&&($t=o(st),yt=st.tag,st!==$t||yt!==5&&yt!==27&&yt!==6)&&(st=null)):(X=null,st=U),X!==st)){if(yt=Of,W="onMouseLeave",z="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(yt=jf,W="onPointerLeave",z="onPointerEnter",j="pointer"),$t=X==null?G:tr(X),I=st==null?G:tr(st),G=new yt(W,j+"leave",X,r,$),G.target=$t,G.relatedTarget=I,W=null,Us($)===U&&(yt=new yt(z,j+"enter",st,r,$),yt.target=I,yt.relatedTarget=$t,W=yt),$t=W,X&&st)e:{for(yt=vx,z=X,j=st,I=0,W=z;W;W=yt(W))I++;W=0;for(var mt=j;mt;mt=yt(mt))W++;for(;0<I-W;)z=yt(z),I--;for(;0<W-I;)j=yt(j),W--;for(;I--;){if(z===j||j!==null&&z===j.alternate){yt=z;break e}z=yt(z),j=yt(j)}yt=null}else yt=null;X!==null&&Tg(Q,G,X,yt,!1),st!==null&&$t!==null&&Tg(Q,$t,st,yt,!0)}}t:{if(G=U?tr(U):window,X=G.nodeName&&G.nodeName.toLowerCase(),X==="select"||X==="input"&&G.type==="file")var zt=Vf;else if(Hf(G))if(qf)zt=N1;else{zt=M1;var ut=T1}else X=G.nodeName,!X||X.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?U&&zc(U.elementType)&&(zt=Vf):zt=R1;if(zt&&(zt=zt(n,U))){Gf(Q,zt,r,$);break t}ut&&ut(n,G,U),n==="focusout"&&U&&G.type==="number"&&U.memoizedProps.value!=null&&Fc(G,"number",G.value)}switch(ut=U?tr(U):window,n){case"focusin":(Hf(ut)||ut.contentEditable==="true")&&(Ws=ut,Jc=U,cr=null);break;case"focusout":cr=Jc=Ws=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,Jf(Q,r,$);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":Jf(Q,r,$)}var Ct;if(Kc)t:{switch(n){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else Ks?If(n,r)&&(kt="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(kt="onCompositionStart");kt&&(Bf&&r.locale!=="ko"&&(Ks||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&Ks&&(Ct=kf()):(Li=$,Vc="value"in Li?Li.value:Li.textContent,Ks=!0)),ut=Cl(U,kt),0<ut.length&&(kt=new Pf(kt,n,null,r,$),Q.push({event:kt,listeners:ut}),Ct?kt.data=Ct:(Ct=Uf(r),Ct!==null&&(kt.data=Ct)))),(Ct=S1?w1(n,r):E1(n,r))&&(kt=Cl(U,"onBeforeInput"),0<kt.length&&(ut=new Pf("onBeforeInput","beforeinput",null,r,$),Q.push({event:ut,listeners:kt}),ut.data=Ct)),mx(Q,n,U,r,$)}Cg(Q,i)})}function Or(n,i,r){return{instance:n,listener:i,currentTarget:r}}function Cl(n,i){for(var r=i+"Capture",c=[];n!==null;){var p=n,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=er(n,r),p!=null&&c.unshift(Or(n,p,g)),p=er(n,i),p!=null&&c.push(Or(n,p,g))),n.tag===3)return c;n=n.return}return[]}function vx(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Tg(n,i,r,c,p){for(var g=i._reactName,x=[];r!==null&&r!==c;){var _=r,N=_.alternate,U=_.stateNode;if(_=_.tag,N!==null&&N===c)break;_!==5&&_!==26&&_!==27||U===null||(N=U,p?(U=er(r,g),U!=null&&x.unshift(Or(r,U,N))):p||(U=er(r,g),U!=null&&x.push(Or(r,U,N)))),r=r.return}x.length!==0&&n.push({event:i,listeners:x})}var xx=/\r\n?/g,Ax=/\u0000|\uFFFD/g;function Mg(n){return(typeof n=="string"?n:""+n).replace(xx,`
`).replace(Ax,"")}function Rg(n,i){return i=Mg(i),Mg(n)===i}function Yt(n,i,r,c,p,g){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Xs(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Xs(n,""+c);break;case"className":Ro(n,"class",c);break;case"tabIndex":Ro(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ro(n,r,c);break;case"style":Rf(n,c,g);break;case"data":if(i!=="object"){Ro(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=Do(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(r==="formAction"?(i!=="input"&&Yt(n,i,"name",p.name,p,null),Yt(n,i,"formEncType",p.formEncType,p,null),Yt(n,i,"formMethod",p.formMethod,p,null),Yt(n,i,"formTarget",p.formTarget,p,null)):(Yt(n,i,"encType",p.encType,p,null),Yt(n,i,"method",p.method,p,null),Yt(n,i,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=Do(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=ri);break;case"onScroll":c!=null&&Nt("scroll",n);break;case"onScrollEnd":c!=null&&Nt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=Do(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":Nt("beforetoggle",n),Nt("toggle",n),Mo(n,"popover",c);break;case"xlinkActuate":ai(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ai(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ai(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ai(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ai(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ai(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ai(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ai(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ai(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Mo(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Kv.get(r)||r,Mo(n,r,c))}}function Ch(n,i,r,c,p,g){switch(r){case"style":Rf(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(r=c.__html,r!=null){if(p.children!=null)throw Error(s(60));n.innerHTML=r}}break;case"children":typeof c=="string"?Xs(n,c):(typeof c=="number"||typeof c=="bigint")&&Xs(n,""+c);break;case"onScroll":c!=null&&Nt("scroll",n);break;case"onScrollEnd":c!=null&&Nt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xf.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),i=r.slice(2,p?r.length-7:void 0),g=n[We]||null,g=g!=null?g[r]:null,typeof g=="function"&&n.removeEventListener(i,g,p),typeof c=="function")){typeof g!="function"&&g!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(i,c,p);break t}r in n?n[r]=c:c===!0?n.setAttribute(r,""):Mo(n,r,c)}}}function je(n,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",n),Nt("load",n);var c=!1,p=!1,g;for(g in r)if(r.hasOwnProperty(g)){var x=r[g];if(x!=null)switch(g){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(n,i,g,x,r,null)}}p&&Yt(n,i,"srcSet",r.srcSet,r,null),c&&Yt(n,i,"src",r.src,r,null);return;case"input":Nt("invalid",n);var _=g=x=p=null,N=null,U=null;for(c in r)if(r.hasOwnProperty(c)){var $=r[c];if($!=null)switch(c){case"name":p=$;break;case"type":x=$;break;case"checked":N=$;break;case"defaultChecked":U=$;break;case"value":g=$;break;case"defaultValue":_=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:Yt(n,i,c,$,r,null)}}Cf(n,g,_,N,U,x,p,!1);return;case"select":Nt("invalid",n),c=x=g=null;for(p in r)if(r.hasOwnProperty(p)&&(_=r[p],_!=null))switch(p){case"value":g=_;break;case"defaultValue":x=_;break;case"multiple":c=_;default:Yt(n,i,p,_,r,null)}i=g,r=x,n.multiple=!!c,i!=null?qs(n,!!c,i,!1):r!=null&&qs(n,!!c,r,!0);return;case"textarea":Nt("invalid",n),g=p=c=null;for(x in r)if(r.hasOwnProperty(x)&&(_=r[x],_!=null))switch(x){case"value":c=_;break;case"defaultValue":p=_;break;case"children":g=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Yt(n,i,x,_,r,null)}Tf(n,c,p,g);return;case"option":for(N in r)if(r.hasOwnProperty(N)&&(c=r[N],c!=null))switch(N){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Yt(n,i,N,c,r,null)}return;case"dialog":Nt("beforetoggle",n),Nt("toggle",n),Nt("cancel",n),Nt("close",n);break;case"iframe":case"object":Nt("load",n);break;case"video":case"audio":for(c=0;c<Lr.length;c++)Nt(Lr[c],n);break;case"image":Nt("error",n),Nt("load",n);break;case"details":Nt("toggle",n);break;case"embed":case"source":case"link":Nt("error",n),Nt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in r)if(r.hasOwnProperty(U)&&(c=r[U],c!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Yt(n,i,U,c,r,null)}return;default:if(zc(i)){for($ in r)r.hasOwnProperty($)&&(c=r[$],c!==void 0&&Ch(n,i,$,c,r,void 0));return}}for(_ in r)r.hasOwnProperty(_)&&(c=r[_],c!=null&&Yt(n,i,_,c,r,null))}function Sx(n,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,x=null,_=null,N=null,U=null,$=null;for(X in r){var Q=r[X];if(r.hasOwnProperty(X)&&Q!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":N=Q;default:c.hasOwnProperty(X)||Yt(n,i,X,null,c,Q)}}for(var G in c){var X=c[G];if(Q=r[G],c.hasOwnProperty(G)&&(X!=null||Q!=null))switch(G){case"type":g=X;break;case"name":p=X;break;case"checked":U=X;break;case"defaultChecked":$=X;break;case"value":x=X;break;case"defaultValue":_=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:X!==Q&&Yt(n,i,G,X,c,Q)}}Bc(n,x,_,N,U,$,g,p);return;case"select":X=x=_=G=null;for(g in r)if(N=r[g],r.hasOwnProperty(g)&&N!=null)switch(g){case"value":break;case"multiple":X=N;default:c.hasOwnProperty(g)||Yt(n,i,g,null,c,N)}for(p in c)if(g=c[p],N=r[p],c.hasOwnProperty(p)&&(g!=null||N!=null))switch(p){case"value":G=g;break;case"defaultValue":_=g;break;case"multiple":x=g;default:g!==N&&Yt(n,i,p,g,c,N)}i=_,r=x,c=X,G!=null?qs(n,!!r,G,!1):!!c!=!!r&&(i!=null?qs(n,!!r,i,!0):qs(n,!!r,r?[]:"",!1));return;case"textarea":X=G=null;for(_ in r)if(p=r[_],r.hasOwnProperty(_)&&p!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Yt(n,i,_,null,c,p)}for(x in c)if(p=c[x],g=r[x],c.hasOwnProperty(x)&&(p!=null||g!=null))switch(x){case"value":G=p;break;case"defaultValue":X=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(s(91));break;default:p!==g&&Yt(n,i,x,p,c,g)}_f(n,G,X);return;case"option":for(var st in r)if(G=r[st],r.hasOwnProperty(st)&&G!=null&&!c.hasOwnProperty(st))switch(st){case"selected":n.selected=!1;break;default:Yt(n,i,st,null,c,G)}for(N in c)if(G=c[N],X=r[N],c.hasOwnProperty(N)&&G!==X&&(G!=null||X!=null))switch(N){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Yt(n,i,N,G,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in r)G=r[yt],r.hasOwnProperty(yt)&&G!=null&&!c.hasOwnProperty(yt)&&Yt(n,i,yt,null,c,G);for(U in c)if(G=c[U],X=r[U],c.hasOwnProperty(U)&&G!==X&&(G!=null||X!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:Yt(n,i,U,G,c,X)}return;default:if(zc(i)){for(var $t in r)G=r[$t],r.hasOwnProperty($t)&&G!==void 0&&!c.hasOwnProperty($t)&&Ch(n,i,$t,void 0,c,G);for($ in c)G=c[$],X=r[$],!c.hasOwnProperty($)||G===X||G===void 0&&X===void 0||Ch(n,i,$,G,c,X);return}}for(var z in r)G=r[z],r.hasOwnProperty(z)&&G!=null&&!c.hasOwnProperty(z)&&Yt(n,i,z,null,c,G);for(Q in c)G=c[Q],X=r[Q],!c.hasOwnProperty(Q)||G===X||G==null&&X==null||Yt(n,i,Q,G,c,X)}function Ng(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wx(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var p=r[c],g=p.transferSize,x=p.initiatorType,_=p.duration;if(g&&_&&Ng(x)){for(x=0,_=p.responseEnd,c+=1;c<r.length;c++){var N=r[c],U=N.startTime;if(U>_)break;var $=N.transferSize,Q=N.initiatorType;$&&Ng(Q)&&(N=N.responseEnd,x+=$*(N<_?1:(_-U)/(N-U)))}if(--c,i+=8*(g+x)/(p.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var _h=null,Th=null;function _l(n){return n.nodeType===9?n:n.ownerDocument}function Dg(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kg(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Mh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Rh=null;function Ex(){var n=window.event;return n&&n.type==="popstate"?n===Rh?!1:(Rh=n,!0):(Rh=null,!1)}var Lg=typeof setTimeout=="function"?setTimeout:void 0,Cx=typeof clearTimeout=="function"?clearTimeout:void 0,Og=typeof Promise=="function"?Promise:void 0,_x=typeof queueMicrotask=="function"?queueMicrotask:typeof Og<"u"?function(n){return Og.resolve(null).then(n).catch(Tx)}:Lg;function Tx(n){setTimeout(function(){throw n})}function Wi(n){return n==="head"}function Pg(n,i){var r=i,c=0;do{var p=r.nextSibling;if(n.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(c===0){n.removeChild(p),wa(i);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Pr(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Pr(r);for(var g=r.firstChild;g;){var x=g.nextSibling,_=g.nodeName;g[Ja]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&g.rel.toLowerCase()==="stylesheet"||r.removeChild(g),g=x}}else r==="body"&&Pr(n.ownerDocument.body);r=p}while(r);wa(i)}function jg(n,i){var r=n;n=0;do{var c=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=c}while(r)}function Nh(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Nh(r),Pc(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function Mx(n,i,r,c){for(;n.nodeType===1;){var p=r;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ja])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Mn(n.nextSibling),n===null)break}return null}function Rx(n,i,r){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=Mn(n.nextSibling),n===null))return null;return n}function Bg(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Mn(n.nextSibling),n===null))return null;return n}function Dh(n){return n.data==="$?"||n.data==="$~"}function kh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Nx(n,i){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||r.readyState!=="loading")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Mn(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Lh=null;function Fg(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(i===0)return Mn(n.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}n=n.nextSibling}return null}function zg(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return n;i--}else r!=="/$"&&r!=="/&"||i++}n=n.previousSibling}return null}function Ig(n,i,r){switch(i=_l(r),n){case"html":if(n=i.documentElement,!n)throw Error(s(452));return n;case"head":if(n=i.head,!n)throw Error(s(453));return n;case"body":if(n=i.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Pr(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Pc(n)}var Rn=new Map,Ug=new Set;function Tl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Si=V.d;V.d={f:Dx,r:kx,D:Lx,C:Ox,L:Px,m:jx,X:Fx,S:Bx,M:zx};function Dx(){var n=Si.f(),i=bl();return n||i}function kx(n){var i=Hs(n);i!==null&&i.tag===5&&i.type==="form"?sm(i):Si.r(n)}var xa=typeof document>"u"?null:document;function Hg(n,i,r){var c=xa;if(c&&typeof i=="string"&&i){var p=An(i);p='link[rel="'+n+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Ug.has(p)||(Ug.add(p),n={rel:n,crossOrigin:r,href:i},c.querySelector(p)===null&&(i=c.createElement("link"),je(i,"link",n),Te(i),c.head.appendChild(i)))}}function Lx(n){Si.D(n),Hg("dns-prefetch",n,null)}function Ox(n,i){Si.C(n,i),Hg("preconnect",n,i)}function Px(n,i,r){Si.L(n,i,r);var c=xa;if(c&&n&&i){var p='link[rel="preload"][as="'+An(i)+'"]';i==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+An(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+An(r.imageSizes)+'"]')):p+='[href="'+An(n)+'"]';var g=p;switch(i){case"style":g=Aa(n);break;case"script":g=Sa(n)}Rn.has(g)||(n=y({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:n,as:i},r),Rn.set(g,n),c.querySelector(p)!==null||i==="style"&&c.querySelector(jr(g))||i==="script"&&c.querySelector(Br(g))||(i=c.createElement("link"),je(i,"link",n),Te(i),c.head.appendChild(i)))}}function jx(n,i){Si.m(n,i);var r=xa;if(r&&n){var c=i&&typeof i.as=="string"?i.as:"script",p='link[rel="modulepreload"][as="'+An(c)+'"][href="'+An(n)+'"]',g=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Sa(n)}if(!Rn.has(g)&&(n=y({rel:"modulepreload",href:n},i),Rn.set(g,n),r.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Br(g)))return}c=r.createElement("link"),je(c,"link",n),Te(c),r.head.appendChild(c)}}}function Bx(n,i,r){Si.S(n,i,r);var c=xa;if(c&&n){var p=Gs(c).hoistableStyles,g=Aa(n);i=i||"default";var x=p.get(g);if(!x){var _={loading:0,preload:null};if(x=c.querySelector(jr(g)))_.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":i},r),(r=Rn.get(g))&&Oh(n,r);var N=x=c.createElement("link");Te(N),je(N,"link",n),N._p=new Promise(function(U,$){N.onload=U,N.onerror=$}),N.addEventListener("load",function(){_.loading|=1}),N.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Ml(x,i,c)}x={type:"stylesheet",instance:x,count:1,state:_},p.set(g,x)}}}function Fx(n,i){Si.X(n,i);var r=xa;if(r&&n){var c=Gs(r).hoistableScripts,p=Sa(n),g=c.get(p);g||(g=r.querySelector(Br(p)),g||(n=y({src:n,async:!0},i),(i=Rn.get(p))&&Ph(n,i),g=r.createElement("script"),Te(g),je(g,"link",n),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function zx(n,i){Si.M(n,i);var r=xa;if(r&&n){var c=Gs(r).hoistableScripts,p=Sa(n),g=c.get(p);g||(g=r.querySelector(Br(p)),g||(n=y({src:n,async:!0,type:"module"},i),(i=Rn.get(p))&&Ph(n,i),g=r.createElement("script"),Te(g),je(g,"link",n),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function Gg(n,i,r,c){var p=(p=ft.current)?Tl(p):null;if(!p)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=Aa(r.href),r=Gs(p).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Aa(r.href);var g=Gs(p).hoistableStyles,x=g.get(n);if(x||(p=p.ownerDocument||p,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,x),(g=p.querySelector(jr(n)))&&!g._p&&(x.instance=g,x.state.loading=5),Rn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Rn.set(n,r),g||Ix(p,n,r,x.state))),i&&c===null)throw Error(s(528,""));return x}if(i&&c!==null)throw Error(s(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Sa(r),r=Gs(p).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function Aa(n){return'href="'+An(n)+'"'}function jr(n){return'link[rel="stylesheet"]['+n+"]"}function Vg(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function Ix(n,i,r,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),je(i,"link",r),Te(i),n.head.appendChild(i))}function Sa(n){return'[src="'+An(n)+'"]'}function Br(n){return"script[async]"+n}function qg(n,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+An(r.href)+'"]');if(c)return i.instance=c,Te(c),c;var p=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Te(c),je(c,"style",p),Ml(c,r.precedence,n),i.instance=c;case"stylesheet":p=Aa(r.href);var g=n.querySelector(jr(p));if(g)return i.state.loading|=4,i.instance=g,Te(g),g;c=Vg(r),(p=Rn.get(p))&&Oh(c,p),g=(n.ownerDocument||n).createElement("link"),Te(g);var x=g;return x._p=new Promise(function(_,N){x.onload=_,x.onerror=N}),je(g,"link",c),i.state.loading|=4,Ml(g,r.precedence,n),i.instance=g;case"script":return g=Sa(r.src),(p=n.querySelector(Br(g)))?(i.instance=p,Te(p),p):(c=r,(p=Rn.get(g))&&(c=y({},r),Ph(c,p)),n=n.ownerDocument||n,p=n.createElement("script"),Te(p),je(p,"link",c),n.head.appendChild(p),i.instance=p);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Ml(c,r.precedence,n));return i.instance}function Ml(n,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,g=p,x=0;x<c.length;x++){var _=c[x];if(_.dataset.precedence===i)g=_;else if(g!==p)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(n,i.firstChild))}function Oh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Ph(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Rl=null;function Xg(n,i,r){if(Rl===null){var c=new Map,p=Rl=new Map;p.set(r,c)}else p=Rl,c=p.get(r),c||(c=new Map,p.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),p=0;p<r.length;p++){var g=r[p];if(!(g[Ja]||g[ke]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(i)||"";x=n+x;var _=c.get(x);_?_.push(g):c.set(x,[g])}}return c}function Yg(n,i,r){n=n.ownerDocument||n,n.head.insertBefore(r,i==="title"?n.querySelector("head > title"):null)}function Ux(n,i,r){if(r===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function $g(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Hx(n,i,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Aa(c.href),g=i.querySelector(jr(p));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=Nl.bind(n),i.then(n,n)),r.state.loading|=4,r.instance=g,Te(g);return}g=i.ownerDocument||i,c=Vg(c),(p=Rn.get(p))&&Oh(c,p),g=g.createElement("link"),Te(g);var x=g;x._p=new Promise(function(_,N){x.onload=_,x.onerror=N}),je(g,"link",c),r.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=Nl.bind(n),i.addEventListener("load",r),i.addEventListener("error",r))}}var jh=0;function Gx(n,i){return n.stylesheets&&n.count===0&&kl(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var c=setTimeout(function(){if(n.stylesheets&&kl(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+i);0<n.imgBytes&&jh===0&&(jh=62500*wx());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&kl(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>jh?50:800)+i);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Nl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Dl=null;function kl(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Dl=new Map,i.forEach(Vx,n),Dl=null,Nl.call(n))}function Vx(n,i){if(!(i.state.loading&4)){var r=Dl.get(n);if(r)var c=r.get(null);else{r=new Map,Dl.set(n,r);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var x=p[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(r.set(x.dataset.precedence,x),c=x)}c&&r.set(null,c)}p=i.instance,x=p.getAttribute("data-precedence"),g=r.get(x)||c,g===c&&r.set(null,p),r.set(x,p),this.count++,c=Nl.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),g?g.parentNode.insertBefore(p,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),i.state.loading|=4}}var Fr={$$typeof:M,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function qx(n,i,r,c,p,g,x,_,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.hiddenUpdates=Dc(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Kg(n,i,r,c,p,g,x,_,N,U,$,Q){return n=new qx(n,i,r,x,N,U,$,Q,_),i=1,g===!0&&(i|=24),g=un(3,null,null,i),n.current=g,g.stateNode=n,i=mu(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:c,isDehydrated:r,cache:i},vu(g),n}function Wg(n){return n?(n=Js,n):Js}function Qg(n,i,r,c,p,g){p=Wg(p),c.context===null?c.context=p:c.pendingContext=p,c=zi(i),c.payload={element:r},g=g===void 0?null:g,g!==null&&(c.callback=g),r=Ii(n,c,i),r!==null&&(nn(r,n,i),gr(r,n,i))}function Zg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<i?r:i}}function Bh(n,i){Zg(n,i),(n=n.alternate)&&Zg(n,i)}function Jg(n){if(n.tag===13||n.tag===31){var i=fs(n,67108864);i!==null&&nn(i,n,67108864),Bh(n,67108864)}}function ty(n){if(n.tag===13||n.tag===31){var i=mn();i=kc(i);var r=fs(n,i);r!==null&&nn(r,n,i),Bh(n,i)}}var Ll=!0;function Xx(n,i,r,c){var p=L.T;L.T=null;var g=V.p;try{V.p=2,Fh(n,i,r,c)}finally{V.p=g,L.T=p}}function Yx(n,i,r,c){var p=L.T;L.T=null;var g=V.p;try{V.p=8,Fh(n,i,r,c)}finally{V.p=g,L.T=p}}function Fh(n,i,r,c){if(Ll){var p=zh(c);if(p===null)Eh(n,i,c,Ol,r),ny(n,c);else if(Kx(p,n,i,r,c))c.stopPropagation();else if(ny(n,c),i&4&&-1<$x.indexOf(n)){for(;p!==null;){var g=Hs(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=ls(g.pendingLanes);if(x!==0){var _=g;for(_.pendingLanes|=2,_.entangledLanes|=2;x;){var N=1<<31-ln(x);_.entanglements[1]|=N,x&=~N}Kn(g),(Ht&6)===0&&(gl=Ve()+500,kr(0))}}break;case 31:case 13:_=fs(g,2),_!==null&&nn(_,g,2),bl(),Bh(g,2)}if(g=zh(c),g===null&&Eh(n,i,c,Ol,r),g===p)break;p=g}p!==null&&c.stopPropagation()}else Eh(n,i,c,null,r)}}function zh(n){return n=Uc(n),Ih(n)}var Ol=null;function Ih(n){if(Ol=null,n=Us(n),n!==null){var i=o(n);if(i===null)n=null;else{var r=i.tag;if(r===13){if(n=l(i),n!==null)return n;n=null}else if(r===31){if(n=u(i),n!==null)return n;n=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Ol=n,null}function ey(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nc()){case wo:return 2;case Ln:return 8;case On:case qn:return 32;case zs:return 268435456;default:return 32}default:return 32}}var Uh=!1,Qi=null,Zi=null,Ji=null,zr=new Map,Ir=new Map,ts=[],$x="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ny(n,i){switch(n){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":zr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ir.delete(i.pointerId)}}function Ur(n,i,r,c,p,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},i!==null&&(i=Hs(i),i!==null&&Jg(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,p!==null&&i.indexOf(p)===-1&&i.push(p),n)}function Kx(n,i,r,c,p){switch(i){case"focusin":return Qi=Ur(Qi,n,i,r,c,p),!0;case"dragenter":return Zi=Ur(Zi,n,i,r,c,p),!0;case"mouseover":return Ji=Ur(Ji,n,i,r,c,p),!0;case"pointerover":var g=p.pointerId;return zr.set(g,Ur(zr.get(g)||null,n,i,r,c,p)),!0;case"gotpointercapture":return g=p.pointerId,Ir.set(g,Ur(Ir.get(g)||null,n,i,r,c,p)),!0}return!1}function iy(n){var i=Us(n.target);if(i!==null){var r=o(i);if(r!==null){if(i=r.tag,i===13){if(i=l(r),i!==null){n.blockedOn=i,yf(n.priority,function(){ty(r)});return}}else if(i===31){if(i=u(r),i!==null){n.blockedOn=i,yf(n.priority,function(){ty(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Pl(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var r=zh(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);Ic=c,r.target.dispatchEvent(c),Ic=null}else return i=Hs(r),i!==null&&Jg(i),n.blockedOn=r,!1;i.shift()}return!0}function sy(n,i,r){Pl(n)&&r.delete(i)}function Wx(){Uh=!1,Qi!==null&&Pl(Qi)&&(Qi=null),Zi!==null&&Pl(Zi)&&(Zi=null),Ji!==null&&Pl(Ji)&&(Ji=null),zr.forEach(sy),Ir.forEach(sy)}function jl(n,i){n.blockedOn===i&&(n.blockedOn=null,Uh||(Uh=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Wx)))}var Bl=null;function ay(n){Bl!==n&&(Bl=n,h.unstable_scheduleCallback(h.unstable_NormalPriority,function(){Bl===n&&(Bl=null);for(var i=0;i<n.length;i+=3){var r=n[i],c=n[i+1],p=n[i+2];if(typeof c!="function"){if(Ih(c||r)===null)continue;break}var g=Hs(r);g!==null&&(n.splice(i,3),i-=3,zu(g,{pending:!0,data:p,method:r.method,action:c},c,p))}}))}function wa(n){function i(N){return jl(N,n)}Qi!==null&&jl(Qi,n),Zi!==null&&jl(Zi,n),Ji!==null&&jl(Ji,n),zr.forEach(i),Ir.forEach(i);for(var r=0;r<ts.length;r++){var c=ts[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<ts.length&&(r=ts[0],r.blockedOn===null);)iy(r),r.blockedOn===null&&ts.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var p=r[c],g=r[c+1],x=p[We]||null;if(typeof g=="function")x||ay(r);else if(x){var _=null;if(g&&g.hasAttribute("formAction")){if(p=g,x=g[We]||null)_=x.formAction;else if(Ih(p)!==null)continue}else _=x.action;typeof _=="function"?r[c+1]=_:(r.splice(c,3),c-=3),ay(r)}}}function ry(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(x){return p=x})},focusReset:"manual",scroll:"manual"})}function i(){p!==null&&(p(),p=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),p!==null&&(p(),p=null)}}}function Hh(n){this._internalRoot=n}Fl.prototype.render=Hh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(s(409));var r=i.current,c=mn();Qg(r,c,n,i,null,null)},Fl.prototype.unmount=Hh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Qg(n.current,2,null,n,null,null),bl(),i[Is]=null}};function Fl(n){this._internalRoot=n}Fl.prototype.unstable_scheduleHydration=function(n){if(n){var i=gf();n={blockedOn:null,target:n,priority:i};for(var r=0;r<ts.length&&i!==0&&i<ts[r].priority;r++);ts.splice(r,0,n),r===0&&iy(n)}};var oy=t.version;if(oy!=="19.2.0")throw Error(s(527,oy,"19.2.0"));V.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=f(i),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var Qx={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{Wa=zl.inject(Qx),on=zl}catch{}}return Gr.createRoot=function(n,i){if(!a(n))throw Error(s(299));var r=!1,c="",p=pm,g=mm,x=gm;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(p=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(x=i.onRecoverableError)),i=Kg(n,1,!1,null,null,r,c,null,p,g,x,ry),n[Is]=i.current,wh(n),new Hh(i)},Gr.hydrateRoot=function(n,i,r){if(!a(n))throw Error(s(299));var c=!1,p="",g=pm,x=mm,_=gm,N=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(x=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.formState!==void 0&&(N=r.formState)),i=Kg(n,1,!0,i,r??null,c,p,N,g,x,_,ry),i.context=Wg(null),r=i.current,c=mn(),c=kc(c),p=zi(c),p.callback=null,Ii(r,p,c),r=c,i.current.lanes=r,Za(i,r),Kn(i),n[Is]=i.current,wh(n),new Fl(i)},Gr.version="19.2.0",Gr}var vy;function oA(){if(vy)return Xh.exports;vy=1;function h(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h)}catch(t){console.error(t)}}return h(),Xh.exports=rA(),Xh.exports}var lA=oA();const cA=h=>h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uA=h=>h.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,s)=>s?s.toUpperCase():e.toLowerCase()),xy=h=>{const t=uA(h);return t.charAt(0).toUpperCase()+t.slice(1)},Ab=(...h)=>h.filter((t,e,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===e).join(" ").trim(),hA=h=>{for(const t in h)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var dA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fA=R.forwardRef(({color:h="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:l,...u},d)=>R.createElement("svg",{ref:d,...dA,width:t,height:t,stroke:h,strokeWidth:s?Number(e)*24/Number(t):e,className:Ab("lucide",a),...!o&&!hA(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,m])=>R.createElement(f,m)),...Array.isArray(o)?o:[o]]));const Mt=(h,t)=>{const e=R.forwardRef(({className:s,...a},o)=>R.createElement(fA,{ref:o,iconNode:t,className:Ab(`lucide-${cA(xy(h))}`,`lucide-${h}`,s),...a}));return e.displayName=xy(h),e};const pA=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],mA=Mt("arrow-right-left",pA);const gA=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],yA=Mt("arrow-right",gA);const bA=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]],Sb=Mt("atom",bA);const vA=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],co=Mt("book-open",vA);const xA=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],AA=Mt("brain",xA);const SA=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],wA=Mt("chart-column",SA);const EA=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],CA=Mt("chevron-down",EA);const _A=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Td=Mt("chevron-right",_A);const TA=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Md=Mt("chevron-left",TA);const MA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],wb=Mt("circle-check",MA);const RA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Eb=Mt("circle-x",RA);const NA=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Cb=Mt("clipboard-list",NA);const DA=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_b=Mt("clock",DA);const kA=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Rd=Mt("download",kA);const LA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Zr=Mt("external-link",LA);const OA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Tb=Mt("file-question-mark",OA);const PA=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ls=Mt("file-text",PA);const jA=[["path",{d:"M15 2h-4a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"14sh0y"}],["path",{d:"M16.706 2.706A2.4 2.4 0 0 0 15 2v5a1 1 0 0 0 1 1h5a2.4 2.4 0 0 0-.706-1.706z",key:"1970lx"}],["path",{d:"M5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1",key:"l4dndm"}]],BA=Mt("files",jA);const FA=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],Mb=Mt("hard-drive",FA);const zA=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],IA=Mt("house",zA);const UA=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],HA=Mt("layers",UA);const GA=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ic=Mt("loader-circle",GA);const VA=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],qA=Mt("maximize-2",VA);const XA=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],YA=Mt("minimize-2",XA);const $A=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],KA=Mt("pen-tool",$A);const WA=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],QA=Mt("refresh-cw",WA);const ZA=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],JA=Mt("rocket",ZA);const tS=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Rb=Mt("rotate-cw",tS);const eS=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],nS=Mt("route",eS);const iS=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sS=Mt("settings",iS);const aS=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],rS=Mt("shuffle",aS);const oS=[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]],lS=Mt("sigma",oS);const cS=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],uS=Mt("target",cS);const hS=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Ay=Mt("trash-2",hS);const dS=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Sy=Mt("triangle-alert",dS);const fS=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pS=Mt("x",fS);const mS=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],gS=Mt("zoom-in",mS);const yS=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],bS=Mt("zap",yS);const vS=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],xS=Mt("zoom-out",vS);function Nb(h){var t,e,s="";if(typeof h=="string"||typeof h=="number")s+=h;else if(typeof h=="object")if(Array.isArray(h)){var a=h.length;for(t=0;t<a;t++)h[t]&&(e=Nb(h[t]))&&(s&&(s+=" "),s+=e)}else for(e in h)h[e]&&(s&&(s+=" "),s+=e);return s}function Va(){for(var h,t,e=0,s="",a=arguments.length;e<a;e++)(h=arguments[e])&&(t=Nb(h))&&(s&&(s+=" "),s+=t);return s}const AS=(h,t)=>{const e=new Array(h.length+t.length);for(let s=0;s<h.length;s++)e[s]=h[s];for(let s=0;s<t.length;s++)e[h.length+s]=t[s];return e},SS=(h,t)=>({classGroupId:h,validator:t}),Db=(h=new Map,t=null,e)=>({nextPart:h,validators:t,classGroupId:e}),sc="-",wy=[],wS="arbitrary..",ES=h=>{const t=_S(h),{conflictingClassGroups:e,conflictingClassGroupModifiers:s}=h;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return CS(l);const u=l.split(sc),d=u[0]===""&&u.length>1?1:0;return kb(u,d,t)},getConflictingClassGroupIds:(l,u)=>{if(u){const d=s[l],f=e[l];return d?f?AS(f,d):d:f||wy}return e[l]||wy}}},kb=(h,t,e)=>{if(h.length-t===0)return e.classGroupId;const a=h[t],o=e.nextPart.get(a);if(o){const f=kb(h,t+1,o);if(f)return f}const l=e.validators;if(l===null)return;const u=t===0?h.join(sc):h.slice(t).join(sc),d=l.length;for(let f=0;f<d;f++){const m=l[f];if(m.validator(u))return m.classGroupId}},CS=h=>h.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=h.slice(1,-1),e=t.indexOf(":"),s=t.slice(0,e);return s?wS+s:void 0})(),_S=h=>{const{theme:t,classGroups:e}=h;return TS(e,t)},TS=(h,t)=>{const e=Db();for(const s in h){const a=h[s];Nd(a,e,s,t)}return e},Nd=(h,t,e,s)=>{const a=h.length;for(let o=0;o<a;o++){const l=h[o];MS(l,t,e,s)}},MS=(h,t,e,s)=>{if(typeof h=="string"){RS(h,t,e);return}if(typeof h=="function"){NS(h,t,e,s);return}DS(h,t,e,s)},RS=(h,t,e)=>{const s=h===""?t:Lb(t,h);s.classGroupId=e},NS=(h,t,e,s)=>{if(kS(h)){Nd(h(s),t,e,s);return}t.validators===null&&(t.validators=[]),t.validators.push(SS(e,h))},DS=(h,t,e,s)=>{const a=Object.entries(h),o=a.length;for(let l=0;l<o;l++){const[u,d]=a[l];Nd(d,Lb(t,u),e,s)}},Lb=(h,t)=>{let e=h;const s=t.split(sc),a=s.length;for(let o=0;o<a;o++){const l=s[o];let u=e.nextPart.get(l);u||(u=Db(),e.nextPart.set(l,u)),e=u}return e},kS=h=>"isThemeGetter"in h&&h.isThemeGetter===!0,LS=h=>{if(h<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),s=Object.create(null);const a=(o,l)=>{e[o]=l,t++,t>h&&(t=0,s=e,e=Object.create(null))};return{get(o){let l=e[o];if(l!==void 0)return l;if((l=s[o])!==void 0)return a(o,l),l},set(o,l){o in e?e[o]=l:a(o,l)}}},ld="!",Ey=":",OS=[],Cy=(h,t,e,s,a)=>({modifiers:h,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:s,isExternal:a}),PS=h=>{const{prefix:t,experimentalParseClassName:e}=h;let s=a=>{const o=[];let l=0,u=0,d=0,f;const m=a.length;for(let S=0;S<m;S++){const E=a[S];if(l===0&&u===0){if(E===Ey){o.push(a.slice(d,S)),d=S+1;continue}if(E==="/"){f=S;continue}}E==="["?l++:E==="]"?l--:E==="("?u++:E===")"&&u--}const y=o.length===0?a:a.slice(d);let b=y,A=!1;y.endsWith(ld)?(b=y.slice(0,-1),A=!0):y.startsWith(ld)&&(b=y.slice(1),A=!0);const w=f&&f>d?f-d:void 0;return Cy(o,A,b,w)};if(t){const a=t+Ey,o=s;s=l=>l.startsWith(a)?o(l.slice(a.length)):Cy(OS,!1,l,void 0,!0)}if(e){const a=s;s=o=>e({className:o,parseClassName:a})}return s},jS=h=>{const t=new Map;return h.orderSensitiveModifiers.forEach((e,s)=>{t.set(e,1e6+s)}),e=>{const s=[];let a=[];for(let o=0;o<e.length;o++){const l=e[o],u=l[0]==="[",d=t.has(l);u||d?(a.length>0&&(a.sort(),s.push(...a),a=[]),s.push(l)):a.push(l)}return a.length>0&&(a.sort(),s.push(...a)),s}},BS=h=>({cache:LS(h.cacheSize),parseClassName:PS(h),sortModifiers:jS(h),...ES(h)}),FS=/\s+/,zS=(h,t)=>{const{parseClassName:e,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:o}=t,l=[],u=h.trim().split(FS);let d="";for(let f=u.length-1;f>=0;f-=1){const m=u[f],{isExternal:y,modifiers:b,hasImportantModifier:A,baseClassName:w,maybePostfixModifierPosition:S}=e(m);if(y){d=m+(d.length>0?" "+d:d);continue}let E=!!S,C=s(E?w.substring(0,S):w);if(!C){if(!E){d=m+(d.length>0?" "+d:d);continue}if(C=s(w),!C){d=m+(d.length>0?" "+d:d);continue}E=!1}const T=b.length===0?"":b.length===1?b[0]:o(b).join(":"),M=A?T+ld:T,D=M+C;if(l.indexOf(D)>-1)continue;l.push(D);const k=a(C,E);for(let F=0;F<k.length;++F){const B=k[F];l.push(M+B)}d=m+(d.length>0?" "+d:d)}return d},IS=(...h)=>{let t=0,e,s,a="";for(;t<h.length;)(e=h[t++])&&(s=Ob(e))&&(a&&(a+=" "),a+=s);return a},Ob=h=>{if(typeof h=="string")return h;let t,e="";for(let s=0;s<h.length;s++)h[s]&&(t=Ob(h[s]))&&(e&&(e+=" "),e+=t);return e},US=(h,...t)=>{let e,s,a,o;const l=d=>{const f=t.reduce((m,y)=>y(m),h());return e=BS(f),s=e.cache.get,a=e.cache.set,o=u,u(d)},u=d=>{const f=s(d);if(f)return f;const m=zS(d,e);return a(d,m),m};return o=l,(...d)=>o(IS(...d))},HS=[],we=h=>{const t=e=>e[h]||HS;return t.isThemeGetter=!0,t},Pb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,GS=/^\d+\/\d+$/,VS=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qS=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,XS=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,YS=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$S=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ea=h=>GS.test(h),Tt=h=>!!h&&!Number.isNaN(Number(h)),ns=h=>!!h&&Number.isInteger(Number(h)),Wh=h=>h.endsWith("%")&&Tt(h.slice(0,-1)),wi=h=>VS.test(h),KS=()=>!0,WS=h=>qS.test(h)&&!XS.test(h),Bb=()=>!1,QS=h=>YS.test(h),ZS=h=>$S.test(h),JS=h=>!rt(h)&&!ot(h),tw=h=>qa(h,Ib,Bb),rt=h=>Pb.test(h),_s=h=>qa(h,Ub,WS),Qh=h=>qa(h,aw,Tt),_y=h=>qa(h,Fb,Bb),ew=h=>qa(h,zb,ZS),Il=h=>qa(h,Hb,QS),ot=h=>jb.test(h),Vr=h=>Xa(h,Ub),nw=h=>Xa(h,rw),Ty=h=>Xa(h,Fb),iw=h=>Xa(h,Ib),sw=h=>Xa(h,zb),Ul=h=>Xa(h,Hb,!0),qa=(h,t,e)=>{const s=Pb.exec(h);return s?s[1]?t(s[1]):e(s[2]):!1},Xa=(h,t,e=!1)=>{const s=jb.exec(h);return s?s[1]?t(s[1]):e:!1},Fb=h=>h==="position"||h==="percentage",zb=h=>h==="image"||h==="url",Ib=h=>h==="length"||h==="size"||h==="bg-size",Ub=h=>h==="length",aw=h=>h==="number",rw=h=>h==="family-name",Hb=h=>h==="shadow",ow=()=>{const h=we("color"),t=we("font"),e=we("text"),s=we("font-weight"),a=we("tracking"),o=we("leading"),l=we("breakpoint"),u=we("container"),d=we("spacing"),f=we("radius"),m=we("shadow"),y=we("inset-shadow"),b=we("text-shadow"),A=we("drop-shadow"),w=we("blur"),S=we("perspective"),E=we("aspect"),C=we("ease"),T=we("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...D(),ot,rt],F=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto","contain","none"],P=()=>[ot,rt,d],H=()=>[Ea,"full","auto",...P()],Z=()=>[ns,"none","subgrid",ot,rt],J=()=>["auto",{span:["full",ns,ot,rt]},ns,ot,rt],ct=()=>[ns,"auto",ot,rt],dt=()=>["auto","min","max","fr",ot,rt],at=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ht=()=>["start","end","center","stretch","center-safe","end-safe"],L=()=>["auto",...P()],V=()=>[Ea,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],Y=()=>[h,ot,rt],pt=()=>[...D(),Ty,_y,{position:[ot,rt]}],vt=()=>["no-repeat",{repeat:["","x","y","space","round"]}],O=()=>["auto","cover","contain",iw,tw,{size:[ot,rt]}],q=()=>[Wh,Vr,_s],K=()=>["","none","full",f,ot,rt],tt=()=>["",Tt,Vr,_s],lt=()=>["solid","dashed","dotted","double"],ft=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],et=()=>[Tt,Wh,Ty,_y],Gt=()=>["","none",w,ot,rt],wt=()=>["none",Tt,ot,rt],jt=()=>["none",Tt,ot,rt],Ce=()=>[Tt,ot,rt],_e=()=>[Ea,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[wi],breakpoint:[wi],color:[KS],container:[wi],"drop-shadow":[wi],ease:["in","out","in-out"],font:[JS],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[wi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[wi],shadow:[wi],spacing:["px",Tt],text:[wi],"text-shadow":[wi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ea,rt,ot,E]}],container:["container"],columns:[{columns:[Tt,rt,ot,u]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:B()}],"overscroll-x":[{"overscroll-x":B()}],"overscroll-y":[{"overscroll-y":B()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:H()}],"inset-x":[{"inset-x":H()}],"inset-y":[{"inset-y":H()}],start:[{start:H()}],end:[{end:H()}],top:[{top:H()}],right:[{right:H()}],bottom:[{bottom:H()}],left:[{left:H()}],visibility:["visible","invisible","collapse"],z:[{z:[ns,"auto",ot,rt]}],basis:[{basis:[Ea,"full","auto",u,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Tt,Ea,"auto","initial","none",rt]}],grow:[{grow:["",Tt,ot,rt]}],shrink:[{shrink:["",Tt,ot,rt]}],order:[{order:[ns,"first","last","none",ot,rt]}],"grid-cols":[{"grid-cols":Z()}],"col-start-end":[{col:J()}],"col-start":[{"col-start":ct()}],"col-end":[{"col-end":ct()}],"grid-rows":[{"grid-rows":Z()}],"row-start-end":[{row:J()}],"row-start":[{"row-start":ct()}],"row-end":[{"row-end":ct()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":dt()}],"auto-rows":[{"auto-rows":dt()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...at(),"normal"]}],"justify-items":[{"justify-items":[...ht(),"normal"]}],"justify-self":[{"justify-self":["auto",...ht()]}],"align-content":[{content:["normal",...at()]}],"align-items":[{items:[...ht(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ht(),{baseline:["","last"]}]}],"place-content":[{"place-content":at()}],"place-items":[{"place-items":[...ht(),"baseline"]}],"place-self":[{"place-self":["auto",...ht()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:V()}],w:[{w:[u,"screen",...V()]}],"min-w":[{"min-w":[u,"screen","none",...V()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...V()]}],h:[{h:["screen","lh",...V()]}],"min-h":[{"min-h":["screen","lh","none",...V()]}],"max-h":[{"max-h":["screen","lh",...V()]}],"font-size":[{text:["base",e,Vr,_s]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ot,Qh]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Wh,rt]}],"font-family":[{font:[nw,rt,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ot,rt]}],"line-clamp":[{"line-clamp":[Tt,"none",ot,Qh]}],leading:[{leading:[o,...P()]}],"list-image":[{"list-image":["none",ot,rt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ot,rt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Y()}],"text-color":[{text:Y()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...lt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Tt,"from-font","auto",ot,_s]}],"text-decoration-color":[{decoration:Y()}],"underline-offset":[{"underline-offset":[Tt,"auto",ot,rt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot,rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot,rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pt()}],"bg-repeat":[{bg:vt()}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ns,ot,rt],radial:["",ot,rt],conic:[ns,ot,rt]},sw,ew]}],"bg-color":[{bg:Y()}],"gradient-from-pos":[{from:q()}],"gradient-via-pos":[{via:q()}],"gradient-to-pos":[{to:q()}],"gradient-from":[{from:Y()}],"gradient-via":[{via:Y()}],"gradient-to":[{to:Y()}],rounded:[{rounded:K()}],"rounded-s":[{"rounded-s":K()}],"rounded-e":[{"rounded-e":K()}],"rounded-t":[{"rounded-t":K()}],"rounded-r":[{"rounded-r":K()}],"rounded-b":[{"rounded-b":K()}],"rounded-l":[{"rounded-l":K()}],"rounded-ss":[{"rounded-ss":K()}],"rounded-se":[{"rounded-se":K()}],"rounded-ee":[{"rounded-ee":K()}],"rounded-es":[{"rounded-es":K()}],"rounded-tl":[{"rounded-tl":K()}],"rounded-tr":[{"rounded-tr":K()}],"rounded-br":[{"rounded-br":K()}],"rounded-bl":[{"rounded-bl":K()}],"border-w":[{border:tt()}],"border-w-x":[{"border-x":tt()}],"border-w-y":[{"border-y":tt()}],"border-w-s":[{"border-s":tt()}],"border-w-e":[{"border-e":tt()}],"border-w-t":[{"border-t":tt()}],"border-w-r":[{"border-r":tt()}],"border-w-b":[{"border-b":tt()}],"border-w-l":[{"border-l":tt()}],"divide-x":[{"divide-x":tt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":tt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...lt(),"hidden","none"]}],"divide-style":[{divide:[...lt(),"hidden","none"]}],"border-color":[{border:Y()}],"border-color-x":[{"border-x":Y()}],"border-color-y":[{"border-y":Y()}],"border-color-s":[{"border-s":Y()}],"border-color-e":[{"border-e":Y()}],"border-color-t":[{"border-t":Y()}],"border-color-r":[{"border-r":Y()}],"border-color-b":[{"border-b":Y()}],"border-color-l":[{"border-l":Y()}],"divide-color":[{divide:Y()}],"outline-style":[{outline:[...lt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Tt,ot,rt]}],"outline-w":[{outline:["",Tt,Vr,_s]}],"outline-color":[{outline:Y()}],shadow:[{shadow:["","none",m,Ul,Il]}],"shadow-color":[{shadow:Y()}],"inset-shadow":[{"inset-shadow":["none",y,Ul,Il]}],"inset-shadow-color":[{"inset-shadow":Y()}],"ring-w":[{ring:tt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Y()}],"ring-offset-w":[{"ring-offset":[Tt,_s]}],"ring-offset-color":[{"ring-offset":Y()}],"inset-ring-w":[{"inset-ring":tt()}],"inset-ring-color":[{"inset-ring":Y()}],"text-shadow":[{"text-shadow":["none",b,Ul,Il]}],"text-shadow-color":[{"text-shadow":Y()}],opacity:[{opacity:[Tt,ot,rt]}],"mix-blend":[{"mix-blend":[...ft(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ft()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":et()}],"mask-image-linear-to-pos":[{"mask-linear-to":et()}],"mask-image-linear-from-color":[{"mask-linear-from":Y()}],"mask-image-linear-to-color":[{"mask-linear-to":Y()}],"mask-image-t-from-pos":[{"mask-t-from":et()}],"mask-image-t-to-pos":[{"mask-t-to":et()}],"mask-image-t-from-color":[{"mask-t-from":Y()}],"mask-image-t-to-color":[{"mask-t-to":Y()}],"mask-image-r-from-pos":[{"mask-r-from":et()}],"mask-image-r-to-pos":[{"mask-r-to":et()}],"mask-image-r-from-color":[{"mask-r-from":Y()}],"mask-image-r-to-color":[{"mask-r-to":Y()}],"mask-image-b-from-pos":[{"mask-b-from":et()}],"mask-image-b-to-pos":[{"mask-b-to":et()}],"mask-image-b-from-color":[{"mask-b-from":Y()}],"mask-image-b-to-color":[{"mask-b-to":Y()}],"mask-image-l-from-pos":[{"mask-l-from":et()}],"mask-image-l-to-pos":[{"mask-l-to":et()}],"mask-image-l-from-color":[{"mask-l-from":Y()}],"mask-image-l-to-color":[{"mask-l-to":Y()}],"mask-image-x-from-pos":[{"mask-x-from":et()}],"mask-image-x-to-pos":[{"mask-x-to":et()}],"mask-image-x-from-color":[{"mask-x-from":Y()}],"mask-image-x-to-color":[{"mask-x-to":Y()}],"mask-image-y-from-pos":[{"mask-y-from":et()}],"mask-image-y-to-pos":[{"mask-y-to":et()}],"mask-image-y-from-color":[{"mask-y-from":Y()}],"mask-image-y-to-color":[{"mask-y-to":Y()}],"mask-image-radial":[{"mask-radial":[ot,rt]}],"mask-image-radial-from-pos":[{"mask-radial-from":et()}],"mask-image-radial-to-pos":[{"mask-radial-to":et()}],"mask-image-radial-from-color":[{"mask-radial-from":Y()}],"mask-image-radial-to-color":[{"mask-radial-to":Y()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[Tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":et()}],"mask-image-conic-to-pos":[{"mask-conic-to":et()}],"mask-image-conic-from-color":[{"mask-conic-from":Y()}],"mask-image-conic-to-color":[{"mask-conic-to":Y()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pt()}],"mask-repeat":[{mask:vt()}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ot,rt]}],filter:[{filter:["","none",ot,rt]}],blur:[{blur:Gt()}],brightness:[{brightness:[Tt,ot,rt]}],contrast:[{contrast:[Tt,ot,rt]}],"drop-shadow":[{"drop-shadow":["","none",A,Ul,Il]}],"drop-shadow-color":[{"drop-shadow":Y()}],grayscale:[{grayscale:["",Tt,ot,rt]}],"hue-rotate":[{"hue-rotate":[Tt,ot,rt]}],invert:[{invert:["",Tt,ot,rt]}],saturate:[{saturate:[Tt,ot,rt]}],sepia:[{sepia:["",Tt,ot,rt]}],"backdrop-filter":[{"backdrop-filter":["","none",ot,rt]}],"backdrop-blur":[{"backdrop-blur":Gt()}],"backdrop-brightness":[{"backdrop-brightness":[Tt,ot,rt]}],"backdrop-contrast":[{"backdrop-contrast":[Tt,ot,rt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Tt,ot,rt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Tt,ot,rt]}],"backdrop-invert":[{"backdrop-invert":["",Tt,ot,rt]}],"backdrop-opacity":[{"backdrop-opacity":[Tt,ot,rt]}],"backdrop-saturate":[{"backdrop-saturate":[Tt,ot,rt]}],"backdrop-sepia":[{"backdrop-sepia":["",Tt,ot,rt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ot,rt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Tt,"initial",ot,rt]}],ease:[{ease:["linear","initial",C,ot,rt]}],delay:[{delay:[Tt,ot,rt]}],animate:[{animate:["none",T,ot,rt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[S,ot,rt]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:wt()}],"rotate-x":[{"rotate-x":wt()}],"rotate-y":[{"rotate-y":wt()}],"rotate-z":[{"rotate-z":wt()}],scale:[{scale:jt()}],"scale-x":[{"scale-x":jt()}],"scale-y":[{"scale-y":jt()}],"scale-z":[{"scale-z":jt()}],"scale-3d":["scale-3d"],skew:[{skew:Ce()}],"skew-x":[{"skew-x":Ce()}],"skew-y":[{"skew-y":Ce()}],transform:[{transform:[ot,rt,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:_e()}],"translate-x":[{"translate-x":_e()}],"translate-y":[{"translate-y":_e()}],"translate-z":[{"translate-z":_e()}],"translate-none":["translate-none"],accent:[{accent:Y()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Y()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot,rt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot,rt]}],fill:[{fill:["none",...Y()]}],"stroke-w":[{stroke:[Tt,Vr,_s,Qh]}],stroke:[{stroke:["none",...Y()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},lw=US(ow);function ze(...h){return lw(Va(h))}const cw=[{id:"home",label:"Home",icon:IA},{id:"chapter0",label:"Ch 0: Math",icon:lS},{id:"chapter1",label:"Ch 1: Kinematics",icon:nS},{id:"chapter2",label:"Ch 2: Dynamics",icon:JA},{id:"chapter3",label:"Ch 3: Energy",icon:bS},{id:"chapter4",label:"Ch 4: Momentum",icon:mA},{id:"chapter5",label:"Ch 5: Rotation",icon:Rb},{id:"flashcards",label:"Flashcards",icon:HA},{id:"exams",label:"Past Exams",icon:Ls},{id:"pdfs",label:"All PDFs",icon:BA},{id:"settings",label:"Settings",icon:sS}];function uw({currentPage:h,onNavigate:t,isOpen:e,onToggle:s}){return v.jsxs("aside",{className:ze("fixed left-0 top-0 h-full bg-card border-r border-border transition-all duration-300 z-50 flex flex-col",e?"w-64":"w-16"),children:[v.jsxs("div",{className:"p-4 border-b border-border flex items-center gap-3",children:[v.jsx(Sb,{className:"w-8 h-8 text-primary shrink-0"}),e&&v.jsxs("div",{children:[v.jsx("h1",{className:"font-bold text-lg",children:"P1100"}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Classical Mechanics"})]})]}),v.jsx("nav",{className:"flex-1 p-2 overflow-y-auto",children:v.jsx("ul",{className:"space-y-1",children:cw.map(a=>{const o=a.icon,l=h===a.id;return v.jsx("li",{children:v.jsxs("button",{onClick:()=>t(a.id),className:ze("w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors text-left",l?"bg-primary text-primary-foreground":"hover:bg-accent text-muted-foreground hover:text-foreground"),children:[v.jsx(o,{className:"w-5 h-5 shrink-0"}),e&&v.jsx("span",{className:"text-sm font-medium",children:a.label})]})},a.id)})})}),v.jsxs("div",{className:"p-4 border-t border-border",children:[e&&v.jsxs("div",{className:"text-xs text-muted-foreground mb-2",children:[v.jsx("p",{children:"Lebanese University"}),v.jsx("p",{children:"Faculty of Sciences, B3"})]}),v.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center gap-2 py-2 rounded-lg hover:bg-accent transition-colors text-muted-foreground hover:text-foreground",children:[e?v.jsx(Md,{className:"w-5 h-5"}):v.jsx(Td,{className:"w-5 h-5"}),e&&v.jsx("span",{className:"text-sm",children:"Collapse"})]})]})]})}const Ee=R.forwardRef(({className:h,...t},e)=>v.jsx("div",{ref:e,className:ze("rounded-xl border border-border bg-card text-card-foreground shadow",h),...t}));Ee.displayName="Card";const Ye=R.forwardRef(({className:h,...t},e)=>v.jsx("div",{ref:e,className:ze("flex flex-col space-y-1.5 p-6",h),...t}));Ye.displayName="CardHeader";const $e=R.forwardRef(({className:h,...t},e)=>v.jsx("div",{ref:e,className:ze("font-semibold leading-none tracking-tight",h),...t}));$e.displayName="CardTitle";const In=R.forwardRef(({className:h,...t},e)=>v.jsx("div",{ref:e,className:ze("text-sm text-muted-foreground",h),...t}));In.displayName="CardDescription";const He=R.forwardRef(({className:h,...t},e)=>v.jsx("div",{ref:e,className:ze("p-6 pt-0",h),...t}));He.displayName="CardContent";const hw=R.forwardRef(({className:h,...t},e)=>v.jsx("div",{ref:e,className:ze("flex items-center p-6 pt-0",h),...t}));hw.displayName="CardFooter";function My(h,t){if(typeof h=="function")return h(t);h!=null&&(h.current=t)}function fc(...h){return t=>{let e=!1;const s=h.map(a=>{const o=My(a,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():My(h[a],null)}}}}function Ia(...h){return R.useCallback(fc(...h),h)}var dw=Symbol.for("react.lazy"),ac=_d[" use ".trim().toString()];function fw(h){return typeof h=="object"&&h!==null&&"then"in h}function Gb(h){return h!=null&&typeof h=="object"&&"$$typeof"in h&&h.$$typeof===dw&&"_payload"in h&&fw(h._payload)}function Vb(h){const t=mw(h),e=R.forwardRef((s,a)=>{let{children:o,...l}=s;Gb(o)&&typeof ac=="function"&&(o=ac(o._payload));const u=R.Children.toArray(o),d=u.find(yw);if(d){const f=d.props.children,m=u.map(y=>y===d?R.Children.count(f)>1?R.Children.only(null):R.isValidElement(f)?f.props.children:null:y);return v.jsx(t,{...l,ref:a,children:R.isValidElement(f)?R.cloneElement(f,void 0,m):null})}return v.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${h}.Slot`,e}var pw=Vb("Slot");function mw(h){const t=R.forwardRef((e,s)=>{let{children:a,...o}=e;if(Gb(a)&&typeof ac=="function"&&(a=ac(a._payload)),R.isValidElement(a)){const l=vw(a),u=bw(o,a.props);return a.type!==R.Fragment&&(u.ref=s?fc(s,l):l),R.cloneElement(a,u)}return R.Children.count(a)>1?R.Children.only(null):null});return t.displayName=`${h}.SlotClone`,t}var gw=Symbol("radix.slottable");function yw(h){return R.isValidElement(h)&&typeof h.type=="function"&&"__radixId"in h.type&&h.type.__radixId===gw}function bw(h,t){const e={...t};for(const s in t){const a=h[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?e[s]=(...u)=>{const d=o(...u);return a(...u),d}:a&&(e[s]=a):s==="style"?e[s]={...a,...o}:s==="className"&&(e[s]=[a,o].filter(Boolean).join(" "))}return{...h,...e}}function vw(h){let t=Object.getOwnPropertyDescriptor(h.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?h.ref:(t=Object.getOwnPropertyDescriptor(h,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?h.props.ref:h.props.ref||h.ref)}const Ry=h=>typeof h=="boolean"?`${h}`:h===0?"0":h,Ny=Va,xw=(h,t)=>e=>{var s;if(t?.variants==null)return Ny(h,e?.class,e?.className);const{variants:a,defaultVariants:o}=t,l=Object.keys(a).map(f=>{const m=e?.[f],y=o?.[f];if(m===null)return null;const b=Ry(m)||Ry(y);return a[f][b]}),u=e&&Object.entries(e).reduce((f,m)=>{let[y,b]=m;return b===void 0||(f[y]=b),f},{}),d=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((f,m)=>{let{class:y,className:b,...A}=m;return Object.entries(A).every(w=>{let[S,E]=w;return Array.isArray(E)?E.includes({...o,...u}[S]):{...o,...u}[S]===E})?[...f,y,b]:f},[]);return Ny(h,l,d,e?.class,e?.className)},Aw=xw("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Ut=R.forwardRef(({className:h,variant:t,size:e,asChild:s=!1,...a},o)=>{const l=s?pw:"button";return v.jsx(l,{className:ze(Aw({variant:t,size:e,className:h})),ref:o,...a})});Ut.displayName="Button";function Sw(h,t=[]){let e=[];function s(o,l){const u=R.createContext(l);u.displayName=o+"Context";const d=e.length;e=[...e,l];const f=y=>{const{scope:b,children:A,...w}=y,S=b?.[h]?.[d]||u,E=R.useMemo(()=>w,Object.values(w));return v.jsx(S.Provider,{value:E,children:A})};f.displayName=o+"Provider";function m(y,b){const A=b?.[h]?.[d]||u,w=R.useContext(A);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[f,m]}const a=()=>{const o=e.map(l=>R.createContext(l));return function(u){const d=u?.[h]||o;return R.useMemo(()=>({[`__scope${h}`]:{...u,[h]:d}}),[u,d])}};return a.scopeName=h,[s,ww(a,...t)]}function ww(...h){const t=h[0];if(h.length===1)return t;const e=()=>{const s=h.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=s.reduce((u,{useScope:d,scopeName:f})=>{const y=d(o)[`__scope${f}`];return{...u,...y}},{});return R.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return e.scopeName=t.scopeName,e}xb();var Ew=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qb=Ew.reduce((h,t)=>{const e=Vb(`Primitive.${t}`),s=R.forwardRef((a,o)=>{const{asChild:l,...u}=a,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return s.displayName=`Primitive.${t}`,{...h,[t]:s}},{}),Dd="Progress",kd=100,[Cw]=Sw(Dd),[_w,Tw]=Cw(Dd),Xb=R.forwardRef((h,t)=>{const{__scopeProgress:e,value:s=null,max:a,getValueLabel:o=Mw,...l}=h;(a||a===0)&&!Dy(a)&&console.error(Rw(`${a}`,"Progress"));const u=Dy(a)?a:kd;s!==null&&!ky(s,u)&&console.error(Nw(`${s}`,"Progress"));const d=ky(s,u)?s:null,f=rc(d)?o(d,u):void 0;return v.jsx(_w,{scope:e,value:d,max:u,children:v.jsx(qb.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":rc(d)?d:void 0,"aria-valuetext":f,role:"progressbar","data-state":Kb(d,u),"data-value":d??void 0,"data-max":u,...l,ref:t})})});Xb.displayName=Dd;var Yb="ProgressIndicator",$b=R.forwardRef((h,t)=>{const{__scopeProgress:e,...s}=h,a=Tw(Yb,e);return v.jsx(qb.div,{"data-state":Kb(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});$b.displayName=Yb;function Mw(h,t){return`${Math.round(h/t*100)}%`}function Kb(h,t){return h==null?"indeterminate":h===t?"complete":"loading"}function rc(h){return typeof h=="number"}function Dy(h){return rc(h)&&!isNaN(h)&&h>0}function ky(h,t){return rc(h)&&!isNaN(h)&&h<=t&&h>=0}function Rw(h,t){return`Invalid prop \`max\` of value \`${h}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${kd}\`.`}function Nw(h,t){return`Invalid prop \`value\` of value \`${h}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${kd} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Wb=Xb,Dw=$b;const eo=R.forwardRef(({className:h,value:t,...e},s)=>v.jsx(Wb,{ref:s,className:ze("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",h),...e,children:v.jsx(Dw,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));eo.displayName=Wb.displayName;const Ra=[{id:"chapter0",number:0,title:"Mathematical Foundations",icon:"Sigma",description:"Essential mathematical tools for mechanics",pdfs:["Chap 0 - Mathematical Notions.pdf"],topics:[{id:"ch0-t1",title:"Scalar and Vector Quantities",content:"Scalar quantities are defined by magnitude only (mass, length, time, power, energy). Vector quantities require both magnitude and direction, represented by arrows. Vectors have four characteristics: point of application, line of application, direction, and magnitude. Examples: Position, Velocity, Acceleration, Momentum, Force.",pdfRef:{file:"Chap 0 - Mathematical Notions.pdf",page:4}},{id:"ch0-t2",title:"Vector Addition",content:"Vectors are added using the head-to-tail method. Place the tail of the second vector at the head of the first. The resultant vector goes from the tail of the first to the head of the last.",pdfRef:{file:"Chap 0 - Mathematical Notions.pdf",page:5}},{id:"ch0-t3",title:"Scalar Product (Dot Product)",content:"The scalar product of two vectors gives a scalar value. AB = |A||B|cos(). In orthonormal coordinates: AB = AxBx + AyBy + AzBz. Geometrical meaning: projection of one vector onto another.",formulas:["AB = |A||B|cos()","AB = AxBx + AyBy + AzBz"],pdfRef:{file:"Chap 0 - Mathematical Notions.pdf",page:9}},{id:"ch0-t4",title:"Vector Product (Cross Product)",content:"The cross product of two vectors produces a vector perpendicular to both. Use the right-hand rule to determine direction. |AB| = |A||B|sin(). The result is perpendicular to the plane containing A and B.",formulas:["|AB| = |A||B|sin()"],pdfRef:{file:"Chap 0 - Mathematical Notions.pdf",page:11}},{id:"ch0-t5",title:"Derivatives in Physics",content:"Derivative shows rate of change. If f'0, f is increasing. If f'<0, f is decreasing. f'(x) represents the slope of the tangent line at any point x. Essential for velocity (dr/dt) and acceleration (dv/dt).",pdfRef:{file:"Chap 0 - Mathematical Notions.pdf",page:15}},{id:"ch0-t6",title:"Integration",content:"Integration calculates the area under a curve. Used to find displacement from velocity, work from force, etc. Reverse operation of differentiation.",pdfRef:{file:"Chap 0 - Mathematical Notions.pdf",page:17}}],exercises:[]},{id:"chapter1",number:1,title:"Kinematics",icon:"Route",description:"Study of motion without considering forces",pdfs:["ch 1-Lecture 1.pdf","ch 1-Lecture 2.pdf","ch 1-Lecture 3.pdf","ch 1-Lecture 4.pdf","Chap 1 - Tutorial.pdf","P1100 -Tutorial Chap 1 - Given.pdf"],topics:[{id:"ch1-t1",title:"Introduction to Mechanics",content:"Mechanics describes and explains motion based on experimental results. Kinematics studies motion without knowing the cause. Dynamics studies motion and understands the cause (forces). A body can be treated as a material point if its dimensions are very small compared to other lengths involved.",pdfRef:{file:"ch 1-Lecture 1.pdf",page:3}},{id:"ch1-t2",title:"Units and Dimensions",content:"Fundamental quantities: Length (L), Mass (M), Time (T). Force: F = MLT. Pressure: P = MLT. Work/Energy: W = MLT. Power: P = MLT.",formulas:["F = MLT","P = MLT","1N = 10 dyn"],pdfRef:{file:"ch 1-Lecture 1.pdf",page:5}},{id:"ch1-t3",title:"Position, Velocity, and Acceleration in Cartesian Coordinates",content:"Position vector: r(t) = x(t) + y(t) + z(t)k. Velocity: v = dr/dt =  +  + k (tangent to trajectory). Acceleration: a = dv/dt =  +  + zk.",formulas:["r = x + y + zk","v = dr/dt","a = dv/dt = dr/dt"],pdfRef:{file:"ch 1-Lecture 1.pdf",page:8}},{id:"ch1-t4",title:"Rectilinear Motion",content:"Uniform motion: v = constant, x = vt + x. Uniformly accelerated: a = constant, v = at + v, x = at + vt + x. For erratic motion: use vdv = ads.",formulas:["x = vt + x","v = at + v","x = at + vt + x","vdv = ads"],pdfRef:{file:"ch 1-Lecture 1.pdf",page:11}},{id:"ch1-t5",title:"Projectile Motion",content:"2D motion with constant gravity. Along x: a=0, v=vcos, x=vt+x. Along y: a=-g, v=-gt+vsin, y=-gt+vsint+y. Maximum height: h = vsin/(2g). Range: R = vsin(2)/g.",formulas:["h = vsin/(2g)","R = vsin(2)/g","y = -gx/(2vcos) + tanx + y"],pdfRef:{file:"ch 1-Lecture 1.pdf",page:13}},{id:"ch1-t6",title:"Cylindrical Coordinates",content:"Coordinates: (, , z). Position: r =  + zk. Velocity: v = ' + ' + z'k. Acceleration: a = ('' - ') + ('' + 2'') + z''k.",formulas:["v = ' + ' + z'k","a = '' - '","a = '' + 2''"],pdfRef:{file:"ch 1-Lecture 2.pdf",page:4}},{id:"ch1-t7",title:"Polar Coordinates (2D)",content:"Special case of cylindrical with z=0. Position: r = . Radial velocity v = '. Orthoradial velocity v = '. Radial acceleration a = '' - '. Orthoradial acceleration a = '' + 2''.",formulas:["v = (' + ('))","tan = '/'"],pdfRef:{file:"ch 1-Lecture 2.pdf",page:7}},{id:"ch1-t8",title:"Tangential and Normal Acceleration",content:"a = a + an. Tangential: a = dv/dt (changes speed). Normal: a = v/ (changes direction). Radius of curvature:  = [1+(dy/dx)]^(3/2) / |dy/dx|.",formulas:["a = dv/dt","a = v/","a = (a + a)"],pdfRef:{file:"ch 1-Lecture 3.pdf",page:2}},{id:"ch1-t9",title:"Circular Motion",content:"r = constant. v = r = r. a = r (tangential). a = r (centripetal). Period T = 2/. For uniform circular motion: a = 0, only centripetal acceleration.",formulas:["v = r","a = r","a = r = v/r","T = 2/"],pdfRef:{file:"ch 1-Lecture 3.pdf",page:5}},{id:"ch1-t10",title:"Change of Reference Frames",content:"Absolute velocity: v = v + v (driving + relative). Absolute acceleration: a = a + a + a (driving + relative + Coriolis). Coriolis acceleration: a = 2v.",formulas:["v = v + v","a = a + a + 2v"],pdfRef:{file:"ch 1-Lecture 4.pdf",page:2}}],exercises:[{id:"ch1-ex1",title:"Dimensional Analysis",problem:"The acceleration of a particle is given by a = kV^(n+1)/r^n where k is a constant and n is an integer. Find the dimension of k.",pdfRef:{file:"P1100 -Tutorial Chap 1 - Given.pdf",page:1}},{id:"ch1-ex5",title:"Velocity and Acceleration Vectors",problem:"The parametric equations for a particle: x=3t, y=4t+2, z=6t-8. Determine at t=2s: a) velocity and acceleration vectors, b) direction cosines of the tangent.",pdfRef:{file:"P1100 -Tutorial Chap 1 - Given.pdf",page:2}},{id:"ch1-ex6",title:"Projectile from Building",problem:"A ball is thrown upward from a 45m building at 30 with initial speed 20 m/s. Find: a) time to hit ground, b) speed at impact, c) horizontal distance.",pdfRef:{file:"P1100 -Tutorial Chap 1 - Given.pdf",page:2}},{id:"ch1-ex7",title:"Motorcycle Jump",problem:"A motorbike rider at 35 m/s jumps off a 30 ramp. Find the height h of ramp B needed for safe landing.",pdfRef:{file:"P1100 -Tutorial Chap 1 - Given.pdf",page:2}}]},{id:"chapter2",number:2,title:"Dynamics",icon:"Rocket",description:"Force, acceleration, and Newton's laws",pdfs:["P1100 - Chap 2 - Dynamics.pdf","P1100 -Tutorial Chap 2 - Given.pdf","P1100-TUTORIAL CHAP 2-given.pdf"],topics:[{id:"ch2-t1",title:"Newton's First Law (Inertia)",content:"An isolated object (no external forces) remains at rest or moves with uniform rectilinear motion. When F = 0, v = constant. This is called inertial motion.",pdfRef:{file:"P1100 - Chap 2 - Dynamics.pdf",page:4}},{id:"ch2-t2",title:"Newton's Second Law",content:"F = ma. The fundamental law of dynamics. Force causes acceleration proportional to mass. Mass is a measure of resistance to acceleration.",formulas:["F = ma"],pdfRef:{file:"P1100 - Chap 2 - Dynamics.pdf",page:5}},{id:"ch2-t3",title:"Newton's Third Law (Action-Reaction)",content:"For every action, there is an equal and opposite reaction. F = -F. Forces always come in pairs acting on different objects.",formulas:["F = -F"],pdfRef:{file:"P1100 - Chap 2 - Dynamics.pdf",page:5}},{id:"ch2-t4",title:"Types of Forces",content:"Contact forces: friction, normal force, tension, spring force. Forces at distance: gravitational (F = GMm/r), electromagnetic, nuclear forces.",formulas:["F = GMm/r"],pdfRef:{file:"P1100 - Chap 2 - Dynamics.pdf",page:6}},{id:"ch2-t5",title:"Friction Forces",content:"Static friction: f  N prevents motion. Kinetic friction: f = N opposes motion ( < ). Object starts moving when applied force exceeds f = N.",formulas:["f = N","f = N"],pdfRef:{file:"P1100 - Chap 2 - Dynamics.pdf",page:8}},{id:"ch2-t6",title:"Universal Gravitation",content:"Two masses attract with force F = GMm/r. G = 6.6710 Nm/kg. For satellites: orbital velocity v = (GM/r), period T = 2(r/GM).",formulas:["F = GMm/r","v = (GM/r)","T = 2(r/GM)"],pdfRef:{file:"P1100 - Chap 2 - Dynamics.pdf",page:17}},{id:"ch2-t7",title:"Orbital Mechanics",content:"Trajectories are conics. Eccentricity e determines shape: e=0 circle, 0<e<1 ellipse, e=1 parabola, e>1 hyperbola. Escape velocity: v = (2GM/R). Conservation of energy and angular momentum.",formulas:["v = (2GM/R)","E = -GMm/(2a)","r/r = (1+e)/(1-e)"],pdfRef:{file:"P1100 - Chap 2 - Dynamics.pdf",page:20}},{id:"ch2-t8",title:"Fictitious Forces",content:"In non-inertial frames, add fictitious forces. Inertial force: -ma. Coriolis force: -2mv. Centrifugal force: -m(r).",formulas:["f = F - ma - 2mv"],pdfRef:{file:"P1100 - Chap 2 - Dynamics.pdf",page:26}}],exercises:[{id:"ch2-ex1",title:"Elevator Problem",problem:"An elevator (500kg) with weight (150kg) reaches 10 m/s after ascending 40m. Calculate the force at point B.",pdfRef:{file:"P1100 -Tutorial Chap 2 - Given.pdf",page:1}},{id:"ch2-ex4",title:"Parachutist with Air Resistance",problem:"Calculate the speed of a parachutist falling with air resistance f = kv. Deduce the terminal velocity.",pdfRef:{file:"P1100 -Tutorial Chap 2 - Given.pdf",page:2}},{id:"ch2-ex6",title:"Two Forces Problem",problem:"Two forces F=800N and F=1500N are applied to M=100kg body. Find distance to reach v=6m/s. Friction coefficient =0.2.",pdfRef:{file:"P1100 -Tutorial Chap 2 - Given.pdf",page:3}},{id:"ch2-ex13",title:"Circular Motion with Hanging Mass",problem:"Mass m moves in circle of radius R with angular speed  on frictionless table, connected to m through a hole. Find  for m to remain stationary.",pdfRef:{file:"P1100 -Tutorial Chap 2 - Given.pdf",page:4}}]},{id:"chapter3",number:3,title:"Work and Energy",icon:"Zap",description:"Energy conservation and work-energy theorem",pdfs:["P1100 - Tutorial Chap 3 - Given- 2024-2025.pdf","P 1100 - Applications - chap 3.pdf"],topics:[{id:"ch3-t1",title:"Work of a Force",content:"Work W = Fdr. For constant force: W = Fd = Fdcos. Work by gravity: W = -mgh. Work by spring: W = -k(x - x).",formulas:["W = Fdr","W = Fdcos","Wgravity = -mgh"],pdfRef:{file:"P 1100 - Applications - chap 3.pdf",page:4}},{id:"ch3-t2",title:"Power",content:"Power is rate of doing work. P = dW/dt = Fv. Unit: Watt (W) = J/s.",formulas:["P = dW/dt = Fv"],pdfRef:{file:"P 1100 - Applications - chap 3.pdf",page:2}},{id:"ch3-t3",title:"Kinetic Energy",content:"Energy of motion: KE = mv. Work-Energy Theorem: W = KE = mv - mv.",formulas:["KE = mv","W = KE"],pdfRef:{file:"P 1100 - Applications - chap 3.pdf",page:3}},{id:"ch3-t4",title:"Potential Energy",content:"Gravitational PE: U = mgh. Spring PE: U = kx. For central force F = -C/r: U = -C/r.",formulas:["U = mgh","U = kx","U = -GMm/r"],pdfRef:{file:"P 1100 - Applications - chap 3.pdf",page:5}},{id:"ch3-t5",title:"Conservation of Mechanical Energy",content:"For conservative forces: E = KE + PE = constant. Energy is conserved when no non-conservative forces do work.",formulas:["E = KE + PE = constant","mv + U = mv + U"],pdfRef:{file:"P 1100 - Applications - chap 3.pdf",page:10}},{id:"ch3-t6",title:"Conservative Forces",content:"A force is conservative if work is path-independent, or if Fdr = 0. Derives from potential: F = -U. Gravity and spring forces are conservative; friction is not.",formulas:["F = -U","Fdr = 0"],pdfRef:{file:"P 1100 - Applications - chap 3.pdf",page:9}}],exercises:[{id:"ch3-ex1",title:"Elevator Work",problem:"A 70kg man descends in elevator with a=4m/s. Elevator starts from rest, travels 6m. Calculate work by weight and normal reaction.",pdfRef:{file:"P1100 - Tutorial Chap 3 - Given- 2024-2025.pdf",page:1}},{id:"ch3-ex2",title:"Braking Distance",problem:"A truck at 40 km/h stops after 3m. Over what distance will it stop if speed is 80 km/h?",pdfRef:{file:"P1100 - Tutorial Chap 3 - Given- 2024-2025.pdf",page:1}},{id:"ch3-ex4",title:"Spring Compression",problem:"Object m=1kg slides on 30 incline (d=1m) to spring (K=50N/m). Find velocity before spring and max compression using energy conservation.",pdfRef:{file:"P1100 - Tutorial Chap 3 - Given- 2024-2025.pdf",page:1}},{id:"ch3-ex7",title:"Boy on Ice Mound",problem:"Boy slides down frictionless hemispherical ice mound (R=13.8m). At what height does he lose contact?",pdfRef:{file:"P1100 - Tutorial Chap 3 - Given- 2024-2025.pdf",page:2}}]},{id:"chapter4",number:4,title:"Linear Momentum",icon:"ArrowRightLeft",description:"Momentum, impulse, and collisions",pdfs:["P1100 - Tutorial Chap 4 - Given- 2025-2026.pdf","P1100 - Tutorial Chap 4 - Given.pdf","P 1100 - Applications - chap 4.pdf"],topics:[{id:"ch4-t1",title:"Linear Momentum",content:"Momentum: p = mv. Newton's 2nd law: F = dp/dt. For constant mass: F = ma.",formulas:["p = mv","F = dp/dt"],pdfRef:{file:"P 1100 - Applications - chap 4.pdf",page:1}},{id:"ch4-t2",title:"Impulse",content:"Impulse: J = Fdt = p. For constant force: J = Ft. Impulse equals change in momentum.",formulas:["J = Fdt = p","J = Ft"],pdfRef:{file:"P 1100 - Applications - chap 4.pdf",page:4}},{id:"ch4-t3",title:"Conservation of Momentum",content:"For isolated system (no external forces): p = constant. Total momentum before = total momentum after collision.",formulas:["p = pf"],pdfRef:{file:"P 1100 - Applications - chap 4.pdf",page:6}},{id:"ch4-t4",title:"Center of Mass",content:"Position: Rcm = mr/m. Velocity: Vcm = mv/m. Total momentum: P = MVcm.",formulas:["Rcm = mr/M","Vcm = mv/M"],pdfRef:{file:"P 1100 - Applications - chap 4.pdf",page:2}},{id:"ch4-t5",title:"Elastic Collisions",content:"Both momentum and kinetic energy conserved. Coefficient of restitution e = 1. Relative velocity reverses: v'-v' = -(v-v).",formulas:["e = |v'-v'|/|v-v| = 1"],pdfRef:{file:"P 1100 - Applications - chap 4.pdf",page:7}},{id:"ch4-t6",title:"Inelastic Collisions",content:"Momentum conserved, kinetic energy NOT conserved. Perfectly inelastic: objects stick together (e = 0). Energy lost to deformation, heat.",formulas:["e = |v'-v'|/|v-v|","0  e  1"],pdfRef:{file:"P 1100 - Applications - chap 4.pdf",page:7}},{id:"ch4-t7",title:"Angular Momentum",content:"L = r  p = r  mv. Torque:  = dL/dt. For central forces: L = constant (conservation of angular momentum).",formulas:["L = r  mv"," = dL/dt"],pdfRef:{file:"P 1100 - Applications - chap 4.pdf",page:8}}],exercises:[{id:"ch4-ex1",title:"Ball Kick Impulse",problem:"A player kicks a 200g ball. Ball leaves at =30 and lands after d=15m. Find the impulse on the ball.",pdfRef:{file:"P1100 - Tutorial Chap 4 - Given.pdf",page:1}},{id:"ch4-ex4",title:"Inelastic Collision",problem:"A 200g ball strikes a stationary 1800g block at v=30m/s and sticks. Find: a) height block rises, b) energy loss.",pdfRef:{file:"P1100 - Tutorial Chap 4 - Given.pdf",page:1}},{id:"ch4-ex7",title:"Three Ball Collision",problem:"Three balls of mass m. A hits B (at rest) with velocity v. B then hits C. Find velocities and energy loss for restitution coefficient e.",pdfRef:{file:"P1100 - Tutorial Chap 4 - Given.pdf",page:2}}]},{id:"chapter5",number:5,title:"Rotational Dynamics",icon:"RotateCw",description:"Rotation of solid bodies and moment of inertia",pdfs:["P1100 - Tutorial Chap 5 - Given.pdf"],topics:[{id:"ch5-t1",title:"Moment of Inertia",content:"I = mr (for point masses). For continuous body: I = rdm. Parallel axis theorem: I = Icm + Md.",formulas:["I = mr","I = Icm + Md"],pdfRef:{file:"P1100 - Tutorial Chap 5 - Given.pdf",page:1}},{id:"ch5-t2",title:"Rotational Kinetic Energy",content:"KErot = I. For rolling: KEtotal = mv + I = mv(1 + I/mr).",formulas:["KErot = I","KEroll = mv + I"],pdfRef:{file:"P1100 - Tutorial Chap 5 - Given.pdf",page:1}},{id:"ch5-t3",title:"Torque and Angular Acceleration",content:" = r  F. Rotational Newton's 2nd law:  = I. Angular acceleration  = d/dt.",formulas:[" = rFsin"," = I"],pdfRef:{file:"P1100 - Tutorial Chap 5 - Given.pdf",page:2}},{id:"ch5-t4",title:"Conservation of Angular Momentum",content:"When  = 0: L = I = constant. If I changes,  adjusts to conserve L.",formulas:["I = I"],pdfRef:{file:"P1100 - Tutorial Chap 5 - Given.pdf",page:1}},{id:"ch5-t5",title:"Rolling Motion",content:"Pure rolling: v = r (no slipping). Acceleration: a = r. For rolling down incline: a = gsin/(1 + I/mr).",formulas:["v = r","a = gsin/(1 + I/mr)"],pdfRef:{file:"P1100 - Tutorial Chap 5 - Given.pdf",page:2}}],exercises:[{id:"ch5-ex1",title:"Rotating Rod with Particles",problem:"Two particles of mass m at distance r from axis. Rod rotates at . Particles move to 2r. Find new  and fraction of KE lost.",pdfRef:{file:"P1100 - Tutorial Chap 5 - Given.pdf",page:1}},{id:"ch5-ex2",title:"Simple Pendulum",problem:"Pendulum of mass m, length l released from =0. Find  in terms of , and angular velocity at =90.",pdfRef:{file:"P1100 - Tutorial Chap 5 - Given.pdf",page:1}},{id:"ch5-ex5",title:"Rolling Sphere on Incline",problem:"Sphere (M=4kg, R=20cm, I=0.4MR) rolls on 30 incline with 2kg block attached. Find acceleration.",pdfRef:{file:"P1100 - Tutorial Chap 5 - Given.pdf",page:2}}]}],Ca=[{id:"fc1",front:"What is a scalar quantity?",back:"A quantity defined by magnitude only. Examples: mass, length, time, power, energy.",chapter:"chapter0"},{id:"fc2",front:"What is a vector quantity?",back:"A quantity requiring both magnitude and direction. Examples: position, velocity, acceleration, force.",chapter:"chapter0"},{id:"fc3",front:"Scalar product formula?",back:"AB = |A||B|cos() = AxBx + AyBy + AzBz",chapter:"chapter0"},{id:"fc4",front:"Cross product magnitude?",back:"|AB| = |A||B|sin()",chapter:"chapter0"},{id:"fc5",front:"Position vector in Cartesian?",back:"r(t) = x(t) + y(t) + z(t)k",chapter:"chapter1"},{id:"fc6",front:"How to get velocity from position?",back:"v = dr/dt (differentiate position)",chapter:"chapter1"},{id:"fc7",front:"Maximum height in projectile motion?",back:"h = vsin/(2g)",chapter:"chapter1"},{id:"fc8",front:"Range in projectile motion?",back:"R = vsin(2)/g (maximum at =45)",chapter:"chapter1"},{id:"fc9",front:"Centripetal acceleration?",back:"a = v/r = r (always toward center)",chapter:"chapter1"},{id:"fc10",front:"Tangential acceleration?",back:"a = dv/dt = r (changes speed, not direction)",chapter:"chapter1"},{id:"fc11",front:"Newton's First Law?",back:"An object at rest stays at rest, and moving objects continue in straight line unless acted upon by external force.",chapter:"chapter2"},{id:"fc12",front:"Newton's Second Law?",back:"F = ma",chapter:"chapter2"},{id:"fc13",front:"Newton's Third Law?",back:"For every action, there is an equal and opposite reaction. F = -F",chapter:"chapter2"},{id:"fc14",front:"Static friction formula?",back:"f  N (maximum: f = N)",chapter:"chapter2"},{id:"fc15",front:"Kinetic friction formula?",back:"f = N ( < )",chapter:"chapter2"},{id:"fc16",front:"Universal gravitation?",back:"F = GMm/r",chapter:"chapter2"},{id:"fc17",front:"Orbital velocity?",back:"v = (GM/r)",chapter:"chapter2"},{id:"fc18",front:"Escape velocity?",back:"v = (2GM/R)",chapter:"chapter2"},{id:"fc19",front:"Work formula?",back:"W = Fdr or W = Fdcos (constant force)",chapter:"chapter3"},{id:"fc20",front:"Kinetic energy?",back:"KE = mv",chapter:"chapter3"},{id:"fc21",front:"Work-Energy Theorem?",back:"W = KE = mv - mv",chapter:"chapter3"},{id:"fc22",front:"Gravitational PE?",back:"U = mgh (near Earth) or U = -GMm/r",chapter:"chapter3"},{id:"fc23",front:"Spring PE?",back:"U = kx",chapter:"chapter3"},{id:"fc24",front:"Conservation of mechanical energy?",back:"KE + PE = KE + PE (when only conservative forces act)",chapter:"chapter3"},{id:"fc25",front:"Linear momentum?",back:"p = mv",chapter:"chapter4"},{id:"fc26",front:"Impulse-Momentum Theorem?",back:"J = p = Fdt",chapter:"chapter4"},{id:"fc27",front:"Conservation of momentum?",back:"p = pf (for isolated systems)",chapter:"chapter4"},{id:"fc28",front:"Coefficient of restitution?",back:"e = |v'-v'|/|v-v|. e=1 elastic, e=0 perfectly inelastic",chapter:"chapter4"},{id:"fc29",front:"Center of mass?",back:"Rcm = mr/m",chapter:"chapter4"},{id:"fc30",front:"Moment of inertia?",back:"I = mr or I = rdm",chapter:"chapter5"},{id:"fc31",front:"Parallel axis theorem?",back:"I = Icm + Md",chapter:"chapter5"},{id:"fc32",front:"Rotational kinetic energy?",back:"KErot = I",chapter:"chapter5"},{id:"fc33",front:"Rotational Newton's 2nd Law?",back:" = I",chapter:"chapter5"},{id:"fc34",front:"Conservation of angular momentum?",back:"I = I (when  = 0)",chapter:"chapter5"},{id:"fc35",front:"Rolling condition?",back:"v = r (pure rolling, no slipping)",chapter:"chapter5"}],kw=[{id:"exam1",title:"2023-2024 Session 2",file:"P1100 2023-2024 s2 - En.pdf"},{id:"exam2",title:"2024-2025 Session 2",file:"P1100 2024-2025 s2 - En.pdf"},{id:"exam3",title:"1st & 2nd Session",file:"P1100 1st & 2nd session .pdf"},{id:"exam4",title:"Partial 2017-2018 Solution",file:"sol partial 17-18.pdf"},{id:"exam5",title:"Partial 2018-2019 Solution",file:"sol partial 18-19.pdf"},{id:"exam6",title:"Partial 2019-2020 Solution",file:"sol partial 19-20.pdf"}],ss=[{id:"pdf1",title:"Mathematical Notions",file:"Chap 0 - Mathematical Notions.pdf",type:"lecture",chapter:"Chapter 0 - Mathematical Foundations"},{id:"pdf2",title:"Lecture 1",file:"ch 1-Lecture 1.pdf",type:"lecture",chapter:"Chapter 1 - Kinematics"},{id:"pdf3",title:"Lecture 2",file:"ch 1-Lecture 2.pdf",type:"lecture",chapter:"Chapter 1 - Kinematics"},{id:"pdf4",title:"Lecture 3",file:"ch 1-Lecture 3.pdf",type:"lecture",chapter:"Chapter 1 - Kinematics"},{id:"pdf5",title:"Lecture 4",file:"ch 1-Lecture 4.pdf",type:"lecture",chapter:"Chapter 1 - Kinematics"},{id:"pdf6",title:"Tutorial",file:"Chap 1 - Tutorial.pdf",type:"tutorial",chapter:"Chapter 1 - Kinematics"},{id:"pdf7",title:"Tutorial (Given)",file:"P1100 -Tutorial Chap 1 - Given.pdf",type:"tutorial",chapter:"Chapter 1 - Kinematics"},{id:"pdf8",title:"Dynamics Course",file:"P1100 - Chap 2 - Dynamics.pdf",type:"lecture",chapter:"Chapter 2 - Dynamics"},{id:"pdf9",title:"Dynamics Part 1",file:"P1100 chap 2 part 1.pdf",type:"lecture",chapter:"Chapter 2 - Dynamics"},{id:"pdf10",title:"Dynamics Part 2",file:"P1100-chap2-part2.pdf",type:"lecture",chapter:"Chapter 2 - Dynamics"},{id:"pdf11",title:"Tutorial (Given)",file:"P1100 -Tutorial Chap 2 - Given.pdf",type:"tutorial",chapter:"Chapter 2 - Dynamics"},{id:"pdf12",title:"Exercises 1-8",file:"P1100 - chap2- ex 1to8.pdf",type:"tutorial",chapter:"Chapter 2 - Dynamics"},{id:"pdf13",title:"Course + Applications",file:"P1100_Chapter3_course+applications.pdf",type:"lecture",chapter:"Chapter 3 - Work & Energy"},{id:"pdf14",title:"Chapter 3 Notes",file:"chapter 3 p1100 .pdf",type:"lecture",chapter:"Chapter 3 - Work & Energy"},{id:"pdf15",title:"Applications",file:"P 1100 - Applications - chap 3.pdf",type:"lecture",chapter:"Chapter 3 - Work & Energy"},{id:"pdf16",title:"Tutorial 2024-2025",file:"P1100 - Tutorial Chap 3 - Given- 2024-2025.pdf",type:"tutorial",chapter:"Chapter 3 - Work & Energy"},{id:"pdf17",title:"Tutorial",file:"P1100- chap 3 -tuto.pdf",type:"tutorial",chapter:"Chapter 3 - Work & Energy"},{id:"pdf18",title:"TD Chap 3",file:"P1100 td chap 3.pdf",type:"tutorial",chapter:"Chapter 3 - Work & Energy"},{id:"pdf19",title:"Course + Exercises",file:"Chap 4 - cours + ex tutoro.pdf",type:"lecture",chapter:"Chapter 4 - Linear Momentum"},{id:"pdf20",title:"Applications",file:"P 1100 - Applications - chap 4.pdf",type:"lecture",chapter:"Chapter 4 - Linear Momentum"},{id:"pdf21",title:"Tutorial 2025-2026",file:"P1100 - Tutorial Chap 4 - Given- 2025-2026.pdf",type:"tutorial",chapter:"Chapter 4 - Linear Momentum"},{id:"pdf22",title:"Tutorial (Given)",file:"P1100 - Tutorial Chap 4 - Given.pdf",type:"tutorial",chapter:"Chapter 4 - Linear Momentum"},{id:"pdf23",title:"Tutorial (Given)",file:"P1100 - Tutorial Chap 5 - Given.pdf",type:"tutorial",chapter:"Chapter 5 - Rotational Dynamics"},{id:"pdf24",title:"2023-2024 Session 2",file:"P1100 2023-2024 s2 - En.pdf",type:"exam",chapter:"Exams"},{id:"pdf25",title:"2024-2025 Session 2",file:"P1100 2024-2025 s2 - En.pdf",type:"exam",chapter:"Exams"},{id:"pdf26",title:"1st & 2nd Session",file:"P1100 1st & 2nd session .pdf",type:"exam",chapter:"Exams"},{id:"pdf27",title:"Partial 17-18 Solution",file:"sol partial 17-18.pdf",type:"exam",chapter:"Exams"},{id:"pdf28",title:"Partial 18-19 Solution",file:"sol partial 18-19.pdf",type:"exam",chapter:"Exams"},{id:"pdf29",title:"Partial 19-20 Solution",file:"sol partial 19-20.pdf",type:"exam",chapter:"Exams"},{id:"pdf30",title:"Course Summary",file:"Summary - P1100.pdf",type:"other",chapter:"Resources"},{id:"pdf31",title:"Exercises 10-12-13-15-17",file:"Ex10-12-13-15-17.pdf",type:"tutorial",chapter:"Resources"},{id:"pdf32",title:"Formulas (er-e-t-n)",file:"p1100(er-e-t-n).pdf",type:"other",chapter:"Resources"}];function Ly({onNavigate:h}){const t=Ra.reduce((s,a)=>s+a.topics.length,0),e=Ra.reduce((s,a)=>s+a.exercises.length,0);return v.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[v.jsxs("div",{className:"text-center py-8",children:[v.jsx("h1",{className:"text-4xl font-bold mb-4",children:"P1100 - Classical Mechanics"}),v.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Your comprehensive study companion for Classical Mechanics. Master kinematics, dynamics, energy, momentum, and rotational motion."})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs(Ee,{children:[v.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[v.jsx($e,{className:"text-sm font-medium",children:"Chapters"}),v.jsx(co,{className:"h-4 w-4 text-muted-foreground"})]}),v.jsxs(He,{children:[v.jsx("div",{className:"text-2xl font-bold",children:Ra.length}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete course material"})]})]}),v.jsxs(Ee,{children:[v.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[v.jsx($e,{className:"text-sm font-medium",children:"Topics"}),v.jsx(uS,{className:"h-4 w-4 text-muted-foreground"})]}),v.jsxs(He,{children:[v.jsx("div",{className:"text-2xl font-bold",children:t}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Key concepts to master"})]})]}),v.jsxs(Ee,{children:[v.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[v.jsx($e,{className:"text-sm font-medium",children:"Exercises"}),v.jsx(_b,{className:"h-4 w-4 text-muted-foreground"})]}),v.jsxs(He,{children:[v.jsx("div",{className:"text-2xl font-bold",children:e}),v.jsx("p",{className:"text-xs text-muted-foreground",children:"Practice problems"})]})]})]}),v.jsxs(Ee,{children:[v.jsxs(Ye,{children:[v.jsx($e,{children:"Study Progress"}),v.jsx(In,{children:"Track your learning journey"})]}),v.jsx(He,{children:v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{children:"Overall Progress"}),v.jsx("span",{className:"text-muted-foreground",children:"Start studying to track!"})]}),v.jsx(eo,{value:0,className:"h-2"})]})})]}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Course Chapters"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ra.map(s=>v.jsxs(Ee,{className:"hover:border-primary/50 transition-colors cursor-pointer group",onClick:()=>h(s.id),children:[v.jsxs(Ye,{children:[v.jsx("div",{className:"flex items-center justify-between",children:v.jsxs($e,{className:"text-lg",children:["Chapter ",s.number,": ",s.title]})}),v.jsx(In,{children:s.description})]}),v.jsxs(He,{children:[v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[v.jsxs("span",{children:[s.topics.length," topics"]}),v.jsxs("span",{children:[s.exercises.length," exercises"]})]}),v.jsxs(Ut,{variant:"ghost",size:"sm",className:"w-full mt-4 group-hover:bg-primary group-hover:text-primary-foreground",children:["Study Chapter ",v.jsx(yA,{className:"ml-2 h-4 w-4"})]})]})]},s.id))})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsx(Ee,{className:"cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>h("flashcards"),children:v.jsxs(Ye,{children:[v.jsx($e,{children:" Flashcards"}),v.jsx(In,{children:"Review key concepts with interactive flashcards. Perfect for quick revision before exams."})]})}),v.jsx(Ee,{className:"cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>h("exams"),children:v.jsxs(Ye,{children:[v.jsx($e,{children:" Past Exams"}),v.jsx(In,{children:"Practice with previous exam papers and solutions to prepare for your tests."})]})})]})]})}const si=R.forwardRef(({className:h,variant:t="default",...e},s)=>{const a={default:"bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground border border-input",success:"bg-success text-foreground shadow hover:bg-success/80"};return v.jsx("div",{ref:s,className:ze("inline-flex items-center rounded-md px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",a[t],h),...e})});si.displayName="Badge";function uo(h,t=[]){let e=[];function s(o,l){const u=R.createContext(l),d=e.length;e=[...e,l];const f=y=>{const{scope:b,children:A,...w}=y,S=b?.[h]?.[d]||u,E=R.useMemo(()=>w,Object.values(w));return v.jsx(S.Provider,{value:E,children:A})};f.displayName=o+"Provider";function m(y,b){const A=b?.[h]?.[d]||u,w=R.useContext(A);if(w)return w;if(l!==void 0)return l;throw new Error(`\`${y}\` must be used within \`${o}\``)}return[f,m]}const a=()=>{const o=e.map(l=>R.createContext(l));return function(u){const d=u?.[h]||o;return R.useMemo(()=>({[`__scope${h}`]:{...u,[h]:d}}),[u,d])}};return a.scopeName=h,[s,Lw(a,...t)]}function Lw(...h){const t=h[0];if(h.length===1)return t;const e=()=>{const s=h.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const l=s.reduce((u,{useScope:d,scopeName:f})=>{const y=d(o)[`__scope${f}`];return{...u,...y}},{});return R.useMemo(()=>({[`__scope${t.scopeName}`]:l}),[l])}};return e.scopeName=t.scopeName,e}function Oy(h){const t=Ow(h),e=R.forwardRef((s,a)=>{const{children:o,...l}=s,u=R.Children.toArray(o),d=u.find(jw);if(d){const f=d.props.children,m=u.map(y=>y===d?R.Children.count(f)>1?R.Children.only(null):R.isValidElement(f)?f.props.children:null:y);return v.jsx(t,{...l,ref:a,children:R.isValidElement(f)?R.cloneElement(f,void 0,m):null})}return v.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${h}.Slot`,e}function Ow(h){const t=R.forwardRef((e,s)=>{const{children:a,...o}=e;if(R.isValidElement(a)){const l=Fw(a),u=Bw(o,a.props);return a.type!==R.Fragment&&(u.ref=s?fc(s,l):l),R.cloneElement(a,u)}return R.Children.count(a)>1?R.Children.only(null):null});return t.displayName=`${h}.SlotClone`,t}var Pw=Symbol("radix.slottable");function jw(h){return R.isValidElement(h)&&typeof h.type=="function"&&"__radixId"in h.type&&h.type.__radixId===Pw}function Bw(h,t){const e={...t};for(const s in t){const a=h[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?e[s]=(...u)=>{const d=o(...u);return a(...u),d}:a&&(e[s]=a):s==="style"?e[s]={...a,...o}:s==="className"&&(e[s]=[a,o].filter(Boolean).join(" "))}return{...h,...e}}function Fw(h){let t=Object.getOwnPropertyDescriptor(h.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?h.ref:(t=Object.getOwnPropertyDescriptor(h,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?h.props.ref:h.props.ref||h.ref)}function Qb(h){const t=h+"CollectionProvider",[e,s]=uo(t),[a,o]=e(t,{collectionRef:{current:null},itemMap:new Map}),l=S=>{const{scope:E,children:C}=S,T=me.useRef(null),M=me.useRef(new Map).current;return v.jsx(a,{scope:E,itemMap:M,collectionRef:T,children:C})};l.displayName=t;const u=h+"CollectionSlot",d=Oy(u),f=me.forwardRef((S,E)=>{const{scope:C,children:T}=S,M=o(u,C),D=Ia(E,M.collectionRef);return v.jsx(d,{ref:D,children:T})});f.displayName=u;const m=h+"CollectionItemSlot",y="data-radix-collection-item",b=Oy(m),A=me.forwardRef((S,E)=>{const{scope:C,children:T,...M}=S,D=me.useRef(null),k=Ia(E,D),F=o(m,C);return me.useEffect(()=>(F.itemMap.set(D,{ref:D,...M}),()=>void F.itemMap.delete(D))),v.jsx(b,{[y]:"",ref:k,children:T})});A.displayName=m;function w(S){const E=o(h+"CollectionConsumer",S);return me.useCallback(()=>{const T=E.collectionRef.current;if(!T)return[];const M=Array.from(T.querySelectorAll(`[${y}]`));return Array.from(E.itemMap.values()).sort((F,B)=>M.indexOf(F.ref.current)-M.indexOf(B.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:l,Slot:f,ItemSlot:A},w,s]}function Un(h,t,{checkForDefaultPrevented:e=!0}={}){return function(a){if(h?.(a),e===!1||!a.defaultPrevented)return t?.(a)}}var no=globalThis?.document?R.useLayoutEffect:()=>{},zw=_d[" useInsertionEffect ".trim().toString()]||no;function ho({prop:h,defaultProp:t,onChange:e=()=>{},caller:s}){const[a,o,l]=Iw({defaultProp:t,onChange:e}),u=h!==void 0,d=u?h:a;{const m=R.useRef(h!==void 0);R.useEffect(()=>{const y=m.current;y!==u&&console.warn(`${s} is changing from ${y?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=u},[u,s])}const f=R.useCallback(m=>{if(u){const y=Uw(m)?m(h):m;y!==h&&l.current?.(y)}else o(m)},[u,h,o,l]);return[d,f]}function Iw({defaultProp:h,onChange:t}){const[e,s]=R.useState(h),a=R.useRef(e),o=R.useRef(t);return zw(()=>{o.current=t},[t]),R.useEffect(()=>{a.current!==e&&(o.current?.(e),a.current=e)},[e,a]),[e,s,o]}function Uw(h){return typeof h=="function"}function Hw(h){const t=Gw(h),e=R.forwardRef((s,a)=>{const{children:o,...l}=s,u=R.Children.toArray(o),d=u.find(qw);if(d){const f=d.props.children,m=u.map(y=>y===d?R.Children.count(f)>1?R.Children.only(null):R.isValidElement(f)?f.props.children:null:y);return v.jsx(t,{...l,ref:a,children:R.isValidElement(f)?R.cloneElement(f,void 0,m):null})}return v.jsx(t,{...l,ref:a,children:o})});return e.displayName=`${h}.Slot`,e}function Gw(h){const t=R.forwardRef((e,s)=>{const{children:a,...o}=e;if(R.isValidElement(a)){const l=Yw(a),u=Xw(o,a.props);return a.type!==R.Fragment&&(u.ref=s?fc(s,l):l),R.cloneElement(a,u)}return R.Children.count(a)>1?R.Children.only(null):null});return t.displayName=`${h}.SlotClone`,t}var Vw=Symbol("radix.slottable");function qw(h){return R.isValidElement(h)&&typeof h.type=="function"&&"__radixId"in h.type&&h.type.__radixId===Vw}function Xw(h,t){const e={...t};for(const s in t){const a=h[s],o=t[s];/^on[A-Z]/.test(s)?a&&o?e[s]=(...u)=>{const d=o(...u);return a(...u),d}:a&&(e[s]=a):s==="style"?e[s]={...a,...o}:s==="className"&&(e[s]=[a,o].filter(Boolean).join(" "))}return{...h,...e}}function Yw(h){let t=Object.getOwnPropertyDescriptor(h.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?h.ref:(t=Object.getOwnPropertyDescriptor(h,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?h.props.ref:h.props.ref||h.ref)}var $w=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gn=$w.reduce((h,t)=>{const e=Hw(`Primitive.${t}`),s=R.forwardRef((a,o)=>{const{asChild:l,...u}=a,d=l?e:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:o})});return s.displayName=`Primitive.${t}`,{...h,[t]:s}},{});function Kw(h,t){return R.useReducer((e,s)=>t[e][s]??e,h)}var Ld=h=>{const{present:t,children:e}=h,s=Ww(t),a=typeof e=="function"?e({present:s.isPresent}):R.Children.only(e),o=Ia(s.ref,Qw(a));return typeof e=="function"||s.isPresent?R.cloneElement(a,{ref:o}):null};Ld.displayName="Presence";function Ww(h){const[t,e]=R.useState(),s=R.useRef(null),a=R.useRef(h),o=R.useRef("none"),l=h?"mounted":"unmounted",[u,d]=Kw(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const f=Hl(s.current);o.current=u==="mounted"?f:"none"},[u]),no(()=>{const f=s.current,m=a.current;if(m!==h){const b=o.current,A=Hl(f);h?d("MOUNT"):A==="none"||f?.display==="none"?d("UNMOUNT"):d(m&&b!==A?"ANIMATION_OUT":"UNMOUNT"),a.current=h}},[h,d]),no(()=>{if(t){let f;const m=t.ownerDocument.defaultView??window,y=A=>{const S=Hl(s.current).includes(CSS.escape(A.animationName));if(A.target===t&&S&&(d("ANIMATION_END"),!a.current)){const E=t.style.animationFillMode;t.style.animationFillMode="forwards",f=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=E)})}},b=A=>{A.target===t&&(o.current=Hl(s.current))};return t.addEventListener("animationstart",b),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{m.clearTimeout(f),t.removeEventListener("animationstart",b),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:R.useCallback(f=>{s.current=f?getComputedStyle(f):null,e(f)},[])}}function Hl(h){return h?.animationName||"none"}function Qw(h){let t=Object.getOwnPropertyDescriptor(h.props,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning;return e?h.ref:(t=Object.getOwnPropertyDescriptor(h,"ref")?.get,e=t&&"isReactWarning"in t&&t.isReactWarning,e?h.props.ref:h.props.ref||h.ref)}var Zw=_d[" useId ".trim().toString()]||(()=>{}),Jw=0;function pc(h){const[t,e]=R.useState(Zw());return no(()=>{e(s=>s??String(Jw++))},[h]),t?`radix-${t}`:""}var mc="Collapsible",[tE,Zb]=uo(mc),[eE,Od]=tE(mc),Jb=R.forwardRef((h,t)=>{const{__scopeCollapsible:e,open:s,defaultOpen:a,disabled:o,onOpenChange:l,...u}=h,[d,f]=ho({prop:s,defaultProp:a??!1,onChange:l,caller:mc});return v.jsx(eE,{scope:e,disabled:o,contentId:pc(),open:d,onOpenToggle:R.useCallback(()=>f(m=>!m),[f]),children:v.jsx(Gn.div,{"data-state":jd(d),"data-disabled":o?"":void 0,...u,ref:t})})});Jb.displayName=mc;var t0="CollapsibleTrigger",e0=R.forwardRef((h,t)=>{const{__scopeCollapsible:e,...s}=h,a=Od(t0,e);return v.jsx(Gn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":jd(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:Un(h.onClick,a.onOpenToggle)})});e0.displayName=t0;var Pd="CollapsibleContent",n0=R.forwardRef((h,t)=>{const{forceMount:e,...s}=h,a=Od(Pd,h.__scopeCollapsible);return v.jsx(Ld,{present:e||a.open,children:({present:o})=>v.jsx(nE,{...s,ref:t,present:o})})});n0.displayName=Pd;var nE=R.forwardRef((h,t)=>{const{__scopeCollapsible:e,present:s,children:a,...o}=h,l=Od(Pd,e),[u,d]=R.useState(s),f=R.useRef(null),m=Ia(t,f),y=R.useRef(0),b=y.current,A=R.useRef(0),w=A.current,S=l.open||u,E=R.useRef(S),C=R.useRef(void 0);return R.useEffect(()=>{const T=requestAnimationFrame(()=>E.current=!1);return()=>cancelAnimationFrame(T)},[]),no(()=>{const T=f.current;if(T){C.current=C.current||{transitionDuration:T.style.transitionDuration,animationName:T.style.animationName},T.style.transitionDuration="0s",T.style.animationName="none";const M=T.getBoundingClientRect();y.current=M.height,A.current=M.width,E.current||(T.style.transitionDuration=C.current.transitionDuration,T.style.animationName=C.current.animationName),d(s)}},[l.open,s]),v.jsx(Gn.div,{"data-state":jd(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!S,...o,ref:m,style:{"--radix-collapsible-content-height":b?`${b}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...h.style},children:S&&a})});function jd(h){return h?"open":"closed"}var iE=Jb,sE=e0,aE=n0,rE=R.createContext(void 0);function Bd(h){const t=R.useContext(rE);return h||t||"ltr"}var Vn="Accordion",oE=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Fd,lE,cE]=Qb(Vn),[gc]=uo(Vn,[cE,Zb]),zd=Zb(),i0=me.forwardRef((h,t)=>{const{type:e,...s}=h,a=s,o=s;return v.jsx(Fd.Provider,{scope:h.__scopeAccordion,children:e==="multiple"?v.jsx(fE,{...o,ref:t}):v.jsx(dE,{...a,ref:t})})});i0.displayName=Vn;var[s0,uE]=gc(Vn),[a0,hE]=gc(Vn,{collapsible:!1}),dE=me.forwardRef((h,t)=>{const{value:e,defaultValue:s,onValueChange:a=()=>{},collapsible:o=!1,...l}=h,[u,d]=ho({prop:e,defaultProp:s??"",onChange:a,caller:Vn});return v.jsx(s0,{scope:h.__scopeAccordion,value:me.useMemo(()=>u?[u]:[],[u]),onItemOpen:d,onItemClose:me.useCallback(()=>o&&d(""),[o,d]),children:v.jsx(a0,{scope:h.__scopeAccordion,collapsible:o,children:v.jsx(r0,{...l,ref:t})})})}),fE=me.forwardRef((h,t)=>{const{value:e,defaultValue:s,onValueChange:a=()=>{},...o}=h,[l,u]=ho({prop:e,defaultProp:s??[],onChange:a,caller:Vn}),d=me.useCallback(m=>u((y=[])=>[...y,m]),[u]),f=me.useCallback(m=>u((y=[])=>y.filter(b=>b!==m)),[u]);return v.jsx(s0,{scope:h.__scopeAccordion,value:l,onItemOpen:d,onItemClose:f,children:v.jsx(a0,{scope:h.__scopeAccordion,collapsible:!0,children:v.jsx(r0,{...o,ref:t})})})}),[pE,yc]=gc(Vn),r0=me.forwardRef((h,t)=>{const{__scopeAccordion:e,disabled:s,dir:a,orientation:o="vertical",...l}=h,u=me.useRef(null),d=Ia(u,t),f=lE(e),y=Bd(a)==="ltr",b=Un(h.onKeyDown,A=>{if(!oE.includes(A.key))return;const w=A.target,S=f().filter(P=>!P.ref.current?.disabled),E=S.findIndex(P=>P.ref.current===w),C=S.length;if(E===-1)return;A.preventDefault();let T=E;const M=0,D=C-1,k=()=>{T=E+1,T>D&&(T=M)},F=()=>{T=E-1,T<M&&(T=D)};switch(A.key){case"Home":T=M;break;case"End":T=D;break;case"ArrowRight":o==="horizontal"&&(y?k():F());break;case"ArrowDown":o==="vertical"&&k();break;case"ArrowLeft":o==="horizontal"&&(y?F():k());break;case"ArrowUp":o==="vertical"&&F();break}const B=T%C;S[B].ref.current?.focus()});return v.jsx(pE,{scope:e,disabled:s,direction:a,orientation:o,children:v.jsx(Fd.Slot,{scope:e,children:v.jsx(Gn.div,{...l,"data-orientation":o,ref:d,onKeyDown:s?void 0:b})})})}),oc="AccordionItem",[mE,Id]=gc(oc),o0=me.forwardRef((h,t)=>{const{__scopeAccordion:e,value:s,...a}=h,o=yc(oc,e),l=uE(oc,e),u=zd(e),d=pc(),f=s&&l.value.includes(s)||!1,m=o.disabled||h.disabled;return v.jsx(mE,{scope:e,open:f,disabled:m,triggerId:d,children:v.jsx(iE,{"data-orientation":o.orientation,"data-state":f0(f),...u,...a,ref:t,disabled:m,open:f,onOpenChange:y=>{y?l.onItemOpen(s):l.onItemClose(s)}})})});o0.displayName=oc;var l0="AccordionHeader",c0=me.forwardRef((h,t)=>{const{__scopeAccordion:e,...s}=h,a=yc(Vn,e),o=Id(l0,e);return v.jsx(Gn.h3,{"data-orientation":a.orientation,"data-state":f0(o.open),"data-disabled":o.disabled?"":void 0,...s,ref:t})});c0.displayName=l0;var cd="AccordionTrigger",u0=me.forwardRef((h,t)=>{const{__scopeAccordion:e,...s}=h,a=yc(Vn,e),o=Id(cd,e),l=hE(cd,e),u=zd(e);return v.jsx(Fd.ItemSlot,{scope:e,children:v.jsx(sE,{"aria-disabled":o.open&&!l.collapsible||void 0,"data-orientation":a.orientation,id:o.triggerId,...u,...s,ref:t})})});u0.displayName=cd;var h0="AccordionContent",d0=me.forwardRef((h,t)=>{const{__scopeAccordion:e,...s}=h,a=yc(Vn,e),o=Id(h0,e),l=zd(e);return v.jsx(aE,{role:"region","aria-labelledby":o.triggerId,"data-orientation":a.orientation,...l,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...h.style}})});d0.displayName=h0;function f0(h){return h?"open":"closed"}var gE=i0,yE=o0,bE=c0,p0=u0,m0=d0;const vE=gE,g0=R.forwardRef(({className:h,...t},e)=>v.jsx(yE,{ref:e,className:ze("border-b border-border",h),...t}));g0.displayName="AccordionItem";const y0=R.forwardRef(({className:h,children:t,...e},s)=>v.jsx(bE,{className:"flex",children:v.jsxs(p0,{ref:s,className:ze("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",h),...e,children:[t,v.jsx(CA,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));y0.displayName=p0.displayName;const b0=R.forwardRef(({className:h,children:t,...e},s)=>v.jsx(m0,{ref:s,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...e,children:v.jsx("div",{className:ze("pb-4 pt-0",h),children:t})}));b0.displayName=m0.displayName;function xE(h){const t=R.useRef(h);return R.useEffect(()=>{t.current=h}),R.useMemo(()=>(...e)=>t.current?.(...e),[])}var Zh="rovingFocusGroup.onEntryFocus",AE={bubbles:!1,cancelable:!0},fo="RovingFocusGroup",[ud,v0,SE]=Qb(fo),[wE,x0]=uo(fo,[SE]),[EE,CE]=wE(fo),A0=R.forwardRef((h,t)=>v.jsx(ud.Provider,{scope:h.__scopeRovingFocusGroup,children:v.jsx(ud.Slot,{scope:h.__scopeRovingFocusGroup,children:v.jsx(_E,{...h,ref:t})})}));A0.displayName=fo;var _E=R.forwardRef((h,t)=>{const{__scopeRovingFocusGroup:e,orientation:s,loop:a=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...y}=h,b=R.useRef(null),A=Ia(t,b),w=Bd(o),[S,E]=ho({prop:l,defaultProp:u??null,onChange:d,caller:fo}),[C,T]=R.useState(!1),M=xE(f),D=v0(e),k=R.useRef(!1),[F,B]=R.useState(0);return R.useEffect(()=>{const P=b.current;if(P)return P.addEventListener(Zh,M),()=>P.removeEventListener(Zh,M)},[M]),v.jsx(EE,{scope:e,orientation:s,dir:w,loop:a,currentTabStopId:S,onItemFocus:R.useCallback(P=>E(P),[E]),onItemShiftTab:R.useCallback(()=>T(!0),[]),onFocusableItemAdd:R.useCallback(()=>B(P=>P+1),[]),onFocusableItemRemove:R.useCallback(()=>B(P=>P-1),[]),children:v.jsx(Gn.div,{tabIndex:C||F===0?-1:0,"data-orientation":s,...y,ref:A,style:{outline:"none",...h.style},onMouseDown:Un(h.onMouseDown,()=>{k.current=!0}),onFocus:Un(h.onFocus,P=>{const H=!k.current;if(P.target===P.currentTarget&&H&&!C){const Z=new CustomEvent(Zh,AE);if(P.currentTarget.dispatchEvent(Z),!Z.defaultPrevented){const J=D().filter(L=>L.focusable),ct=J.find(L=>L.active),dt=J.find(L=>L.id===S),ht=[ct,dt,...J].filter(Boolean).map(L=>L.ref.current);E0(ht,m)}}k.current=!1}),onBlur:Un(h.onBlur,()=>T(!1))})})}),S0="RovingFocusGroupItem",w0=R.forwardRef((h,t)=>{const{__scopeRovingFocusGroup:e,focusable:s=!0,active:a=!1,tabStopId:o,children:l,...u}=h,d=pc(),f=o||d,m=CE(S0,e),y=m.currentTabStopId===f,b=v0(e),{onFocusableItemAdd:A,onFocusableItemRemove:w,currentTabStopId:S}=m;return R.useEffect(()=>{if(s)return A(),()=>w()},[s,A,w]),v.jsx(ud.ItemSlot,{scope:e,id:f,focusable:s,active:a,children:v.jsx(Gn.span,{tabIndex:y?0:-1,"data-orientation":m.orientation,...u,ref:t,onMouseDown:Un(h.onMouseDown,E=>{s?m.onItemFocus(f):E.preventDefault()}),onFocus:Un(h.onFocus,()=>m.onItemFocus(f)),onKeyDown:Un(h.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){m.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const C=RE(E,m.orientation,m.dir);if(C!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let M=b().filter(D=>D.focusable).map(D=>D.ref.current);if(C==="last")M.reverse();else if(C==="prev"||C==="next"){C==="prev"&&M.reverse();const D=M.indexOf(E.currentTarget);M=m.loop?NE(M,D+1):M.slice(D+1)}setTimeout(()=>E0(M))}}),children:typeof l=="function"?l({isCurrentTabStop:y,hasTabStop:S!=null}):l})})});w0.displayName=S0;var TE={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ME(h,t){return t!=="rtl"?h:h==="ArrowLeft"?"ArrowRight":h==="ArrowRight"?"ArrowLeft":h}function RE(h,t,e){const s=ME(h.key,e);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return TE[s]}function E0(h,t=!1){const e=document.activeElement;for(const s of h)if(s===e||(s.focus({preventScroll:t}),document.activeElement!==e))return}function NE(h,t){return h.map((e,s)=>h[(t+s)%h.length])}var DE=A0,kE=w0,bc="Tabs",[LE]=uo(bc,[x0]),C0=x0(),[OE,Ud]=LE(bc),_0=R.forwardRef((h,t)=>{const{__scopeTabs:e,value:s,onValueChange:a,defaultValue:o,orientation:l="horizontal",dir:u,activationMode:d="automatic",...f}=h,m=Bd(u),[y,b]=ho({prop:s,onChange:a,defaultProp:o??"",caller:bc});return v.jsx(OE,{scope:e,baseId:pc(),value:y,onValueChange:b,orientation:l,dir:m,activationMode:d,children:v.jsx(Gn.div,{dir:m,"data-orientation":l,...f,ref:t})})});_0.displayName=bc;var T0="TabsList",M0=R.forwardRef((h,t)=>{const{__scopeTabs:e,loop:s=!0,...a}=h,o=Ud(T0,e),l=C0(e);return v.jsx(DE,{asChild:!0,...l,orientation:o.orientation,dir:o.dir,loop:s,children:v.jsx(Gn.div,{role:"tablist","aria-orientation":o.orientation,...a,ref:t})})});M0.displayName=T0;var R0="TabsTrigger",N0=R.forwardRef((h,t)=>{const{__scopeTabs:e,value:s,disabled:a=!1,...o}=h,l=Ud(R0,e),u=C0(e),d=L0(l.baseId,s),f=O0(l.baseId,s),m=s===l.value;return v.jsx(kE,{asChild:!0,...u,focusable:!a,active:m,children:v.jsx(Gn.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...o,ref:t,onMouseDown:Un(h.onMouseDown,y=>{!a&&y.button===0&&y.ctrlKey===!1?l.onValueChange(s):y.preventDefault()}),onKeyDown:Un(h.onKeyDown,y=>{[" ","Enter"].includes(y.key)&&l.onValueChange(s)}),onFocus:Un(h.onFocus,()=>{const y=l.activationMode!=="manual";!m&&!a&&y&&l.onValueChange(s)})})})});N0.displayName=R0;var D0="TabsContent",k0=R.forwardRef((h,t)=>{const{__scopeTabs:e,value:s,forceMount:a,children:o,...l}=h,u=Ud(D0,e),d=L0(u.baseId,s),f=O0(u.baseId,s),m=s===u.value,y=R.useRef(m);return R.useEffect(()=>{const b=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(b)},[]),v.jsx(Ld,{present:a||m,children:({present:b})=>v.jsx(Gn.div,{"data-state":m?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!b,id:f,tabIndex:0,...l,ref:t,style:{...h.style,animationDuration:y.current?"0s":void 0},children:b&&o})})});k0.displayName=D0;function L0(h,t){return`${h}-trigger-${t}`}function O0(h,t){return`${h}-content-${t}`}var PE=_0,P0=M0,j0=N0,B0=k0;const jE=PE,F0=R.forwardRef(({className:h,...t},e)=>v.jsx(P0,{ref:e,className:ze("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",h),...t}));F0.displayName=P0.displayName;const hd=R.forwardRef(({className:h,...t},e)=>v.jsx(j0,{ref:e,className:ze("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",h),...t}));hd.displayName=j0.displayName;const dd=R.forwardRef(({className:h,...t},e)=>v.jsx(B0,{ref:e,className:ze("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",h),...t}));dd.displayName=B0.displayName;const z0=R.createContext(null);function Hd(){const h=R.useContext(z0);if(!h)throw new Error("usePDFViewerContext must be used within App");return h}function BE({chapter:h}){const{openPDF:t}=Hd();return v.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[v.jsxs("div",{className:"space-y-2",children:[v.jsx("div",{className:"flex items-center gap-2",children:v.jsxs(si,{variant:"secondary",children:["Chapter ",h.number]})}),v.jsx("h1",{className:"text-3xl font-bold",children:h.title}),v.jsx("p",{className:"text-muted-foreground",children:h.description})]}),v.jsxs(Ee,{children:[v.jsx(Ye,{className:"pb-3",children:v.jsxs($e,{className:"text-lg flex items-center gap-2",children:[v.jsx(Ls,{className:"h-5 w-5"}),"Reference Materials"]})}),v.jsx(He,{children:v.jsx("div",{className:"flex flex-wrap gap-2",children:h.pdfs.map((e,s)=>v.jsxs(Ut,{variant:"outline",size:"sm",onClick:()=>t(e),children:[v.jsx(Zr,{className:"h-4 w-4 mr-2"}),e.replace(".pdf","")]},s))})})]}),v.jsxs(jE,{defaultValue:"topics",className:"w-full",children:[v.jsxs(F0,{className:"grid w-full grid-cols-2",children:[v.jsxs(hd,{value:"topics",className:"flex items-center gap-2",children:[v.jsx(co,{className:"h-4 w-4"}),"Topics (",h.topics.length,")"]}),v.jsxs(hd,{value:"exercises",className:"flex items-center gap-2",children:[v.jsx(KA,{className:"h-4 w-4"}),"Exercises (",h.exercises.length,")"]})]}),v.jsx(dd,{value:"topics",className:"mt-4",children:v.jsx(vE,{type:"single",collapsible:!0,className:"w-full",children:h.topics.map((e,s)=>v.jsxs(g0,{value:e.id,children:[v.jsx(y0,{className:"text-left",children:v.jsxs("span",{className:"flex items-center gap-3",children:[v.jsx(si,{variant:"outline",className:"shrink-0",children:s+1}),e.title]})}),v.jsx(b0,{children:v.jsxs("div",{className:"space-y-4 pl-4",children:[v.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.content}),e.formulas&&e.formulas.length>0&&v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"font-semibold text-sm",children:"Key Formulas:"}),v.jsx("div",{className:"grid gap-2",children:e.formulas.map((a,o)=>v.jsx("div",{className:"formula",children:a},o))})]}),e.pdfRef&&v.jsxs(Ut,{variant:"link",size:"sm",className:"p-0 h-auto text-primary",onClick:()=>t(e.pdfRef.file,e.pdfRef.page),children:[v.jsx(Zr,{className:"h-3 w-3 mr-1"}),"View in PDF (Page ",e.pdfRef.page,")"]})]})})]},e.id))})}),v.jsx(dd,{value:"exercises",className:"mt-4",children:h.exercises.length===0?v.jsx(Ee,{children:v.jsx(He,{className:"py-8 text-center text-muted-foreground",children:"No exercises available for this chapter yet."})}):v.jsx("div",{className:"space-y-4",children:h.exercises.map((e,s)=>v.jsxs(Ee,{children:[v.jsx(Ye,{children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsx("div",{children:v.jsxs($e,{className:"text-lg flex items-center gap-2",children:[v.jsx(si,{children:s+1}),e.title]})}),e.pdfRef&&v.jsxs(Ut,{variant:"outline",size:"sm",onClick:()=>t(e.pdfRef.file,e.pdfRef.page),children:[v.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Open PDF"]})]})}),v.jsxs(He,{children:[v.jsx(In,{className:"text-foreground/80",children:e.problem}),e.solution&&v.jsxs("div",{className:"mt-4 p-4 bg-success/10 rounded-lg border border-success/20",children:[v.jsx("h4",{className:"font-semibold text-sm mb-2 text-success",children:"Solution:"}),v.jsx("p",{className:"text-sm",children:e.solution})]})]})]},e.id))})})]})]})}function FE(){const[h,t]=R.useState("all"),[e,s]=R.useState(0),[a,o]=R.useState(!1),[l,u]=R.useState(!1),d=h==="all"?Ca:Ca.filter(E=>E.chapter===h),[f,m]=R.useState(d),y=E=>{t(E);const C=E==="all"?Ca:Ca.filter(T=>T.chapter===E);m(C),s(0),o(!1),u(!1)},b=()=>{const E=[...f].sort(()=>Math.random()-.5);m(E),s(0),o(!1),u(!0)},A=()=>{e<f.length-1&&(s(e+1),o(!1))},w=()=>{e>0&&(s(e-1),o(!1))},S=f[e];return v.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Flashcards"}),v.jsx("p",{className:"text-muted-foreground",children:"Test your knowledge with interactive flashcards"})]}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[v.jsxs(Ut,{variant:h==="all"?"default":"outline",size:"sm",onClick:()=>y("all"),children:["All (",Ca.length,")"]}),Ra.map(E=>{const C=Ca.filter(T=>T.chapter===E.id).length;return C===0?null:v.jsxs(Ut,{variant:h===E.id?"default":"outline",size:"sm",onClick:()=>y(E.id),children:["Ch ",E.number," (",C,")"]},E.id)})]}),v.jsxs("div",{className:"flex justify-center gap-2",children:[v.jsxs(Ut,{variant:"outline",size:"sm",onClick:b,children:[v.jsx(rS,{className:"h-4 w-4 mr-2"}),"Shuffle"]}),l&&v.jsxs(Ut,{variant:"outline",size:"sm",onClick:()=>y(h),children:[v.jsx(Rb,{className:"h-4 w-4 mr-2"}),"Reset Order"]})]}),f.length>0?v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Card ",e+1," of ",f.length]}),v.jsx(Ee,{className:"min-h-[300px] cursor-pointer hover:border-primary/50 transition-all",onClick:()=>o(!a),children:v.jsxs(He,{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[v.jsx(si,{variant:"outline",className:"mb-4",children:a?"Answer":"Question"}),v.jsx("p",{className:"text-xl font-medium leading-relaxed",children:a?S.back:S.front}),v.jsxs("p",{className:"text-sm text-muted-foreground mt-6",children:["Click to ",a?"see question":"reveal answer"]})]})}),v.jsxs("div",{className:"flex justify-center items-center gap-4",children:[v.jsx(Ut,{variant:"outline",size:"icon",onClick:w,disabled:e===0,children:v.jsx(Md,{className:"h-5 w-5"})}),v.jsxs("span",{className:"text-sm text-muted-foreground min-w-[100px] text-center",children:[e+1," / ",f.length]}),v.jsx(Ut,{variant:"outline",size:"icon",onClick:A,disabled:e===f.length-1,children:v.jsx(Td,{className:"h-5 w-5"})})]})]}):v.jsx(Ee,{children:v.jsx(He,{className:"py-12 text-center text-muted-foreground",children:"No flashcards available for this selection."})})]})}function zE(){const{openPDF:h}=Hd();return v.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Past Exams"}),v.jsx("p",{className:"text-muted-foreground",children:"Practice with previous examination papers and solutions"})]}),v.jsx("div",{className:"grid gap-4",children:kw.map(t=>v.jsx(Ee,{className:"hover:border-primary/50 transition-colors",children:v.jsx(Ye,{children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Ls,{className:"h-6 w-6 text-primary"}),v.jsxs("div",{children:[v.jsx($e,{className:"text-lg",children:t.title}),v.jsx(In,{children:t.file})]})]}),v.jsxs(Ut,{onClick:()=>h(t.file),children:[v.jsx(Zr,{className:"h-4 w-4 mr-2"}),"Open PDF"]})]})})},t.id))}),v.jsx(Ee,{className:"bg-accent/50",children:v.jsx(He,{className:"py-6",children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx(si,{variant:"secondary",className:"mt-1",children:"Tip"}),v.jsxs("div",{className:"space-y-2",children:[v.jsx("p",{className:"font-medium",children:"How to use past exams effectively:"}),v.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[v.jsx("li",{children:"First attempt problems without looking at solutions"}),v.jsx("li",{children:"Time yourself to simulate exam conditions"}),v.jsx("li",{children:"Review solutions only after your attempt"}),v.jsx("li",{children:"Identify weak areas and revisit those chapters"})]})]})]})})})]})}const IE={lecture:v.jsx(co,{className:"h-5 w-5"}),tutorial:v.jsx(Cb,{className:"h-5 w-5"}),exam:v.jsx(Tb,{className:"h-5 w-5"}),other:v.jsx(Ls,{className:"h-5 w-5"})},Gl={lecture:"bg-blue-500/20 text-blue-400",tutorial:"bg-green-500/20 text-green-400",exam:"bg-purple-500/20 text-purple-400",other:"bg-zinc-500/20 text-zinc-400"};function UE(){const{openPDF:h}=Hd(),t=ss.reduce((e,s)=>{const a=s.chapter||"Other";return e[a]||(e[a]=[]),e[a].push(s),e},{});return v.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h1",{className:"text-3xl font-bold mb-2",children:"PDF Library"}),v.jsx("p",{className:"text-muted-foreground",children:"All course materials organized by chapter"})]}),v.jsxs("div",{className:"flex gap-2 flex-wrap justify-center",children:[v.jsxs(si,{className:Gl.lecture,children:[v.jsx(co,{className:"h-3 w-3 mr-1"}),"Lectures"]}),v.jsxs(si,{className:Gl.tutorial,children:[v.jsx(Cb,{className:"h-3 w-3 mr-1"}),"Tutorials"]}),v.jsxs(si,{className:Gl.exam,children:[v.jsx(Tb,{className:"h-3 w-3 mr-1"}),"Exams"]})]}),Object.entries(t).map(([e,s])=>v.jsxs(Ee,{children:[v.jsxs(Ye,{children:[v.jsx($e,{className:"text-lg",children:e}),v.jsxs(In,{children:[s.length," file(s)"]})]}),v.jsx(He,{className:"space-y-2",children:s.map(a=>v.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-accent/30 hover:bg-accent/50 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:`p-2 rounded ${Gl[a.type]}`,children:IE[a.type]}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium text-sm",children:a.title}),v.jsx("p",{className:"text-xs text-muted-foreground",children:a.file})]})]}),v.jsx(Ut,{size:"sm",variant:"ghost",onClick:()=>h(a.file),children:v.jsx(Zr,{className:"h-4 w-4"})})]},a.id))})]},e))]})}const HE="StudyAppPDFs",GE=1,xe="pdfs";class VE{db=null;initPromise=null;async init(){if(!this.db)return this.initPromise?this.initPromise:(this.initPromise=new Promise((t,e)=>{const s=indexedDB.open(HE,GE);s.onerror=()=>e(s.error),s.onsuccess=()=>{this.db=s.result,t()},s.onupgradeneeded=a=>{const o=a.target.result;o.objectStoreNames.contains(xe)||o.createObjectStore(xe,{keyPath:"filename"})}}),this.initPromise)}async get(t){return await this.init(),this.db?new Promise((e,s)=>{const l=this.db.transaction(xe,"readonly").objectStore(xe).get(t);l.onerror=()=>s(l.error),l.onsuccess=()=>{const u=l.result;if(u?.data){const d=u.data.slice(0);e(d)}else e(null)}}):null}async set(t,e){if(await this.init(),!this.db)return;const s=e.slice(0);return new Promise((a,o)=>{const d=this.db.transaction(xe,"readwrite").objectStore(xe).put({filename:t,data:s,size:s.byteLength,cachedAt:Date.now()});d.onerror=()=>o(d.error),d.onsuccess=()=>a()})}async has(t){return await this.init(),this.db?new Promise((e,s)=>{const l=this.db.transaction(xe,"readonly").objectStore(xe).getKey(t);l.onerror=()=>s(l.error),l.onsuccess=()=>e(l.result!==void 0)}):!1}async clear(){if(await this.init(),!!this.db)return new Promise((t,e)=>{const o=this.db.transaction(xe,"readwrite").objectStore(xe).clear();o.onerror=()=>e(o.error),o.onsuccess=()=>t()})}async delete(t){if(await this.init(),!!this.db)return new Promise((e,s)=>{const l=this.db.transaction(xe,"readwrite").objectStore(xe).delete(t);l.onerror=()=>s(l.error),l.onsuccess=()=>e()})}async getAllCached(){return await this.init(),this.db?new Promise((t,e)=>{const o=this.db.transaction(xe,"readonly").objectStore(xe).getAllKeys();o.onerror=()=>e(o.error),o.onsuccess=()=>t(o.result)}):[]}async getAllInfo(){return await this.init(),this.db?new Promise((t,e)=>{const o=this.db.transaction(xe,"readonly").objectStore(xe).getAll();o.onerror=()=>e(o.error),o.onsuccess=()=>{const l=o.result;t(l.map(u=>({filename:u.filename,size:u.size,cachedAt:u.cachedAt})))}}):[]}async getCacheSize(){return await this.init(),this.db?new Promise((t,e)=>{const o=this.db.transaction(xe,"readonly").objectStore(xe).getAll();o.onerror=()=>e(o.error),o.onsuccess=()=>{const u=o.result.reduce((d,f)=>d+(f.size||0),0);t(u)}}):0}async getCacheCount(){return await this.init(),this.db?new Promise((t,e)=>{const o=this.db.transaction(xe,"readonly").objectStore(xe).count();o.onerror=()=>e(o.error),o.onsuccess=()=>t(o.result)}):0}}const zn=new VE;async function qE(h){const t=await zn.get(h);if(t)return console.log(`[PDF Cache] Hit: ${h}`),t;console.log(`[PDF Cache] Miss: ${h}, fetching...`);const e=await fetch(`/pdfs/${encodeURIComponent(h)}`);if(!e.ok)throw new Error(`Failed to fetch PDF: ${h}`);const s=await e.arrayBuffer();return await zn.set(h,s),console.log(`[PDF Cache] Cached: ${h}`),s.slice(0)}function La(h){if(h===0)return"0 Bytes";const t=1024,e=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(h)/Math.log(t));return parseFloat((h/Math.pow(t,s)).toFixed(2))+" "+e[s]}const Py="studyAppProgress",Vl={chapters:{chaptersViewed:[],topicsCompleted:[],exercisesAttempted:[],lastViewedChapter:null,lastViewedAt:null},flashcards:{cardsStudied:[],cardsMarkedKnown:[],totalStudySessions:0,lastStudiedAt:null},pdfViews:{},totalStudyTime:0,lastActiveAt:Date.now(),createdAt:Date.now()};class XE{progress;saveTimeout=null;constructor(){this.progress=this.load()}load(){try{const t=localStorage.getItem(Py);if(t){const e=JSON.parse(t);return{...Vl,...e}}}catch(t){console.error("Failed to load study progress:",t)}return{...Vl}}save(){this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{try{this.progress.lastActiveAt=Date.now(),localStorage.setItem(Py,JSON.stringify(this.progress))}catch(t){console.error("Failed to save study progress:",t)}},500)}getProgress(){return{...this.progress}}markChapterViewed(t){this.progress.chapters.chaptersViewed.includes(t)||this.progress.chapters.chaptersViewed.push(t),this.progress.chapters.lastViewedChapter=t,this.progress.chapters.lastViewedAt=Date.now(),this.save()}markTopicCompleted(t){this.progress.chapters.topicsCompleted.includes(t)||this.progress.chapters.topicsCompleted.push(t),this.save()}markExerciseAttempted(t){this.progress.chapters.exercisesAttempted.includes(t)||this.progress.chapters.exercisesAttempted.push(t),this.save()}markCardStudied(t){this.progress.flashcards.cardsStudied.includes(t)||this.progress.flashcards.cardsStudied.push(t),this.progress.flashcards.lastStudiedAt=Date.now(),this.save()}markCardKnown(t){this.progress.flashcards.cardsMarkedKnown.includes(t)||this.progress.flashcards.cardsMarkedKnown.push(t),this.save()}unmarkCardKnown(t){this.progress.flashcards.cardsMarkedKnown=this.progress.flashcards.cardsMarkedKnown.filter(e=>e!==t),this.save()}incrementStudySessions(){this.progress.flashcards.totalStudySessions++,this.save()}recordPDFView(t){this.progress.pdfViews[t]=(this.progress.pdfViews[t]||0)+1,this.save()}addStudyTime(t){this.progress.totalStudyTime+=t,this.save()}getStats(){const t=Object.values(this.progress.pdfViews).reduce((u,d)=>u+d,0),e=this.progress.totalStudyTime,s=Math.floor(e/3600),a=Math.floor(e%3600/60),o=s>0?`${s}h ${a}m`:`${a}m`,l=Math.ceil((Date.now()-this.progress.createdAt)/(1e3*60*60*24));return{chaptersViewedCount:this.progress.chapters.chaptersViewed.length,topicsCompletedCount:this.progress.chapters.topicsCompleted.length,exercisesAttemptedCount:this.progress.chapters.exercisesAttempted.length,flashcardsStudiedCount:this.progress.flashcards.cardsStudied.length,flashcardsKnownCount:this.progress.flashcards.cardsMarkedKnown.length,totalPDFViews:t,totalStudyTimeFormatted:o,daysSinceStart:l}}reset(){this.progress={...Vl,createdAt:Date.now()},this.save()}export(){return JSON.stringify(this.progress,null,2)}import(t){try{const e=JSON.parse(t);return this.progress={...Vl,...e},this.save(),!0}catch{return!1}}}const Na=new XE;function YE(){const[h,t]=R.useState({size:0,count:0,files:[]}),[e,s]=R.useState(Na.getStats()),[a,o]=R.useState({isDownloading:!1,currentFile:"",progress:0,downloaded:0,total:0,errors:[]}),[l,u]=R.useState(!1),[d,f]=R.useState(!1),m=async()=>{const[S,E,C]=await Promise.all([zn.getCacheSize(),zn.getCacheCount(),zn.getAllInfo()]);t({size:S,count:E,files:C})};R.useEffect(()=>{m(),s(Na.getStats())},[]);const y=async()=>{await zn.clear(),await m(),u(!1)},b=()=>{Na.reset(),s(Na.getStats()),f(!1)},A=async()=>{const S=ss.map(M=>M.file),E=await zn.getAllCached(),C=S.filter(M=>!E.includes(M));if(C.length===0){alert("All PDFs are already cached!");return}o({isDownloading:!0,currentFile:"",progress:0,downloaded:0,total:C.length,errors:[]});const T=[];for(let M=0;M<C.length;M++){const D=C[M];o(k=>({...k,currentFile:D,progress:M/C.length*100}));try{const k=await fetch(`/pdfs/${encodeURIComponent(D)}`);if(!k.ok)throw new Error(`HTTP ${k.status}`);const F=await k.arrayBuffer();await zn.set(D,F)}catch{T.push(D)}o(k=>({...k,downloaded:M+1,progress:(M+1)/C.length*100}))}o(M=>({...M,isDownloading:!1,errors:T})),await m()},w=ss.length-h.count;return v.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Settings & Storage"}),v.jsx("p",{className:"text-muted-foreground",children:"Manage cache, progress, and app settings"})]}),v.jsxs(Ee,{children:[v.jsxs(Ye,{children:[v.jsxs($e,{className:"flex items-center gap-2",children:[v.jsx(wA,{className:"h-5 w-5"}),"Study Statistics"]}),v.jsx(In,{children:"Your learning progress at a glance"})]}),v.jsxs(He,{children:[v.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[v.jsxs("div",{className:"text-center p-4 bg-accent/30 rounded-lg",children:[v.jsx(co,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),v.jsx("div",{className:"text-2xl font-bold",children:e.chaptersViewedCount}),v.jsx("div",{className:"text-xs text-muted-foreground",children:"Chapters Viewed"})]}),v.jsxs("div",{className:"text-center p-4 bg-accent/30 rounded-lg",children:[v.jsx(wb,{className:"h-6 w-6 mx-auto mb-2 text-green-500"}),v.jsx("div",{className:"text-2xl font-bold",children:e.topicsCompletedCount}),v.jsx("div",{className:"text-xs text-muted-foreground",children:"Topics Completed"})]}),v.jsxs("div",{className:"text-center p-4 bg-accent/30 rounded-lg",children:[v.jsx(AA,{className:"h-6 w-6 mx-auto mb-2 text-purple-500"}),v.jsx("div",{className:"text-2xl font-bold",children:e.flashcardsKnownCount}),v.jsx("div",{className:"text-xs text-muted-foreground",children:"Cards Mastered"})]}),v.jsxs("div",{className:"text-center p-4 bg-accent/30 rounded-lg",children:[v.jsx(Ls,{className:"h-6 w-6 mx-auto mb-2 text-blue-500"}),v.jsx("div",{className:"text-2xl font-bold",children:e.totalPDFViews}),v.jsx("div",{className:"text-xs text-muted-foreground",children:"PDF Views"})]})]}),v.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm text-muted-foreground",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx(_b,{className:"h-4 w-4"}),"Study time: ",e.totalStudyTimeFormatted]}),v.jsxs("span",{children:[e.daysSinceStart," day(s) since you started"]})]})]})]}),v.jsxs(Ee,{children:[v.jsxs(Ye,{children:[v.jsxs($e,{className:"flex items-center gap-2",children:[v.jsx(Mb,{className:"h-5 w-5"}),"PDF Cache"]}),v.jsx(In,{children:"Cached PDFs load instantly without internet"})]}),v.jsxs(He,{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-2xl font-bold",children:La(h.size)}),v.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.count," of ",ss.length," PDFs cached"]})]}),v.jsx("div",{className:"flex gap-2",children:v.jsxs(Ut,{variant:"outline",size:"sm",onClick:m,children:[v.jsx(QA,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),v.jsx(eo,{value:h.count/ss.length*100,className:"h-2"}),w>0&&!a.isDownloading&&v.jsx("div",{className:"p-4 bg-accent/30 rounded-lg",children:v.jsxs("div",{className:"flex items-start gap-3",children:[v.jsx(Sy,{className:"h-5 w-5 text-yellow-500 mt-0.5"}),v.jsxs("div",{className:"flex-1",children:[v.jsxs("p",{className:"font-medium",children:[w," PDF(s) not cached"]}),v.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Download all PDFs now for offline access and faster loading."}),v.jsxs(Ut,{onClick:A,children:[v.jsx(Rd,{className:"h-4 w-4 mr-2"}),"Download All (",w," files)"]})]})]})}),a.isDownloading&&v.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"font-medium",children:"Downloading PDFs..."}),v.jsxs("span",{className:"text-sm text-muted-foreground",children:[a.downloaded," / ",a.total]})]}),v.jsx(eo,{value:a.progress,className:"h-2"}),v.jsx("p",{className:"text-sm text-muted-foreground truncate",children:a.currentFile})]}),a.errors.length>0&&!a.isDownloading&&v.jsx("div",{className:"p-4 bg-destructive/10 rounded-lg",children:v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx(Eb,{className:"h-5 w-5 text-destructive mt-0.5"}),v.jsxs("div",{children:[v.jsxs("p",{className:"font-medium text-destructive",children:[a.errors.length," file(s) failed to download"]}),v.jsxs("ul",{className:"text-sm text-muted-foreground mt-1",children:[a.errors.slice(0,3).map(S=>v.jsxs("li",{children:[" ",S]},S)),a.errors.length>3&&v.jsxs("li",{children:[" and ",a.errors.length-3," more..."]})]})]})]})}),h.files.length>0&&v.jsxs("div",{className:"space-y-2",children:[v.jsx("h4",{className:"font-medium text-sm",children:"Cached Files"}),v.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:h.files.map(S=>v.jsxs("div",{className:"flex items-center justify-between p-2 text-sm bg-accent/20 rounded",children:[v.jsx("span",{className:"truncate flex-1",children:S.filename}),v.jsx(si,{variant:"secondary",className:"ml-2",children:La(S.size)})]},S.filename))})]})]})]}),v.jsxs(Ee,{className:"border-destructive/50",children:[v.jsxs(Ye,{children:[v.jsxs($e,{className:"text-destructive flex items-center gap-2",children:[v.jsx(Sy,{className:"h-5 w-5"}),"Danger Zone"]}),v.jsx(In,{children:"Irreversible actions"})]}),v.jsxs(He,{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium",children:"Clear PDF Cache"}),v.jsxs("p",{className:"text-sm text-muted-foreground",children:["Remove all cached PDFs (",La(h.size),")"]})]}),l?v.jsxs("div",{className:"flex gap-2",children:[v.jsx(Ut,{variant:"outline",size:"sm",onClick:()=>u(!1),children:"Cancel"}),v.jsx(Ut,{variant:"destructive",size:"sm",onClick:y,children:"Confirm"})]}):v.jsxs(Ut,{variant:"outline",onClick:()=>u(!0),children:[v.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Clear Cache"]})]}),v.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg",children:[v.jsxs("div",{children:[v.jsx("p",{className:"font-medium",children:"Reset Study Progress"}),v.jsx("p",{className:"text-sm text-muted-foreground",children:"Clear all your learning statistics and start fresh"})]}),d?v.jsxs("div",{className:"flex gap-2",children:[v.jsx(Ut,{variant:"outline",size:"sm",onClick:()=>f(!1),children:"Cancel"}),v.jsx(Ut,{variant:"destructive",size:"sm",onClick:b,children:"Confirm"})]}):v.jsxs(Ut,{variant:"outline",onClick:()=>f(!0),children:[v.jsx(Ay,{className:"h-4 w-4 mr-2"}),"Reset Progress"]})]})]})]})]})}const Xe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),fd=[.001,0,0,.001,0,0],Jh=1.35,gn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ii={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},io="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},I0={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Be={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Jr={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},fe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ta={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},po={ERRORS:0,WARNINGS:1,INFOS:5},Ua={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ql={moveTo:0,lineTo:1,curveTo:2,closePath:3},U0={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let vc=po.WARNINGS;function $E(h){Number.isInteger(h)&&(vc=h)}function KE(){return vc}function xc(h){vc>=po.INFOS&&console.info(`Info: ${h}`)}function St(h){vc>=po.WARNINGS&&console.warn(`Warning: ${h}`)}function Zt(h){throw new Error(h)}function Pt(h,t){h||Zt(t)}function WE(h){switch(h?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Gd(h,t=null,e=null){if(!h)return null;if(e&&typeof h=="string"&&(e.addDefaultProtocol&&h.startsWith("www.")&&h.match(/\./g)?.length>=2&&(h=`http://${h}`),e.tryConvertEncoding))try{h=eC(h)}catch{}const s=t?URL.parse(h,t):URL.parse(h);return WE(s)?s:null}function Vd(h,t,e=!1){const s=URL.parse(h);return s?(s.hash=t,s.href):e&&Gd(h,"http://example.com")?h.split("#",1)[0]+`${t?`#${t}`:""}`:""}function _t(h,t,e,s=!1){return Object.defineProperty(h,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Bs=(function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class jy extends Bs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class td extends Bs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class lc extends Bs{constructor(t){super(t,"InvalidPDFException")}}class so extends Bs{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class QE extends Bs{constructor(t){super(t,"FormatError")}}class _i extends Bs{constructor(t){super(t,"AbortException")}}function H0(h){(typeof h!="object"||h?.length===void 0)&&Zt("Invalid argument for bytesToString");const t=h.length,e=8192;if(t<e)return String.fromCharCode.apply(null,h);const s=[];for(let a=0;a<t;a+=e){const o=Math.min(a+e,t),l=h.subarray(a,o);s.push(String.fromCharCode.apply(null,l))}return s.join("")}function mo(h){typeof h!="string"&&Zt("Invalid argument for stringToBytes");const t=h.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=h.charCodeAt(s)&255;return e}function ZE(h){return String.fromCharCode(h>>24&255,h>>16&255,h>>8&255,h&255)}function JE(){const h=new Uint8Array(4);return h[0]=1,new Uint32Array(h.buffer,0,1)[0]===1}function tC(){try{return new Function(""),!0}catch{return!1}}class De{static get isLittleEndian(){return _t(this,"isLittleEndian",JE())}static get isEvalSupported(){return _t(this,"isEvalSupported",tC())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return _t(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return _t(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return _t(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const ed=Array.from(Array(256).keys(),h=>h.toString(16).padStart(2,"0"));class it{static makeHexColor(t,e,s){return`#${ed[t]}${ed[e]}${ed[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,s=0){const a=t[s],o=t[s+1];t[s]=a*e[0]+o*e[2]+e[4],t[s+1]=a*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const a=e[0],o=e[1],l=e[2],u=e[3],d=e[4],f=e[5];for(let m=0;m<6;m+=2){const y=t[s+m],b=t[s+m+1];t[s+m]=y*a+b*l+d,t[s+m+1]=y*o+b*u+f}}static applyInverseTransform(t,e){const s=t[0],a=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-s*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,s){const a=e[0],o=e[1],l=e[2],u=e[3],d=e[4],f=e[5],m=t[0],y=t[1],b=t[2],A=t[3];let w=a*m+d,S=w,E=a*b+d,C=E,T=u*y+f,M=T,D=u*A+f,k=D;if(o!==0||l!==0){const F=o*m,B=o*b,P=l*y,H=l*A;w+=P,C+=P,E+=H,S+=H,T+=F,k+=F,D+=B,M+=B}s[0]=Math.min(s[0],w,E,S,C),s[1]=Math.min(s[1],T,D,M,k),s[2]=Math.max(s[2],w,E,S,C),s[3]=Math.max(s[3],T,D,M,k)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],a=t[1],o=t[2],l=t[3],u=s**2+a**2,d=s*o+a*l,f=o**2+l**2,m=(u+f)/2,y=Math.sqrt(m**2-(u*f-d**2));e[0]=Math.sqrt(m+y||1),e[1]=Math.sqrt(m-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>a)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[s,o,a,l]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,a,o){o[0]=Math.min(o[0],t,s),o[1]=Math.min(o[1],e,a),o[2]=Math.max(o[2],t,s),o[3]=Math.max(o[3],e,a)}static#t(t,e,s,a,o,l,u,d,f,m){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,w=y*(y*(y*t+3*f*e)+3*b*s)+A*a,S=y*(y*(y*o+3*f*l)+3*b*u)+A*d;m[0]=Math.min(m[0],w),m[1]=Math.min(m[1],S),m[2]=Math.max(m[2],w),m[3]=Math.max(m[3],S)}static#e(t,e,s,a,o,l,u,d,f,m,y,b){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,e,s,a,o,l,u,d,-y/m,b);return}const A=m**2-4*y*f;if(A<0)return;const w=Math.sqrt(A),S=2*f;this.#t(t,e,s,a,o,l,u,d,(-m+w)/S,b),this.#t(t,e,s,a,o,l,u,d,(-m-w)/S,b)}static bezierBoundingBox(t,e,s,a,o,l,u,d,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,d),this.#e(t,s,o,u,e,a,l,d,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),f),this.#e(t,s,o,u,e,a,l,d,3*(-e+3*(a-l)+d),6*(e-2*a+l),3*(a-e),f)}}function eC(h){return decodeURIComponent(escape(h))}let nd=null,By=null;function G0(h){return nd||(nd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,By=new Map([["","t"]])),h.replaceAll(nd,(t,e,s)=>e?e.normalize("NFKC"):By.get(s))}function qd(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const h=new Uint8Array(32);return crypto.getRandomValues(h),H0(h)}const Xd="pdfjs_internal_id_";function nC(h,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,a,...o]=e;if(!h(s)&&!Number.isInteger(s)||!t(a))return!1;const l=o.length;let u=!0;switch(a.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const d of o)if(!(typeof d=="number"||u&&d===null))return!1;return!0}function Ue(h,t,e){return Math.min(Math.max(h,t),e)}function V0(h){return Uint8Array.prototype.toBase64?h.toBase64():btoa(H0(h))}function iC(h){return Uint8Array.fromBase64?Uint8Array.fromBase64(h):mo(atob(h))}typeof Promise.try!="function"&&(Promise.try=function(h,...t){return new Promise(e=>{e(h(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(h){return h.reduce((t,e)=>t+e,0)});class ao{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function a(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if(ao.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const d of o.children)a(d)}return a(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Yd{static setupStorage(t,e,s,a,o){const l=a.getValue(e,{value:null});switch(s.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(l.value===s.attributes.xfaOn?t.setAttribute("checked",!0):l.value===s.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{a.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{a.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of s.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const d=u.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:a,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${a}`);for(const[d,f]of Object.entries(l))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),s&&l.dataId&&this.setupStorage(t,l.dataId,e,s)}static render(t){const e=t.annotationStorage,s=t.linkService,a=t.xfaHtml,o=t.intent||"display",l=document.createElement(a.name);a.attributes&&this.setAttributes({html:l,element:a,intent:o,linkService:s});const u=o!=="richText",d=t.div;if(d.append(l),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}u&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);l.append(y),u&&ao.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const m=[[a,-1,l]];for(;m.length>0;){const[y,b,A]=m.at(-1);if(b+1===y.children.length){m.pop();continue}const w=y.children[++m.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const C=document.createTextNode(w.value);f.push(C),A.append(C);continue}const E=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(E),w.attributes&&this.setAttributes({html:E,element:w,storage:e,intent:o,linkService:s}),w.children?.length>0)m.push([w,-1,E]);else if(w.value){const C=document.createTextNode(w.value);u&&ao.shouldBuildText(S)&&f.push(C),E.append(C)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ei="http://www.w3.org/2000/svg";class Os{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ya(h,t="text"){if(Kr(h,document.baseURI)){const e=await fetch(h);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const a=new XMLHttpRequest;a.open("GET",h,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}s(new Error(a.statusText))}},a.send(null)})}class go{constructor({viewBox:t,userUnit:e,scale:s,rotation:a,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=a,this.offsetX=o,this.offsetY=l,s*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,y,b,A;switch(a%=360,a<0&&(a+=360),a){case 180:m=-1,y=0,b=0,A=1;break;case 90:m=0,y=1,b=1,A=0;break;case 270:m=0,y=-1,b=-1,A=0;break;case 0:m=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,A=-A);let w,S,E,C;m===0?(w=Math.abs(f-t[1])*s+o,S=Math.abs(d-t[0])*s+l,E=(t[3]-t[1])*s,C=(t[2]-t[0])*s):(w=Math.abs(d-t[0])*s+o,S=Math.abs(f-t[1])*s+l,E=(t[2]-t[0])*s,C=(t[3]-t[1])*s),this.transform=[m*s,y*s,b*s,A*s,w-m*s*d-b*s*f,S-y*s*d-A*s*f],this.width=E,this.height=C}get rawDims(){const t=this.viewBox;return _t(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new go({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}convertToViewportPoint(t,e){const s=[t,e];return it.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];it.applyTransform(e,this.transform);const s=[t[2],t[3]];return it.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return it.applyInverseTransform(s,this.transform),s}}class Ac extends Bs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function yo(h){const t=h.length;let e=0;for(;e<t&&h[e].trim()==="";)e++;return h.substring(e,e+5).toLowerCase()==="data:"}function Sc(h){return typeof h=="string"&&/\.pdf$/i.test(h)}function q0(h){return[h]=h.split(/[#?]/,1),h.substring(h.lastIndexOf("/")+1)}function X0(h,t="document.pdf"){if(typeof h!="string")return t;if(yo(h))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(h);if(!s)return t;const a=u=>{try{let d=decodeURIComponent(u);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:u):d}catch{return u}},o=/\.pdf$/i,l=s.pathname.split("/").at(-1);if(o.test(l))return a(l);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const f of u)if(o.test(f))return a(f);const d=Array.from(s.searchParams.keys()).reverse();for(const f of d)if(o.test(f))return a(f)}if(s.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(d)return a(d[0])}return t}class Fy{started=Object.create(null);times=[];time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:a,end:o}of this.times)t.push(`${s.padEnd(e)} ${o-a}ms
`);return t.join("")}}function Kr(h,t){const e=t?URL.parse(h,t):URL.parse(h);return e?.protocol==="http:"||e?.protocol==="https:"}function vn(h){h.preventDefault()}function re(h){h.preventDefault(),h.stopPropagation()}function sC(h){console.log("Deprecated API usage: "+h)}class cc{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const s=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(l+=m,u+=y):f==="+"&&(l-=m,u-=y),new Date(Date.UTC(s,a,o,l,u,d))}}function Y0(h,{scale:t=1,rotation:e=0}){const{width:s,height:a}=h.attributes.style,o=[0,0,parseInt(s),parseInt(a)];return new go({viewBox:o,userUnit:1,scale:t,rotation:e})}function $a(h){if(h.startsWith("#")){const t=parseInt(h.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return h.startsWith("rgb(")?h.slice(4,-1).split(",").map(t=>parseInt(t)):h.startsWith("rgba(")?h.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${h}"`),[0,0,0])}function aC(h){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of h.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;h.set(e,$a(s))}t.remove()}function ae(h){const{a:t,b:e,c:s,d:a,e:o,f:l}=h.getTransform();return[t,e,s,a,o,l]}function Zn(h){const{a:t,b:e,c:s,d:a,e:o,f:l}=h.getTransform().invertSelf();return[t,e,s,a,o,l]}function rs(h,t,e=!1,s=!0){if(t instanceof go){const{pageWidth:a,pageHeight:o}=t.rawDims,{style:l}=h,u=De.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,m=u?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=m,l.height=y):(l.width=y,l.height=m)}s&&h.setAttribute("data-main-rotation",t.rotation)}class Hn{constructor(){const{pixelRatio:t}=Hn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,a,o=-1){let l=1/0,u=1/0,d=1/0;s=Hn.capPixels(s,o),s>0&&(l=Math.sqrt(s/(t*e))),a!==-1&&(u=a/t,d=a/e);const f=Math.min(l,u,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const uc=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class rC{static get isDarkMode(){return _t(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class $0{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),_t(this,"commentForegroundColor",$a(s))}}function K0(h,t,e,s){s=Math.min(Math.max(s??1,0),1);const a=255*(1-s);return h=Math.round(h*s+a),t=Math.round(t*s+a),e=Math.round(e*s+a),[h,t,e]}function zy(h,t){const e=h[0]/255,s=h[1]/255,a=h[2]/255,o=Math.max(e,s,a),l=Math.min(e,s,a),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const d=o-l;switch(t[1]=u<.5?d/(o+l):d/(2-o-l),o){case e:t[0]=((s-a)/d+(s<a?6:0))*60;break;case s:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-s)/d+4)*60;break}}t[2]=u}function pd(h,t){const e=h[0],s=h[1],a=h[2],o=(1-Math.abs(2*a-1))*s,l=o*(1-Math.abs(e/60%2-1)),u=a-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function Iy(h){return h<=.03928?h/12.92:((h+.055)/1.055)**2.4}function Uy(h,t,e){pd(h,e),e.map(Iy);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];pd(t,e),e.map(Iy);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return s>a?(s+.05)/(a+.05):(a+.05)/(s+.05)}const Hy=new Map;function W0(h,t){const e=h[0]+h[1]*256+h[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Hy.get(e);if(s)return s;const a=new Float32Array(9),o=a.subarray(0,3),l=a.subarray(3,6);zy(h,l);const u=a.subarray(6,9);zy(t,u);const d=u[2]<.5,f=d?12:4.5;if(l[2]=d?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Uy(l,u,o)<f){let m,y;d?(m=l[2],y=1):(m=0,y=l[2]);const b=.005;for(;y-m>b;){const A=l[2]=(m+y)/2;d===Uy(l,u,o)<f?m=A:y=A}l[2]=d?y:m}return pd(l,o),s=it.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Hy.set(e,s),s}function $d({html:h,dir:t,className:e},s){const a=document.createDocumentFragment();if(typeof h=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=h.split(/(?:\r\n?|\n)/);for(let u=0,d=l.length;u<d;++u){const f=l[u];o.append(document.createTextNode(f)),u<d-1&&o.append(document.createElement("br"))}a.append(o)}else Yd.render({xfaHtml:h,div:a,intent:"richText"});a.firstChild.classList.add("richText",e),s.append(a)}class to{#t=null;#e=null;#i;#n=null;#r=null;#s=null;#a=null;#o=null;static#c=null;constructor(t){this.#i=t,to.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",vn,{signal:e}),t.addEventListener("pointerdown",to.#l,{signal:e}));const s=this.#n=document.createElement("div");s.className="buttons",t.append(s);const a=this.#i.toolbarPosition;if(a){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,re(t)}#h(t){this.#i._focusEventsAllowed=!0,re(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",vn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",to.#c[t]),this.#f(s)&&s.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(s)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#r=t}addComment(t,e=null){if(this.#s)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const a=this.#a=this.#g;e?(this.#n.insertBefore(s,e),this.#n.insertBefore(a,e)):this.#n.append(s,a),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}async addButtonBefore(t,e,s){const a=this.#n.querySelector(s);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class oC{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",vn,{signal:e});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#i.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let s=0,a=0;for(const o of t){const l=o.y+o.height;if(l<s)continue;const u=o.x+(e?o.width:0);if(l>s){a=u,s=l;continue}e?u>a&&(a=u):u<a&&(a=u)}return[e?1-a:a,s]}show(t,e,s){const[a,o]=this.#r(e,s),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*a}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,e,s,a){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",s);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",vn,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#t.append(o)}}function Q0(h,t,e){for(const s of e)t.addEventListener(s,h[s].bind(h))}class lC{#t=0;get id(){return`${io}${this.#t++}`}}class Kd{#t=qd();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const o=a.decode().then(()=>(s.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return _t(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let s=this.#i.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(s.url=e,a=await Ya(e,"blob")):e instanceof File?a=s.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const o=Kd._isSVGFittingCanvas,l=new FileReader,u=new Image,d=new Promise((f,m)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,f()},l.onload=async()=>{const y=s.svgUrl=l.result;u.src=await o?`${y}#svgView(preserveAspectRatio(none))`:y},u.onerror=l.onerror=m});l.readAsDataURL(a),await d}else s.bitmap=await createImageBitmap(a);s.refCounter=1}catch(a){St(a),s=null}return this.#i.set(t,s),s&&this.#i.set(s.id,s),s}async getFromFile(t){const{lastModified:e,name:s,size:a,type:o}=t;return this.#n(`${e}_${s}_${a}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const s=await e;return this.#n(t,s)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let s=this.#i.get(t);if(s?.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),s={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,s),this.#i.set(s.id,s),s}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(s.width,s.height);a.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=a.convertToBlob()}s.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class cC{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:s,mustExec:a,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:s,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(l&&this.#t[this.#n].type===o){u&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class bo{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=De.platform;for(const[s,a,o={}]of t)for(const l of s){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:a,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(this.#t(e));if(!s)return;const{callback:a,options:{bubbles:o=!1,args:l=[],checker:u=null}}=s;u&&!u(t,e)||(a.bind(t,...l,e)(),o||re(e))}}class Wd{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return aC(t),_t(this,"_colors",t)}convert(t){const e=$a(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,a]of this._colors)if(a.every((o,l)=>o===e[l]))return Wd._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?it.makeHexColor(...e):t}}class Ti{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#s=null;#a=null;#o=null;#c=new cC;#l=null;#d=null;#h=null;#f=0;#g=new Set;#p=null;#u=null;#m=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#C=null;#w=null;#x=null;#T=null;#S=!1;#E=null;#N=new lC;#M=!1;#R=!1;#B=!1;#k=null;#O=null;#F=null;#P=null;#V=null;#_=At.NONE;#A=new Set;#L=null;#z=null;#U=null;#Y=null;#X=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#j=null;#q=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Ti.prototype,e=l=>l.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),s=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:d}=u;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return _t(this,"_keyboardManager",new bo([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,s,a,o,l,u,d,f,m,y,b,A,w,S,E){const C=this._signal=this.#t.signal;this.#q=t,this.#Z=e,this.#J=s,this.#s=a,this.#l=o,this.#z=l,this.#X=d,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:C}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),u._on("setpreference",this.onSetPreference.bind(this),{signal:C}),u._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:C}),window.addEventListener("pointerdown",()=>{this.#R=!0},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{this.#R=!1},{capture:!0,signal:C}),this.#lt(),this.#dt(),this.#et(),this.#a=d.annotationStorage,this.#C=d.filterFactory,this.#U=f,this.#T=m||null,this.#y=y,this.#v=b,this.#b=A,this.#V=w||null,this.viewParameters={realScale:Os.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=E!==!1,o?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#m.clear(),this.#P?.clear(),this.#e=null,this.#A.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#z?.destroy(),this.#E?.hide(),this.#E=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#j&&(clearTimeout(this.#j),this.#j=null),this._editorUndoBar?.destroy(),this.#X=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return _t(this,"hcmFilter",this.#U?this.#C.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return _t(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return _t(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return _t(this,"highlightColors",null);const e=new Map,s=!!this.#U;for(const[a,o]of t){const l=a.endsWith("_HCM");if(s&&l){e.set(a.replace("_HCM",""),o);continue}!s&&!l&&e.set(a,o)}return _t(this,"highlightColors",e)}get highlightColorNames(){return _t(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#s?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,s,a){this.#l?.showDialog(this,t,e,s,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,s=void 0){this.#l?.toggleCommentPopup(t,e,s)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:s}=Promise.withResolvers(),a=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await s}getSignature(t){this.#z?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#z}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":this.#b=e;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const s of this.#r.values()){const{x:a,y:o,width:l,height:u}=s.div.getBoundingClientRect();if(t>=a&&t<=a+l&&e>=o&&e<=o+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#m.add(t)}removeShouldRescale(t){this.#m.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Os.PDF_TO_CSS_UNITS;for(const e of this.#m)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",e=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u}=s,d=s.toString(),m=this.#Q(s).closest(".textLayer"),y=this.getSelectionBoxes(m);if(!y)return;s.empty();const b=this.#tt(m),A=this.#_===At.NONE,w=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:o,focusNode:l,focusOffset:u,text:d});A&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(A){this.switchToMode(At.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(s);a&&(this.#E||=new oC(this),this.#E.show(s,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const e=`${io}${t}`,s=this.#a.getRawValue(e);return s&&this.#a.remove(e),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,e=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),e?s.setAttribute("data-l10n-args",JSON.stringify(e)):s.removeAttribute("data-l10n-args"))}#ot(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#D({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#L)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#L&&(this.#E?.hide(),this.#L=null,this.#D({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=e,this.#D({hasSelectedText:!0}),!(this.#_!==At.HIGHLIGHT&&this.#_!==At.NONE)&&(this.#_===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#_===At.HIGHLIGHT?this.#tt(a):null;if(o?.toggleDrawing(),this.#R){const l=new AbortController,u=this.combinedSignal(l),d=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#_===At.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#rt()}#lt(){document.addEventListener("selectionchange",this.#ot.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#A)if(e.div.contains(t)){this.#O=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,e]=this.#O;this.#O=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#k?.abort(),this.#k=null}#nt(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#it(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#nt()}removeEditListeners(){this.#ht(),this.#it()}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of this.#A){const a=s.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){St(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const d of s){const f=await a.deserialize(d);if(!f)return;o.push(f)}const l=()=>{for(const d of o)this.#st(d);this.#at(o)},u=()=>{for(const d of o)d.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){St(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==At.NONE&&!this.isEditorHandlingKeyboard&&Ti._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(t){Object.entries(t).some(([s,a])=>this.#$[s]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#_===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Lt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#nt(),this.#D({isEditing:this.#_!==At.NONE,isEmpty:this.#W(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#it(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#M?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,s=!1,a=!1,o=!1){if(this.#_!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#_===At.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=t,t===At.NONE){this.setEditingState(!1),this.#pt();for(const l of this.#n.values())l.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const l of this.#n.values())l.addStandaloneCommentButton();t===At.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const l of this.#r.values())l.updateMode(t);if(t===At.POPUP){this.#i||=await this.#X.getAnnotationsByType(new Set(this.#u.map(d=>d._editorType)));const l=new Set,u=[];for(const d of this.#n.values()){const{annotationElementId:f,hasComment:m,deleted:y}=d;f&&l.add(f),m&&!y&&u.push(d.getData())}for(const d of this.#i){const{id:f,popupRef:m,contentsObj:y}=d;m&&y?.str&&!l.has(f)&&!this.#g.has(f)&&u.push(d)}this.#l?.showSidebar(u)}if(!e){s&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const l of this.#n.values())l.uid===e?(this.setSelected(l),o?l.editComment():a?l.enterInEditMode():l.focus()):l.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Lt.CREATE:this.currentLayer.addNewEditor(e);return;case Lt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const s of this.#A)s.updateParams(t,e);else for(const s of this.#u)s.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#Y?.get(Lt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Lt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#B!==t){this.#B=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#M){this.#M=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#M){this.#M=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#P?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#A);return t}updateUI(t){this.#mt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#A.has(t)){this.#A.delete(t),t.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#A.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const e of this.#A)e!==t&&e.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#W()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#W()})}addCommands(t){this.#c.add(t),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#W()})}cleanUndoStack(t){this.#c.cleanType(t)}#W(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#A],s=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},a=()=>{for(const o of e)this.#st(o)};this.addCommands({cmd:s,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const e of this.#A)e.unselect();this.#A.clear();for(const e of t)e.isEmpty()||(this.#A.add(e),e.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#at(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#_!==At.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[a,o]=this.#H,l=[...this.#A],u=1e3;this.#j&&clearTimeout(this.#j),this.#j=setTimeout(()=>{this.#j=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(a,o),d.translationDone())},undo:()=>{for(const d of l)this.#n.has(d.id)&&(d.translateInPage(-a,-o),d.translationDone())},mustExec:!1})},u);for(const d of l)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const t of this.#A)this.#p.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const t=this.#p;this.#p=null;let e=!1;for(const[{x:a,y:o,pageIndex:l},u]of t)u.newX=a,u.newY=o,u.newPageIndex=l,e||=a!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const s=(a,o,l,u)=>{if(this.#n.has(a.id)){const d=this.#r.get(u);d?a._setParentAndPosition(d,o,l):(a.pageIndex=u,a.x=o,a.y=l)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:l,newPageIndex:u}]of t)s(a,o,l,u)},undo:()=>{for(const[a,{savedX:o,savedY:l,savedPageIndex:u}]of t)s(a,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#p)for(const s of this.#p.keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#_}isEditingMode(){return this.#_!==At.NONE}get imageManager(){return _t(this,"imageManager",new Kd)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:s,y:a,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,m,y,b)=>({x:(m-a)/l,y:1-(f+y-s)/o,width:b/l,height:y/o});break;case"180":u=(f,m,y,b)=>({x:1-(f+y-s)/o,y:1-(m+b-a)/l,width:y/o,height:b/l});break;case"270":u=(f,m,y,b)=>({x:1-(m+b-a)/l,y:(f-s)/o,width:b/l,height:y/o});break;default:u=(f,m,y,b)=>({x:(f-s)/o,y:(m-a)/l,width:y/o,height:b/l});break}const d=[];for(let f=0,m=e.rangeCount;f<m;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:w,height:S}of y.getClientRects())w===0||S===0||d.push(u(b,A,w,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const s=this.#a.getRawValue(e);s&&(this.#_===At.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){const a=this.#P?.get(t);a&&(a.setCanvas(e,s),this.#P.delete(t))}addMissingCanvas(t,e){(this.#P||=new Map).set(t,e)}}class ei{#t=null;#e=!1;#i=null;#n=null;#r=null;#s=null;#a=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,ei.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ei._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",ei.#f.missing),e.setAttribute("data-l10n-id",ei.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",vn,{signal:s}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#a=!0,a(o))},{signal:s}),await this.#p(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await ei._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#p())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:a,cancel:o=!1}){s&&(this.#l=s,this.#d=a),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#p())}toggle(t=!1){this.#i&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#p(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",ei.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ei.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Xl{#t=null;#e=null;#i=!1;#n=null;#r=null;#s=null;#a=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(s.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:s}=this.#t.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-a)/l,(e+s-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#n._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",vn,{signal:s}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,re(o)},{capture:!0,signal:s}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,re(o)},{capture:!0,signal:s})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const a=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:s}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:s}),t}edit(t){const e=this.commentPopupPositionInLayer;let s,a;if(e)[s,a]=e;else{[s,a]=this.#n.commentButtonPosition;const{width:m,height:y,x:b,y:A}=this.#n;s=b+s*m,a=A+a*y}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:d,height:f}=o;this.#n._uiManager.editComment(this.#n,l+s*d,u+a*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#s=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class vo{#t;#e=!1;#i=null;#n;#r;#s;#a;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#i=s,this.#n=e,this.#r=a,this.#s=o,this.#a=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Hn.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(re(f),d(f))},u),l.addEventListener("pointerup",d,u),l.addEventListener("pointercancel",d,u);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const u=this.#p.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",re,l),o.addEventListener("pointermove",re,l),o.addEventListener("pointercancel",re,l),o.addEventListener("pointerup",re,l),this.#r?.()}if(re(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;re(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:a,screenY:o}=e,{screenX:l,screenY:u}=s,d=this.#l,{touch0X:f,touch0Y:m,touch1X:y,touch1Y:b}=d,A=y-f,w=b-m,S=l-a,E=u-o,C=Math.hypot(S,E)||1,T=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(T-C)<=vo.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=o,d.touch1X=l,d.touch1Y=u,!this.#e){this.#e=!0;return}const M=[(a+l)/2,(o+u)/2];this.#s?.(M,T,C)}#p(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#l&&(re(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class gt{#t=null;#e=null;#i=null;#n=null;#r=null;#s=!1;#a=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#p=!1;#u=null;#m=!1;#y=!1;#v=!1;#b=null;#C=0;#w=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#E=gt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Wd;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=gt.prototype._resizeWithKeyboard,e=Ti.TRANSLATE_SMALL,s=Ti.TRANSLATE_BIG;return _t(this,"_resizerKeyboardManager",new bo([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],gt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,a],this.pageTranslation=[o,l];const[u,d]=this.parentDimensions;this.x=t.x/u,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return _t(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new uC({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(gt._l10n??=t,gt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),gt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);gt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Zt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#j(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,a){const[o,l]=this.parentDimensions;[s,a]=this.screenToPageTranslation(s,a),this.x=(t+s)/o,this.y=(e+a)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,a]=this.parentDimensions;this.setAt(t*s,e*a,this.width*s,this.height*a),this._onTranslated()}#N([t,e],s,a){[s,a]=this.screenToPageTranslation(s,a),this.x+=s/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#N(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#N(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[a,o]}=this;if(this.x+=t/a,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[d,f]=this.getBaseTranslation();l+=d,u+=f;const{style:m}=s;m.left=`${(100*l).toFixed(2)}%`,m.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=gt,a=s/t,o=s/e;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,a]}=this;let{x:o,y:l,width:u,height:d}=this;if(u*=s,d*=a,o*=s,l*=a,this._mustFixPosition)switch(t){case 0:o=Ue(o,0,s-u),l=Ue(l,0,a-d);break;case 90:o=Ue(o,0,s-d),l=Ue(l,u,a);break;case 180:o=Ue(o,u,s),l=Ue(l,d,a);break;case 270:o=Ue(o,d,s),l=Ue(l,0,a-u);break}this.x=o/=s,this.y=l/=a;const[f,m]=this.getBaseTranslation();o+=f,l+=m,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#M(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return gt.#M(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return gt.#M(t,e,360-this.parentRotation)}#R(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(){const{div:{style:t},width:e,height:s}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",s),a.setAttribute("data-resizer-name",s),a.addEventListener("pointerdown",this.#k.bind(this,s),{signal:e}),a.addEventListener("contextmenu",vn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#k(t,e){e.preventDefault();const{isMac:s}=De.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#P.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",re,{passive:!1,signal:l}),window.addEventListener("contextmenu",vn,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=d,this.#F()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#O(t,e,s,a){this.width=s,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:a}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,d=this.height;o===t&&l===e&&u===s&&d===a||this.addCommands({cmd:this.#O.bind(this,o,l,u,d),undo:this.#O.bind(this,t,e,s,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#P(t,e){const[s,a]=this.parentDimensions,o=this.x,l=this.y,u=this.width,d=this.height,f=gt.MIN_SIZE/s,m=gt.MIN_SIZE/a,y=this.#R(this.rotation),b=(L,V)=>[y[0]*L+y[2]*V,y[1]*L+y[3]*V],A=this.#R(360-this.rotation),w=(L,V)=>[A[0]*L+A[2]*V,A[1]*L+A[3]*V];let S,E,C=!1,T=!1;switch(t){case"topLeft":C=!0,S=(L,V)=>[0,0],E=(L,V)=>[L,V];break;case"topMiddle":S=(L,V)=>[L/2,0],E=(L,V)=>[L/2,V];break;case"topRight":C=!0,S=(L,V)=>[L,0],E=(L,V)=>[0,V];break;case"middleRight":T=!0,S=(L,V)=>[L,V/2],E=(L,V)=>[0,V/2];break;case"bottomRight":C=!0,S=(L,V)=>[L,V],E=(L,V)=>[0,0];break;case"bottomMiddle":S=(L,V)=>[L/2,V],E=(L,V)=>[L/2,0];break;case"bottomLeft":C=!0,S=(L,V)=>[0,V],E=(L,V)=>[L,0];break;case"middleLeft":T=!0,S=(L,V)=>[0,V/2],E=(L,V)=>[L,V/2];break}const M=S(u,d),D=E(u,d);let k=b(...D);const F=gt._round(o+k[0]),B=gt._round(l+k[1]);let P=1,H=1,Z,J;if(e.fromKeyboard)({deltaX:Z,deltaY:J}=e);else{const{screenX:L,screenY:V}=e,[Y,pt]=this.#l;[Z,J]=this.screenToPageTranslation(L-Y,V-pt),this.#l[0]=L,this.#l[1]=V}if([Z,J]=w(Z/s,J/a),C){const L=Math.hypot(u,d);P=H=Math.max(Math.min(Math.hypot(D[0]-M[0]-Z,D[1]-M[1]-J)/L,1/u,1/d),f/u,m/d)}else T?P=Ue(Math.abs(D[0]-M[0]-Z),f,1)/u:H=Ue(Math.abs(D[1]-M[1]-J),m,1)/d;const ct=gt._round(u*P),dt=gt._round(d*H);k=b(...E(ct,dt));const at=F-k[0],ht=B-k[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ct,this.height=dt,this.x=at,this.y=ht,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new to(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,s]of t)await this._editToolbar.addButton(e,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(ei.initialize(gt._l10n),this.#i=new ei(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.#n||=new Xl(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:s,deleted:a}}=this.#n;return{text:e,richText:t,date:s,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Xl(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:s}){if(!e||(this.#n||=new Xl(this),this.#n.setInitialText(t,s),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Xl(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,d=a-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Q0(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new vo({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#A.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(t,e,s){let o=.7*(s/e)+1-.7;if(o===1)return;const l=this.#R(this.rotation),u=(F,B)=>[l[0]*F+l[2]*B,l[1]*F+l[3]*B],[d,f]=this.parentDimensions,m=this.x,y=this.y,b=this.width,A=this.height,w=gt.MIN_SIZE/d,S=gt.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/A),w/b,S/A);const E=gt._round(b*o),C=gt._round(A*o);if(E===b&&C===A)return;this.#u||=[m,y,b,A];const T=u(b/2,A/2),M=gt._round(m+T[0]),D=gt._round(y+T[1]),k=u(E/2,C/2);this.x=M-k[0],this.y=D-k[1],this.width=E,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#A(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=De.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#z(t);return}this.#L(t)}#L(t){const{isMac:e}=De.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),l={capture:!0,passive:!1,signal:o},u=f=>{a.abort(),this.#a=null,this.#p=!1,this._uiManager.endDragSession()||this.#L(f),s&&this._onStopDragging()};e&&(this.#C=t.clientX,this.#w=t.clientY,this.#a=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:y,pointerId:b}=f;if(b!==this.#a){re(f);return}const[A,w]=this.screenToPageTranslation(m-this.#C,y-this.#w);this.#C=m,this.#w=y,this._uiManager.dragSelectedEditors(A,w)},l),window.addEventListener("touchmove",re,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#T||f.isPrimary)&&u(f),re(f)},l));const d=f=>{if(!this.#a||this.#a===f.pointerId){u(f);return}re(f)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const a=this.parentScale,[o,l]=this.pageDimensions,[u,d]=this.pageTranslation,f=t/a,m=e/a,y=this.x*o,b=this.y*l,A=this.width*o,w=this.height*l;switch(s){case 0:return[y+f+u,l-b-m-w+d,y+f+A+u,l-b-m+d];case 90:return[y+m+u,l-b+f+d,y+m+w+u,l-b+f+A+d];case 180:return[y-f-A+u,l-b+m+d,y-f+u,l-b+m+w+d];case 270:return[y-m-w+u,l-b-f-A+d,y-m+u,l-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,a,o,l]=t,u=o-s,d=l-a;switch(this.rotation){case 0:return[s,e-l,u,d];case 90:return[s,e-a,d,u];case 180:return[o,e-a,u,d];case 270:return[o,e-l,d,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&gt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:s,opacity:a,deleted:o,richText:l},uid:u,pageIndex:d,creationDate:f,modificationDate:m}=this;return{id:u,pageIndex:d,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:s||m,popupRef:!o,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&a>0&&t<o&&s>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,s){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[o,l]=a.pageDimensions,[u,d,f,m]=a.getRectInCurrentCoords(t.rect,l);return a.x=u/o,a.y=d/l,a.width=f/o,a.height=m/l,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#j(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[s,a,o,l]=this.getPDFRect();return[gt._round(s+(o-s)*t),gt._round(a+(l-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#Y.bind(this),u=this.#X.bind(this),d=this._uiManager._signal;for(const f of this.#e){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:d}),f.addEventListener("blur",u,{signal:d}),f.addEventListener("focus",this.#$.bind(this,m),{signal:d}),f.setAttribute("data-l10n-id",gt._l10nResizer[m])}}const s=this.#e[0];let a=0;for(const l of e){if(l===s)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstChild.before(this.#c.lastChild);let l=0;for(const u of e){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",gt._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){gt._resizerKeyboardManager.exec(this,t)}#X(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#j()}#$(t){this.#g=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#P(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#j(){this.#v=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#j(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;const{action:s}=t;let a=this.#x.get(s);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(s),this.#x.size===0&&(this.#x=null)},gt._telemetryTimeout),this.#x.set(s,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class uC extends gt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Gy=3285377520,Nn=4294901760,Jn=65535;class Z0{constructor(t){this.h1=t?t&4294967295:Gy,this.h2=t?t&4294967295:Gy}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let S=0,E=t.length;S<E;S++){const C=t.charCodeAt(S);C<=255?e[s++]=C:(e[s++]=C>>>8,e[s++]=C&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=s>>2,o=s-a*4,l=new Uint32Array(e.buffer,0,a);let u=0,d=0,f=this.h1,m=this.h2;const y=3432918353,b=461845907,A=y&Jn,w=b&Jn;for(let S=0;S<a;S++)S&1?(u=l[S],u=u*y&Nn|u*A&Jn,u=u<<15|u>>>17,u=u*b&Nn|u*w&Jn,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(d=l[S],d=d*y&Nn|d*A&Jn,d=d<<15|d>>>17,d=d*b&Nn|d*w&Jn,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(u=0,o){case 3:u^=e[a*4+2]<<16;case 2:u^=e[a*4+1]<<8;case 1:u^=e[a*4],u=u*y&Nn|u*A&Jn,u=u<<15|u>>>17,u=u*b&Nn|u*w&Jn,a&1?f^=u:m^=u}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Nn|t*36045&Jn,e=e*4283543511&Nn|((e<<16|t>>>16)*2950163797&Nn)>>>16,t^=e>>>1,t=t*444984403&Nn|t*60499&Jn,e=e*3301882366&Nn|((e<<16|t>>>16)*3120437893&Nn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const md=Object.freeze({map:null,hash:"",transfer:void 0});class Qd{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=this.#n.get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof gt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#n.values())if(s instanceof gt)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=this.#n.get(t);let a=!1;if(s!==void 0)for(const[o,l]of Object.entries(e))s[o]!==l&&(a=!0,s[o]=l);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof gt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new J0(this)}get serializable(){if(this.#n.size===0)return md;const t=new Map,e=new Z0,s=[],a=Object.create(null);let o=!1;for(const[l,u]of this.#n){const d=u instanceof gt?u.serialize(!1,a):u;d&&(t.set(l,d),e.update(`${l}:${JSON.stringify(d)}`),o||=!!d.bitmap)}if(o)for(const l of t.values())l.bitmap&&s.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:md}get editorStats(){let t=null;const e=new Map;let s=0,a=0;for(const o of this.#n.values()){if(!(o instanceof gt)){o.popup&&(o.popup.deleted?a+=1:s+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(s+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const d=t[u]||=new Map;for(const[f,m]of Object.entries(l)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const b=y.get(m)??0;y.set(m,b+1)}}if((a>0||s>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:s}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const s=this.#i?.get(t);return s?(s.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class J0 extends Qd{#t;constructor(t){super();const{map:e,hash:s,transfer:a}=t.serializable,o=structuredClone(e,a?{transfer:a}:null);this.#t={map:o,hash:s,transfer:a}}get print(){Zt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return _t(this,"modifiedIds",{ids:new Set,hash:""})}}class hC{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Pt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:l}=t,u=new FontFace(a,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(a),s?.(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Zt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(a){throw St(`Failed to load font '${s.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const a=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return _t(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return _t(this,"isSyncFontLoadingSupported",Xe||De.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Pt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,a={done:!1,complete:e,callback:t};return s.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _t(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(D,k){return D.charCodeAt(k)<<24|D.charCodeAt(k+1)<<16|D.charCodeAt(k+2)<<8|D.charCodeAt(k+3)&255}function a(D,k,F,B){const P=D.substring(0,k),H=D.substring(k+F);return P+B+H}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const d=u.getContext("2d");let f=0;function m(D,k){if(++f>30){St("Load test font never loaded."),k();return}if(d.font="30px "+D,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(m.bind(null,D,k))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const w=16,S=1482184792;let E=s(b,w);for(o=0,l=y.length-3;o<l;o+=4)E=E-S+s(y,o)|0;o<y.length&&(E=E-S+s(y+"XXX",o)|0),b=a(b,w,4,ZE(E));const C=`url(data:font/opentype;base64,${btoa(b)});`,T=`@font-face {font-family:"${y}";src:${C}}`;this.insertRule(T);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const D of[t.loadedName,y]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=D,M.append(k)}this._document.body.append(M),m(y,()=>{M.remove(),e.complete()})}}class dC{#t;constructor(t,e=null,s,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,s&&Object.assign(this,s),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${V0(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let a;try{a=t.get(s)}catch(l){St(`getPathGenerator - ignoring character: "${l}".`)}const o=new Path2D(a||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function fC(h){if(h instanceof URL)return h.href;if(typeof h=="string"){if(Xe)return h;const t=URL.parse(h,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function pC(h){if(Xe&&typeof Buffer<"u"&&h instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(h instanceof Uint8Array&&h.byteLength===h.buffer.byteLength)return h;if(typeof h=="string")return mo(h);if(h instanceof ArrayBuffer||ArrayBuffer.isView(h)||typeof h=="object"&&!isNaN(h?.length))return new Uint8Array(h);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Yl(h){if(typeof h!="string")return null;if(h.endsWith("/"))return h;throw new Error(`Invalid factory url: "${h}" must include trailing slash.`)}const gd=h=>typeof h=="object"&&Number.isInteger(h?.num)&&h.num>=0&&Number.isInteger(h?.gen)&&h.gen>=0,mC=h=>typeof h=="object"&&typeof h?.name=="string",tv=nC.bind(null,gd,mC);class gC{#t=new Map;#e=Promise.resolve();postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,s)})}addEventListener(t,e,s=null){let a=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);a=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const $l={DATA:1,ERROR:2},Ae={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Vy(){}function an(h){if(h instanceof _i||h instanceof lc||h instanceof jy||h instanceof so||h instanceof td)return h;switch(h instanceof Error||typeof h=="object"&&h!==null||Zt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),h.name){case"AbortException":return new _i(h.message);case"InvalidPDFException":return new lc(h.message);case"PasswordException":return new jy(h.message,h.code);case"ResponseException":return new so(h.message,h.status,h.missing);case"UnknownErrorException":return new td(h.message,h.details)}return new td(h.message,h.toString())}class Wr{#t=new AbortController;constructor(t,e,s){this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const s=t.callbackId,a=this.callbackCapabilities[s];if(!a)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===$l.DATA)a.resolve(t.data);else if(t.callback===$l.ERROR)a.reject(an(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,a=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:s,targetName:a,callback:$l.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:s,targetName:a,callback:$l.ERROR,callbackId:t.callbackId,reason:an(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},s)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,s,a){const o=this.streamId++,l=this.sourceName,u=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},a),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[o].pullCall=m,d.postMessage({sourceName:l,targetName:u,stream:Ae.PULL,streamId:o,desiredSize:f.desiredSize}),m.promise},cancel:f=>{Pt(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[o].cancelCall=m,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:l,targetName:u,stream:Ae.CANCEL,streamId:o,reason:an(f)}),m.promise}},s)}#i(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],d={enqueue(f,m=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:a,stream:Ae.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:Ae.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){Pt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:a,stream:Ae.ERROR,streamId:e,reason:an(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(u,t.data,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:Ae.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:Ae.START_COMPLETE,streamId:e,reason:an(f)})})}#n(t){const e=t.streamId,s=this.sourceName,a=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case Ae.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(an(t.reason));break;case Ae.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(an(t.reason));break;case Ae.PULL:if(!u){o.postMessage({sourceName:s,targetName:a,stream:Ae.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Vy).then(function(){o.postMessage({sourceName:s,targetName:a,stream:Ae.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:Ae.PULL_COMPLETE,streamId:e,reason:an(f)})});break;case Ae.ENQUEUE:if(Pt(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case Ae.CLOSE:if(Pt(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case Ae.ERROR:Pt(l,"error should have stream controller"),l.controller.error(an(t.reason)),this.#r(l,e);break;case Ae.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(an(t.reason)),this.#r(l,e);break;case Ae.CANCEL:if(!u)break;const d=an(t.reason);Promise.try(u.onCancel||Vy,d).then(function(){o.postMessage({sourceName:s,targetName:a,stream:Ae.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:s,targetName:a,stream:Ae.CANCEL_COMPLETE,streamId:e,reason:an(f)})}),u.sinkCapability.reject(d),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class ev{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Zt("Abstract method `_createCanvas` called.")}}class yC extends ev{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class nv{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class qy extends nv{async _fetch(t){const e=await Ya(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):mo(e)}}class iv{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,a,o){return"none"}destroy(t=!1){}}class bC extends iv{#t;#e;#i;#n;#r;#s;#a=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const s=this.#r.createElementNS(Ei,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#i=this.#r.createElementNS(Ei,"defs"),t.append(s),s.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const m=f.join(",");return[m,m,m]}const[e,s,a]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=e[d]/255,l[d]=s[d]/255,u[d]=a[d]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(yo(e)?St('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Vd(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[s,a,o]=this.#d(t),l=t.length===1?s:`${s}${a}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#a++}`,d=this.#h(u);this.#o.set(t,d),this.#o.set(l,d);const f=this.#p(u);return this.#m(s,a,o,f),d}addHCMFilter(t,e){const s=`${t}-${e}`,a="base";let o=this.#c.get(a);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(a,o)),!t||!e))return o.url;const l=this.#v(t);t=it.makeHexColor(...l);const u=this.#v(e);if(e=it.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const d=new Array(256);for(let A=0;A<=255;A++){const w=A/255;d[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const f=d.join(","),m=`g_${this.#n}_hcm_filter`,y=o.filter=this.#p(m);this.#m(f,f,f,y),this.#g(y);const b=(A,w)=>{const S=l[A]/255,E=u[A]/255,C=new Array(w+1);for(let T=0;T<=w;T++)C[T]=S+T/w*(E-S);return C.join(",")};return this.#m(b(0,5),b(1,5),b(2,5),y),o.url=this.#h(m),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[s]=this.#d([t]),a=`alpha_${s}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#p(o);return this.#y(s,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let s,a;if(t?([s]=this.#d([t]),a=`luminosity_${s}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#a++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(a,l);const u=this.#p(o);return this.#f(u),t&&this.#y(s,u),l}addHighlightHCMFilter(t,e,s,a,o){const l=`${e}-${s}-${a}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!e||!s))return u.url;const[d,f]=[e,s].map(this.#v.bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[a,o].map(this.#v.bind(this));y<m&&([m,y,b,A]=[y,m,A,b]),this.#l.style.color="";const w=(C,T,M)=>{const D=new Array(256),k=(y-m)/M,F=C/255,B=(T-C)/(255*M);let P=0;for(let H=0;H<=M;H++){const Z=Math.round(m+H*k),J=F+H*B;for(let ct=P;ct<=Z;ct++)D[ct]=J;P=Z+1}for(let H=P;H<256;H++)D[H]=D[P-1];return D.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,E=u.filter=this.#p(S);return this.#g(E),this.#m(w(b[0],A[0],5),w(b[1],A[1],5),w(b[2],A[2],5),E),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#s?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const e=this.#r.createElementNS(Ei,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(Ei,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){const e=this.#r.createElementNS(Ei,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,s){const a=this.#r.createElementNS(Ei,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)}#m(t,e,s,a){const o=this.#r.createElementNS(Ei,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",s)}#y(t,e){const s=this.#r.createElementNS(Ei,"feComponentTransfer");e.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#l.style.color=t,$a(getComputedStyle(this.#l).getPropertyValue("color"))}}class sv{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class Xy extends sv{async _fetch(t){const e=await Ya(t,"arraybuffer");return new Uint8Array(e)}}class av{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Zt("Abstract method `_fetch` called.")}}class Yy extends av{async _fetch(t){const e=await Ya(t,"arraybuffer");return new Uint8Array(e)}}Xe&&St("Please use the `legacy` build in Node.js environments.");async function Zd(h){const e=await process.getBuiltinModule("fs").promises.readFile(h);return new Uint8Array(e)}class vC extends iv{}class xC extends ev{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class AC extends nv{async _fetch(t){return Zd(t)}}class SC extends sv{async _fetch(t){return Zd(t)}}class wC extends av{async _fetch(t){return Zd(t)}}const _a="__forcedDependency",{floor:$y,ceil:Ky}=Math;function Kl(h,t,e,s,a,o){h[t*4+0]=Math.min(h[t*4+0],e),h[t*4+1]=Math.min(h[t*4+1],s),h[t*4+2]=Math.max(h[t*4+2],a),h[t*4+3]=Math.max(h[t*4+3],o)}const yd=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class EC{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===yd}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Wl=(h,t)=>{if(!h)return;let e=h.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},h.set(t,e)),e};class CC{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[_a]:[]};#i=new Map;#n=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#p;#u;#m;constructor(t,e,s=!1){this.#f=t.width,this.#g=t.height,this.#y(e),s&&(this.#m=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const s=new ArrayBuffer(t*4);this.#p=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),e&&e.length>0?(this.#u.set(e),this.#u.fill(yd,e.length)):this.#u.fill(yd)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[_a]:{__proto__:this.#e[_a]}},this.#a={__proto__:this.#a},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#n.pop();return s!==void 0&&(Wl(this.#m,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Wl(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Wl(this.#m,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#s.push(it.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,s){this.#t[t]=this.#i.get(e)??s}recordFutureForcedDependency(t,e){return this.recordIncrementalData(_a,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(_a,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,s,a,o,l){const u=it.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];it.axialAlignedBoundingBox([s,o,a,l],u,d);const f=it.intersect(this.#a,d);return f?(this.#a[0]=f[0],this.#a[1]=f[1],this.#a[2]=f[2],this.#a[3]=f[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,e,s,a,o,l){const u=this.#a;if(u[0]===1/0)return this;const d=it.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(u[0]===-1/0)return it.axialAlignedBoundingBox([s,o,a,l],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return it.axialAlignedBoundingBox([s,o,a,l],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,s,a=1,o=0,l=0,u){const d=s.bbox;let f,m;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(s),f!==!1&&(m=[0,0,0,0],it.axialAlignedBoundingBox(d,s.fontMatrix,m),(a!==1||o!==0||l!==0)&&it.scaleMinMax([a,0,0,-a,o,l],m),f)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!u)return this.recordFullPageBBox(t);const y=u();return d&&m&&f===void 0&&(f=m[0]<=o-y.actualBoundingBoxLeft&&m[2]>=o+y.actualBoundingBoxRight&&m[1]<=l-y.actualBoundingBoxAscent&&m[3]>=l+y.actualBoundingBoxDescent,this.#h.set(s,f),f)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,o-y.actualBoundingBoxLeft,o+y.actualBoundingBoxRight,l-y.actualBoundingBoxAscent,l+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const s=this.#l,a=this.#t,o=this.#e;for(const l of e)l in this.#t?s.add(a[l]):l in o&&o[l].forEach(s.add,s);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[_a]),this.#m){const s=Wl(this.#m,t),{dependencies:a}=s;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=$y(this.#o[0]*256/this.#f),a=$y(this.#o[1]*256/this.#g),o=Ky(this.#o[2]*256/this.#f),l=Ky(this.#o[3]*256/this.#g);Kl(this.#p,t,s,a,o,l);for(const u of this.#l)u!==t&&Kl(this.#p,u,s,a,o,l);for(const u of this.#n)u!==t&&Kl(this.#p,u,s,a,o,l);for(const u of this.#r)u!==t&&Kl(this.#p,u,s,a,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const s=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of s)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new EC(this.#u,this.#p)}takeDebugMetadata(){return this.#m}}class hc{#t;#e;#i;#n=0;#r=0;constructor(t,e,s){if(t instanceof hc&&t.#i===!!s)return t;this.#t=t,this.#e=e,this.#i=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,s){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,s,a,o,l){return this.#i||this.#t.recordClipBox(this.#e,e,s,a,o,l),this}recordBBox(t,e,s,a,o,l){return this.#i||this.#t.recordBBox(this.#e,e,s,a,o,l),this}recordCharacterBBox(t,e,s,a,o,l,u){return this.#i||this.#t.recordCharacterBBox(this.#e,e,s,a,o,l,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Dn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Fe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function bd(h,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,s),h.clip(a)}class Jd{isModifyingCurrentTransform(){return!1}getPattern(){Zt("Abstract method `getPattern` called.")}}class _C extends Jd{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,a){let o;if(a===Fe.STROKE||a===Fe.FILL){const l=e.current.getClippedPathBoundingBox(a,ae(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,d=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,d),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-l[0],-l[1]),s=it.transform(s,[1,0,0,1,l[0],l[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),bd(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),o=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(s);o.setTransform(y)}else bd(t,this._bbox),o=this._createGradient(t);return o}}function id(h,t,e,s,a,o,l,u){const d=t.coords,f=t.colors,m=h.data,y=h.width*4;let b;d[e+1]>d[s+1]&&(b=e,e=s,s=b,b=o,o=l,l=b),d[s+1]>d[a+1]&&(b=s,s=a,a=b,b=l,l=u,u=b),d[e+1]>d[s+1]&&(b=e,e=s,s=b,b=o,o=l,l=b);const A=(d[e]+t.offsetX)*t.scaleX,w=(d[e+1]+t.offsetY)*t.scaleY,S=(d[s]+t.offsetX)*t.scaleX,E=(d[s+1]+t.offsetY)*t.scaleY,C=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(w>=T)return;const M=f[o],D=f[o+1],k=f[o+2],F=f[l],B=f[l+1],P=f[l+2],H=f[u],Z=f[u+1],J=f[u+2],ct=Math.round(w),dt=Math.round(T);let at,ht,L,V,Y,pt,vt,O;for(let q=ct;q<=dt;q++){if(q<E){const et=q<w?0:(w-q)/(w-E);at=A-(A-S)*et,ht=M-(M-F)*et,L=D-(D-B)*et,V=k-(k-P)*et}else{let et;q>T?et=1:E===T?et=0:et=(E-q)/(E-T),at=S-(S-C)*et,ht=F-(F-H)*et,L=B-(B-Z)*et,V=P-(P-J)*et}let K;q<w?K=0:q>T?K=1:K=(w-q)/(w-T),Y=A-(A-C)*K,pt=M-(M-H)*K,vt=D-(D-Z)*K,O=k-(k-J)*K;const tt=Math.round(Math.min(at,Y)),lt=Math.round(Math.max(at,Y));let ft=y*q+tt*4;for(let et=tt;et<=lt;et++)K=(at-et)/(at-Y),K<0?K=0:K>1&&(K=1),m[ft++]=ht-(ht-pt)*K|0,m[ft++]=L-(L-vt)*K|0,m[ft++]=V-(V-O)*K|0,m[ft++]=255}}function TC(h,t,e){const s=t.coords,a=t.colors;let o,l;switch(t.type){case"lattice":const u=t.verticesPerRow,d=Math.floor(s.length/u)-1,f=u-1;for(o=0;o<d;o++){let m=o*u;for(let y=0;y<f;y++,m++)id(h,e,s[m],s[m+1],s[m+u],a[m],a[m+1],a[m+u]),id(h,e,s[m+u+1],s[m+1],s[m+u],a[m+u+1],a[m+1],a[m+u])}break;case"triangles":for(o=0,l=s.length;o<l;o+=3)id(h,e,s[o],s[o+1],s[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class MC extends Jd{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const u=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,m=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=f/y,w=m/b,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-d,scaleX:1/A,scaleY:1/w},E=y+4,C=b+4,T=s.getCanvas("mesh",E,C),M=T.context,D=M.createImageData(y,b);if(e){const F=D.data;for(let B=0,P=F.length;B<P;B+=4)F[B]=e[0],F[B+1]=e[1],F[B+2]=e[2],F[B+3]=255}for(const F of this._figures)TC(D,F,S);return M.putImageData(D,2,2),{canvas:T.canvas,offsetX:u-2*A,offsetY:d-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,a){bd(t,this._bbox);const o=new Float32Array(2);if(a===Fe.SHADING)it.singularValueDecompose2dScale(ae(t),o);else if(this.matrix){it.singularValueDecompose2dScale(this.matrix,o);const[u,d]=o;it.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=d}else it.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,a===Fe.SHADING?null:this._background,e.cachedCanvases);return a!==Fe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class RC extends Jd{getPattern(){return"hotpink"}}function NC(h){switch(h[0]){case"RadialAxial":return new _C(h);case"Mesh":return new MC(h);case"Dummy":return new RC}throw new Error(`Unknown IR type: ${h[0]}`)}const Wy={COLORED:1,UNCOLORED:2};class tf{static MAX_PATTERN_SIZE=3e3;constructor(t,e,s,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:s,operatorList:a,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),xc("TilingType: "+l);const y=s[0],b=s[1],A=s[2],w=s[3],S=A-y,E=w-b,C=new Float32Array(2);it.singularValueDecompose2dScale(this.matrix,C);const[T,M]=C;it.singularValueDecompose2dScale(this.baseTransform,C);const D=T*C[0],k=M*C[1];let F=S,B=E,P=!1,H=!1;const Z=Math.ceil(f*D),J=Math.ceil(m*k),ct=Math.ceil(S*D),dt=Math.ceil(E*k);Z>=ct?F=f:P=!0,J>=dt?B=m:H=!0;const at=this.getSizeAndScale(F,this.ctx.canvas.width,D),ht=this.getSizeAndScale(B,this.ctx.canvas.height,k),L=t.cachedCanvases.getCanvas("pattern",at.size,ht.size),V=L.context,Y=d.createCanvasGraphics(V,e);if(Y.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Y,o,u),V.translate(-at.scale*y,-ht.scale*b),Y.transform(0,at.scale,0,0,ht.scale,0,0),V.save(),Y.dependencyTracker?.save(),this.clipBbox(Y,y,b,A,w),Y.baseTransform=ae(Y.ctx),Y.executeOperatorList(a),Y.endDrawing(),Y.dependencyTracker?.restore(),V.restore(),P||H){const pt=L.canvas;P&&(F=f),H&&(B=m);const vt=this.getSizeAndScale(F,this.ctx.canvas.width,D),O=this.getSizeAndScale(B,this.ctx.canvas.height,k),q=vt.size,K=O.size,tt=t.cachedCanvases.getCanvas("pattern-workaround",q,K),lt=tt.context,ft=P?Math.floor(S/f):0,et=H?Math.floor(E/m):0;for(let Gt=0;Gt<=ft;Gt++)for(let wt=0;wt<=et;wt++)lt.drawImage(pt,q*Gt,K*wt,q,K,0,0,q,K);return{canvas:tt.canvas,scaleX:vt.scale,scaleY:O.scale,offsetX:y,offsetY:b}}return{canvas:L.canvas,scaleX:at.scale,scaleY:ht.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,s){const a=Math.max(tf.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*s);return o>=a?o=a:s=o/t,{scale:s,size:o}}clipBbox(t,e,s,a,o){const l=a-e,u=o-s;t.ctx.rect(e,s,l,u),it.axialAlignedBoundingBox([e,s,a,o],ae(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const a=t.ctx,o=t.current;switch(e){case Wy.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=l,a.strokeStyle=o.strokeColor=u;break;case Wy.UNCOLORED:a.fillStyle=a.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new QE(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,a,o){let l=s;a!==Fe.SHADING&&(l=it.transform(l,e.baseTransform),this.matrix&&(l=it.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let d=new DOMMatrix(l);d=d.translate(u.offsetX,u.offsetY),d=d.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(d),f}}function DC({src:h,srcPos:t=0,dest:e,width:s,height:a,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=De.isLittleEndian?4278190080:255,[d,f]=l?[o,u]:[u,o],m=s>>3,y=s&7,b=h.length;e=new Uint32Array(e.buffer);let A=0;for(let w=0;w<a;w++){for(const E=t+m;t<E;t++){const C=t<b?h[t]:255;e[A++]=C&128?f:d,e[A++]=C&64?f:d,e[A++]=C&32?f:d,e[A++]=C&16?f:d,e[A++]=C&8?f:d,e[A++]=C&4?f:d,e[A++]=C&2?f:d,e[A++]=C&1?f:d}if(y===0)continue;const S=t<b?h[t++]:255;for(let E=0;E<y;E++)e[A++]=S&1<<7-E?f:d}return{srcPos:t,destPos:A}}const Qy=16,Zy=100,kC=15,Jy=10,rn=16,sd=new DOMMatrix,bn=new Float32Array(2),Da=new Float32Array([1/0,1/0,-1/0,-1/0]);function LC(h,t){if(h._removeMirroring)throw new Error("Context is already forwarding operations.");h.__originalSave=h.save,h.__originalRestore=h.restore,h.__originalRotate=h.rotate,h.__originalScale=h.scale,h.__originalTranslate=h.translate,h.__originalTransform=h.transform,h.__originalSetTransform=h.setTransform,h.__originalResetTransform=h.resetTransform,h.__originalClip=h.clip,h.__originalMoveTo=h.moveTo,h.__originalLineTo=h.lineTo,h.__originalBezierCurveTo=h.bezierCurveTo,h.__originalRect=h.rect,h.__originalClosePath=h.closePath,h.__originalBeginPath=h.beginPath,h._removeMirroring=()=>{h.save=h.__originalSave,h.restore=h.__originalRestore,h.rotate=h.__originalRotate,h.scale=h.__originalScale,h.translate=h.__originalTranslate,h.transform=h.__originalTransform,h.setTransform=h.__originalSetTransform,h.resetTransform=h.__originalResetTransform,h.clip=h.__originalClip,h.moveTo=h.__originalMoveTo,h.lineTo=h.__originalLineTo,h.bezierCurveTo=h.__originalBezierCurveTo,h.rect=h.__originalRect,h.closePath=h.__originalClosePath,h.beginPath=h.__originalBeginPath,delete h._removeMirroring},h.save=function(){t.save(),this.__originalSave()},h.restore=function(){t.restore(),this.__originalRestore()},h.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},h.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},h.transform=function(e,s,a,o,l,u){t.transform(e,s,a,o,l,u),this.__originalTransform(e,s,a,o,l,u)},h.setTransform=function(e,s,a,o,l,u){t.setTransform(e,s,a,o,l,u),this.__originalSetTransform(e,s,a,o,l,u)},h.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},h.rotate=function(e){t.rotate(e),this.__originalRotate(e)},h.clip=function(e){t.clip(e),this.__originalClip(e)},h.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},h.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},h.bezierCurveTo=function(e,s,a,o,l,u){t.bezierCurveTo(e,s,a,o,l,u),this.__originalBezierCurveTo(e,s,a,o,l,u)},h.rect=function(e,s,a,o){t.rect(e,s,a,o),this.__originalRect(e,s,a,o)},h.closePath=function(){t.closePath(),this.__originalClosePath()},h.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class OC{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,s)):(a=this.canvasFactory.create(e,s),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ql(h,t,e,s,a,o,l,u,d,f){const[m,y,b,A,w,S]=ae(h);if(y===0&&b===0){const T=l*m+w,M=Math.round(T),D=u*A+S,k=Math.round(D),F=(l+d)*m+w,B=Math.abs(Math.round(F)-M)||1,P=(u+f)*A+S,H=Math.abs(Math.round(P)-k)||1;return h.setTransform(Math.sign(m),0,0,Math.sign(A),M,k),h.drawImage(t,e,s,a,o,0,0,B,H),h.setTransform(m,y,b,A,w,S),[B,H]}if(m===0&&A===0){const T=u*b+w,M=Math.round(T),D=l*y+S,k=Math.round(D),F=(u+f)*b+w,B=Math.abs(Math.round(F)-M)||1,P=(l+d)*y+S,H=Math.abs(Math.round(P)-k)||1;return h.setTransform(0,Math.sign(y),Math.sign(b),0,M,k),h.drawImage(t,e,s,a,o,0,0,H,B),h.setTransform(m,y,b,A,w,S),[H,B]}h.drawImage(t,e,s,a,o,l,u,d,f);const E=Math.hypot(m,y),C=Math.hypot(b,A);return[E*d,C*f]}class tb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=fd;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Be.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,s){s?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Da.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Fe.FILL,e=null){const s=this.minMax.slice();if(t===Fe.STROKE){e||Zt("Stroke bounding box must include transform."),it.singularValueDecompose2dScale(e,bn);const a=bn[0]*this.lineWidth/2,o=bn[1]*this.lineWidth/2;s[0]-=a,s[1]-=o,s[2]+=a,s[3]+=o}return s}updateClipFromPath(){const t=it.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Da,0)}getClippedPathBoundingBox(t=Fe.FILL,e=null){return it.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function eb(h,t){if(t instanceof ImageData){h.putImageData(t,0,0);return}const e=t.height,s=t.width,a=e%rn,o=(e-a)/rn,l=a===0?o:o+1,u=h.createImageData(s,rn);let d=0,f;const m=t.data,y=u.data;let b,A,w,S;if(t.kind===Jr.GRAYSCALE_1BPP){const E=m.byteLength,C=new Uint32Array(y.buffer,0,y.byteLength>>2),T=C.length,M=s+7>>3,D=4294967295,k=De.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(w=b<o?rn:a,f=0,A=0;A<w;A++){const F=E-d;let B=0;const P=F>M?s:F*8-7,H=P&-8;let Z=0,J=0;for(;B<H;B+=8)J=m[d++],C[f++]=J&128?D:k,C[f++]=J&64?D:k,C[f++]=J&32?D:k,C[f++]=J&16?D:k,C[f++]=J&8?D:k,C[f++]=J&4?D:k,C[f++]=J&2?D:k,C[f++]=J&1?D:k;for(;B<P;B++)Z===0&&(J=m[d++],Z=128),C[f++]=J&Z?D:k,Z>>=1}for(;f<T;)C[f++]=0;h.putImageData(u,0,b*rn)}}else if(t.kind===Jr.RGBA_32BPP){for(A=0,S=s*rn*4,b=0;b<o;b++)y.set(m.subarray(d,d+S)),d+=S,h.putImageData(u,0,A),A+=rn;b<l&&(S=s*a*4,y.set(m.subarray(d,d+S)),h.putImageData(u,0,A))}else if(t.kind===Jr.RGB_24BPP)for(w=rn,S=s*w,b=0;b<l;b++){for(b>=o&&(w=a,S=s*w),f=0,A=S;A--;)y[f++]=m[d++],y[f++]=m[d++],y[f++]=m[d++],y[f++]=255;h.putImageData(u,0,b*rn)}else throw new Error(`bad image kind: ${t.kind}`)}function nb(h,t){if(t.bitmap){h.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,a=e%rn,o=(e-a)/rn,l=a===0?o:o+1,u=h.createImageData(s,rn);let d=0;const f=t.data,m=u.data;for(let y=0;y<l;y++){const b=y<o?rn:a;({srcPos:d}=DC({src:f,srcPos:d,dest:m,width:s,height:b,nonBlackColor:0})),h.putImageData(u,0,y*rn)}}function qr(h,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)h[s]!==void 0&&(t[s]=h[s]);h.setLineDash!==void 0&&(t.setLineDash(h.getLineDash()),t.lineDashOffset=h.lineDashOffset)}function Zl(h){h.strokeStyle=h.fillStyle="#000000",h.fillRule="nonzero",h.globalAlpha=1,h.lineWidth=1,h.lineCap="butt",h.lineJoin="miter",h.miterLimit=10,h.globalCompositeOperation="source-over",h.font="10px sans-serif",h.setLineDash!==void 0&&(h.setLineDash([]),h.lineDashOffset=0);const{filter:t}=h;t!=="none"&&t!==""&&(h.filter="none")}function ib(h,t){if(t)return!0;it.singularValueDecompose2dScale(h,bn);const e=Math.fround(Hn.pixelRatio*Os.PDF_TO_CSS_UNITS);return bn[0]<=e&&bn[1]<=e}const PC=["butt","round","square"],jC=["miter","round","bevel"],BC={},sb={};class Oa{constructor(t,e,s,a,o,{optionalContentConfig:l,markedContentStack:u=null},d,f,m){this.ctx=t,this.current=new tb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new OC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,s=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):s}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:a=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,s){const d=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ae(this.compositeCtx))}this.ctx.save(),Zl(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ae(this.ctx)}executeOperatorList(t,e,s,a,o){const l=t.argsArray,u=t.fnArray;let d=e||0;const f=l.length;if(f===d)return d;const m=f-d>Jy&&typeof s=="function",y=m?Date.now()+kC:0;let b=0;const A=this.commonObjs,w=this.objs;let S,E;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,s),d;if(!o||o(d))if(S=u[d],E=l[d]??null,S!==Ua.dependency)E===null?this[S](d):this[S](d,...E);else for(const C of E){this.dependencyTracker?.recordNamedData(C,d);const T=C.startsWith("g_")?A:w;if(!T.has(C))return T.get(C,s),d}if(d++,d===f)return d;if(m&&++b>Jy){if(Date.now()>y)return s(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const s=t.width??t.displayWidth,a=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=s,d=a,f="prescale1",m,y;for(;o>2&&u>1||l>2&&d>1;){let b=u,A=d;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,l/=d/A),m=this.cachedCanvases.getCanvas(f,b,A),y=m.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,u,d,0,0,b,A),t=m.canvas,u=b,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:d}}_createMaskCanvas(t,e){const s=this.ctx,{width:a,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,d=ae(s);let f,m,y,b;if((e.bitmap||e.data)&&e.count>1){const Z=e.bitmap||e.data.buffer;m=JSON.stringify(u?d:[d.slice(0,4),l]),f=this._cachedBitmapsMap.get(Z),f||(f=new Map,this._cachedBitmapsMap.set(Z,f));const J=f.get(m);if(J&&!u){const ct=Math.round(Math.min(d[0],d[2])+d[4]),dt=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Dn.transformAndFill),{canvas:J,offsetX:ct,offsetY:dt}}y=J}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,o),nb(b.context,e));let A=it.transform(d,[1/a,0,0,-1/o,0,0]);A=it.transform(A,[1,0,0,1,0,-o]);const w=Da.slice();it.axialAlignedBoundingBox([0,0,a,o],A,w);const[S,E,C,T]=w,M=Math.round(C-S)||1,D=Math.round(T-E)||1,k=this.cachedCanvases.getCanvas("fillCanvas",M,D),F=k.context,B=S,P=E;F.translate(-B,-P),F.transform(...A),y||(y=this._scaleImage(b.canvas,Zn(F)),y=y.img,f&&u&&f.set(m,y)),F.imageSmoothingEnabled=ib(ae(F),e.interpolate),Ql(F,y,0,0,y.width,y.height,0,0,a,o),F.globalCompositeOperation="source-in";const H=it.transform(Zn(F),[1,0,0,1,-B,-P]);return F.fillStyle=u?l.getPattern(s,this,H,Fe.FILL,t):l,F.fillRect(0,0,a,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,k.canvas)),this.dependencyTracker?.recordDependencies(t,Dn.transformAndFill),{canvas:k.canvas,offsetX:Math.round(B),offsetY:Math.round(P)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=PC[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=jC[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,s){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=s)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[s,a]of e)switch(s){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,s=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,e,s);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),qr(this.suspendedCtx,l),LC(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),qr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,a){const o=a[0],l=a[1],u=a[2]-o,d=a[3]-l;u===0||d===0||(this.genericComposeSMask(e.context,s,u,d,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,a,o,l,u,d,f,m,y){let b=t.canvas,A=d-m,w=f-y;if(l)if(A<0||w<0||A+s>b.width||w+a>b.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,a),C=E.context;C.drawImage(b,-A,-w),C.globalCompositeOperation="destination-atop",C.fillStyle=l,C.fillRect(0,0,s,a),C.globalCompositeOperation="source-over",b=E.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(A,w,s,a),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(A,w,s,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(d,f,s,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,A,w,s,a,d,f,s,a),e.restore()}save(t){this.inSMaskMode&&qr(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&qr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,a,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,s,a,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s,a){let[o]=s;if(!a){o||=s[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===Ua.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-l,a[2]+l,a[1]-l,a[3]+l).recordDependencies(t,["transform"])}if(!(o instanceof Path2D)){const l=s[0]=new Path2D;for(let u=0,d=o.length;u<d;)switch(o[u++]){case ql.moveTo:l.moveTo(o[u++],o[u++]);break;case ql.lineTo:l.lineTo(o[u++],o[u++]);break;case ql.curveTo:l.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case ql.closePath:l.closePath();break;default:St(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=l}it.axialAlignedBoundingBox(a,ae(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,s=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,Zn(a),Fe.STROKE,t),l){const u=new Path2D;u.addPath(e,a.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Dn.stroke),s&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Fe.STROKE,ae(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,s=!0){const a=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=o.getPattern(a,this,Zn(a),Fe.FILL,t),f){const m=new Path2D;m.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=m}u=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,Dn.fill),u&&(a.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Dn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=BC}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=sb}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,o=s.getTransform().invertSelf();for(const{transform:l,x:u,y:d,fontSize:f,path:m}of e)m&&a.addPath(m,new DOMMatrix(l).preMultiplySelf(o).translate(u,d).scale(f,-f));s.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),o=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=a.fontMatrix||fd,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&St("Invalid font matrix for font "+e),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=s,a.isType3Font)return;const l=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${l}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let m=s;s<Qy?m=Qy:s>Zy&&(m=Zy),this.current.fontSizeScale=s/m,this.ctx.font=`${f} ${d} ${m}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,e,s){this.setLeading(t,-s),this.moveText(t,e,s)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=e,s.textMatrixScale=Math.hypot(e[0],e[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,s){const a=new Path2D;return a.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),a}paintChar(t,e,s,a,o,l){const u=this.ctx,d=this.current,f=d.font,m=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=m&Be.FILL_STROKE_MASK,A=!!(m&Be.ADD_TO_PATH_FLAG),w=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let E;if((f.disableFontFace||A||w||S)&&!f.missingFile&&(E=f.getPathGenerator(this.commonObjs,e)),E&&(f.disableFontFace||w||S)){u.save(),u.translate(s,a),u.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,u,f);let C;if(b===Be.FILL||b===Be.FILL_STROKE)if(o){C=u.getTransform(),u.setTransform(...o);const T=this.#i(E,C,o);u.fill(T)}else u.fill(E);if(b===Be.STROKE||b===Be.FILL_STROKE)if(l){C||=u.getTransform(),u.setTransform(...l);const{a:T,b:M,c:D,d:k}=C,F=it.inverseTransform(l),B=it.transform([T,M,D,k,0,0],F);it.singularValueDecompose2dScale(B,bn),u.lineWidth*=Math.max(bn[0],bn[1])/y,u.stroke(this.#i(E,C,l))}else u.lineWidth/=y,u.stroke(E);u.restore()}else(b===Be.FILL||b===Be.FILL_STROKE)&&(u.fillText(e,s,a),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a,()=>u.measureText(e))),(b===Be.STROKE||b===Be.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a,()=>u.measureText(e)).recordDependencies(t,Dn.stroke),u.strokeText(e,s,a));A&&((this.pendingTextPaths||=[]).push({transform:ae(u),x:s,y:a,fontSize:y,path:E}),this.dependencyTracker?.recordCharacterBBox(t,u,f,y,s,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){s=!0;break}return _t(this,"isFontSubpixelAAEnabled",s)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Dn.showText).resetBBox(t),this.current.textRenderingMode&Be.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,a=s.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=s.fontSizeScale,d=s.charSpacing,f=s.wordSpacing,m=s.fontDirection,y=s.textHScale*m,b=e.length,A=a.vertical,w=A?1:-1,S=a.defaultVMetrics,E=o*s.fontMatrix[0],C=s.textRenderingMode===Be.FILL&&!a.disableFontFace&&!s.patternFill;l.save(),s.textMatrix&&l.transform(...s.textMatrix),l.translate(s.x,s.y+s.textRise),m>0?l.scale(y,-1):l.scale(y,1);let T,M;if(s.patternFill){l.save();const P=s.fillColor.getPattern(l,this,Zn(l),Fe.FILL,t);T=ae(l),l.restore(),l.fillStyle=P}if(s.patternStroke){l.save();const P=s.strokeColor.getPattern(l,this,Zn(l),Fe.STROKE,t);M=ae(l),l.restore(),l.strokeStyle=P}let D=s.lineWidth;const k=s.textMatrixScale;if(k===0||D===0){const P=s.textRenderingMode&Be.FILL_STROKE_MASK;(P===Be.STROKE||P===Be.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=k;if(u!==1&&(l.scale(u,u),D/=u),l.lineWidth=D,a.isInvalidPDFjsFont){const P=[];let H=0;for(const J of e)P.push(J.unicode),H+=J.width;const Z=P.join("");if(l.fillText(Z,0,0),this.dependencyTracker!==null){const J=l.measureText(Z);this.dependencyTracker.recordBBox(t,this.ctx,-J.actualBoundingBoxLeft,J.actualBoundingBoxRight,-J.actualBoundingBoxAscent,J.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=H*E*y,l.restore(),this.compose();return}let F=0,B;for(B=0;B<b;++B){const P=e[B];if(typeof P=="number"){F+=w*P*o/1e3;continue}let H=!1;const Z=(P.isSpace?f:0)+d,J=P.fontChar,ct=P.accent;let dt,at,ht=P.width;if(A){const Y=P.vmetric||S,pt=-(P.vmetric?Y[1]:ht*.5)*E,vt=Y[2]*E;ht=Y?-Y[0]:ht,dt=pt/u,at=(F+vt)/u}else dt=F/u,at=0;let L;if(a.remeasure&&ht>0){L=l.measureText(J);const Y=L.width*1e3/o*u;if(ht<Y&&this.isFontSubpixelAAEnabled){const pt=ht/Y;H=!0,l.save(),l.scale(pt,1),dt/=pt}else ht!==Y&&(dt+=(ht-Y)/2e3*o/u)}if(this.contentVisible&&(P.isInFont||a.missingFile)){if(C&&!ct)l.fillText(J,dt,at),this.dependencyTracker?.recordCharacterBBox(t,l,L?{bbox:null}:a,o/u,dt,at,()=>L??l.measureText(J));else if(this.paintChar(t,J,dt,at,T,M),ct){const Y=dt+o*ct.offset.x/u,pt=at-o*ct.offset.y/u;this.paintChar(t,ct.fontChar,Y,pt,T,M)}}const V=A?ht*E-Z*m:ht*E+Z*m;F+=V,H&&l.restore()}A?s.y-=F:s.x+=F*y,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const s=this.ctx,a=this.current,o=a.font,l=a.fontSize,u=a.fontDirection,d=o.vertical?1:-1,f=a.charSpacing,m=a.wordSpacing,y=a.textHScale*u,b=a.fontMatrix||fd,A=e.length,w=a.textRenderingMode===Be.INVISIBLE;let S,E,C,T;if(w||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),a.textMatrix&&s.transform(...a.textMatrix),s.translate(a.x,a.y+a.textRise),s.scale(y,u);const M=this.dependencyTracker;for(this.dependencyTracker=M?new hc(M,t):null,S=0;S<A;++S){if(E=e[S],typeof E=="number"){T=d*E*l/1e3,this.ctx.translate(T,0),a.x+=T*y;continue}const D=(E.isSpace?m:0)+f,k=o.charProcOperatorList[E.operatorListId];k?this.contentVisible&&(this.save(),s.scale(l,l),s.transform(...b),this.executeOperatorList(k),this.restore()):St(`Type3 character "${E.operatorListId}" is not available.`);const F=[E.width,0];it.applyTransform(F,b),C=F[0]*l+D,s.translate(C,0),a.x+=C*y}s.restore(),M&&(this.dependencyTracker=M)}setCharWidth(t,e,s){}setCharWidthAndBounds(t,e,s,a,o,l,u){const d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,l,o,u).recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let s;if(e[0]==="TilingPattern"){const a=this.baseTransform||ae(this.ctx),o={createCanvasGraphics:(l,u)=>new Oa(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new hc(this.dependencyTracker,u,!0):null)};s=new tf(e,this.ctx,o,a)}else s=this._getPattern(t,e[1],e[2]);return s}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,s=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=NC(this.getObject(t,e)),this.cachedPatterns.set(e,a)),s&&(a.matrix=s),a}shadingFill(t,e){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const a=this._getPattern(t,e);s.fillStyle=a.getPattern(s,this,Zn(s),Fe.SHADING,t);const o=Zn(s);if(o){const{width:l,height:u}=s.canvas,d=Da.slice();it.axialAlignedBoundingBox([0,0,l,u],o,d);const[f,m,y,b]=d;this.ctx.fillRect(f,m,y-f,b-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Dn.transform).recordDependencies(t,Dn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Zt("Should not call beginInlineImage")}beginImageData(){Zt("Should not call beginImageData")}paintFormXObjectBegin(t,e,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ae(this.ctx),s)){it.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[a,o,l,u]=s,d=new Path2D;d.rect(a,o,l-a,u-o),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;e.isolated||xc("TODO: Support non-isolated groups."),e.knockout&&St("Knockout groups not supported.");const a=ae(s);if(e.matrix&&s.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Da.slice();it.axialAlignedBoundingBox(e.bbox,ae(s),o);const l=[0,0,s.canvas.width,s.canvas.height];o=it.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),d=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),m=Math.max(Math.ceil(o[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,m]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,m),A=b.context;A.translate(-u,-d),A.transform(...a);let w=new Path2D;const[S,E,C,T]=e.bbox;if(w.rect(S,E,C-S,T-E),e.matrix){const M=new Path2D;M.addPath(w,new DOMMatrix(e.matrix)),w=M}A.clip(w),e.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:u,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,d),s.save()),qr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ae(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Da.slice();it.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,l),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,s,a,o,l){if(this.#t(),Zl(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],d=s[3]-s[1];if(l&&this.annotationCanvasMap){a=a.slice(),a[4]-=s[0],a[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=d,it.singularValueDecompose2dScale(ae(this.ctx),bn);const{viewportScale:f}=this,m=Math.ceil(u*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(bn[0],0,0,-bn[1],0,d*bn[1]),Zl(this.ctx)}else{Zl(this.ctx),this.endPath(t);const f=new Path2D;f.rect(s[0],s[1],u,d),this.ctx.clip(f)}}this.current=new tb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const s=e.count;e=this.getObject(t,e.data,e),e.count=s;const a=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s,a=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=ae(d);d.transform(s,a,o,l,0,0);const m=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=u.length;y<b;y+=2){const A=it.transform(f,[s,a,o,l,u[y],u[y+1]]);d.drawImage(m.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+m.canvas.width,A[5],A[5]+m.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Dn.transformAndFill);for(const l of e){const{data:u,width:d,height:f,transform:m}=l,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=y.context;b.save();const A=this.getObject(t,u,l);nb(b,A),b.globalCompositeOperation="source-in",b.fillStyle=o?a.getPattern(b,this,Zn(s),Fe.FILL,t):a,b.fillRect(0,0,d,f),b.restore(),s.save(),s.transform(...m),s.scale(1,-1),Ql(s,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,d,0,f),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const s=this.getObject(t,e);if(!s){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,e,s,a,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){St("Dependent image isn't ready yet");return}const u=l.width,d=l.height,f=[];for(let m=0,y=o.length;m<y;m+=2)f.push({transform:[s,0,0,a,o[m],o[m+1]],x:0,y:0,w:u,h:d});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:a}=t,o=this.cachedCanvases.getCanvas("inlineImage",s,a),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const s=e.width,a=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/s,-1/a);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",s,a).context;eb(m,e),u=this.applyTransferMapsToCanvas(m)}const d=this._scaleImage(u,Zn(o));o.imageSmoothingEnabled=ib(ae(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,s,-a,0).recordDependencies(t,Dn.imageXObject).recordOperation(t),Ql(o,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,s,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,s){if(!this.contentVisible)return;const a=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;eb(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of s)a.save(),a.transform(...l.transform),a.scale(1,-1),Ql(a,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Dn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,s){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,s){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,s){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===sb?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ae(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:a,d:o}=this.ctx.getTransform();let l,u;if(s===0&&a===0){const d=Math.abs(e),f=Math.abs(o);if(d===f)if(t===0)l=u=1/d;else{const m=d*t;l=u=m<1?1/m:1}else if(t===0)l=1/d,u=1/f;else{const m=d*t,y=f*t;l=m<1?1/m:1,u=y<1?1/y:1}}else{const d=Math.abs(e*o-s*a),f=Math.hypot(e,s),m=Math.hypot(a,o);if(t===0)l=m/d,u=f/d;else{const y=t*d;l=m>y?m/y:1,u=f>y?f/y:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:a}}=this,[o,l]=this.getScaleForStroking();if(o===l){s.lineWidth=(a||1)*o,s.stroke(t);return}const u=s.getLineDash();e&&s.save(),s.scale(o,l),sd.a=1/o,sd.d=1/l;const d=new Path2D;if(d.addPath(t,sd),u.length>0){const f=Math.max(o,l);s.setLineDash(u.map(m=>m/f)),s.lineDashOffset/=f}s.lineWidth=a||1,s.stroke(d),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const h in Ua)Oa.prototype[h]!==void 0&&(Oa.prototype[Ua[h]]=Oa.prototype[h]);class Pa{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,s={};let a=0;for(const f of Pa.strings){const m=e.encode(t[f]);s[f]=m,a+=4+m.length}const o=new ArrayBuffer(a),l=new Uint8Array(o),u=new DataView(o);let d=0;for(const f of Pa.strings){const m=s[f],y=m.length;u.setUint32(d,y),l.set(m,d+4),d+=4+y}return Pt(d===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Pt(t<Pa.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,s))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class ja{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,s={};let a=0;for(const b of ja.strings){const A=e.encode(t[b]);s[b]=A,a+=4+A.length}a+=4;let o,l,u=1+a;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const d=new ArrayBuffer(u),f=new Uint8Array(d),m=new DataView(d);let y=0;m.setUint8(y++,t.guessFallback?1:0),m.setUint32(y,0),y+=4,a=0;for(const b of ja.strings){const A=s[b],w=A.length;a+=4+w,m.setUint32(y,w),f.set(A,y+4),y+=4+w}return m.setUint32(y-a-4,a),t.style&&(m.setUint32(y,o.length),f.set(o,y+4),y+=4+o.length,m.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length),Pt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Pt(t<ja.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const s=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,s))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),s=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:s,weight:o}}}class Kt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#s;#a;#o;constructor({data:t,extra:e}){this.#s=t,this.#a=new TextDecoder,this.#o=new DataView(this.#s),e&&Object.assign(this,e)}#c(t){Pt(t<Kt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),s=t*2%8,a=this.#o.getUint8(e)>>s&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Pt(t<Kt.numbers.length,"Invalid number index"),this.#o.getFloat64(Kt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Kt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<4;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Kt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<6;a++)s.push(this.#o.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Kt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const s=[];for(let a=0;a<3;a++)s.push(this.#o.getInt16(t,!0)),t+=2;return s}#d(t){Pt(t<Kt.strings.length,"Invalid string index");let e=Kt.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const s=this.#o.getUint32(e),a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,e+4,s)),this.#a.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Kt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#s,t+4,o)}clearData(){let t=Kt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);t+=4+a;const o=this.#o.getUint32(t);new Uint8Array(this.#s,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Kt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);t+=4+s;const a=this.#o.getUint32(t);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#s,t+4,a)),new Pa(o.buffer)}get systemFontInfo(){let t=Kt.#r;const e=this.#o.getUint32(t);t+=4+e;const s=this.#o.getUint32(t);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(this.#s,t+4,s)),new ja(a.buffer)}static write(t){const e=t.systemFontInfo?ja.write(t.systemFontInfo):null,s=t.cssFontInfo?Pa.write(t.cssFontInfo):null,a=new TextEncoder,o={};let l=0;for(const S of Kt.strings)o[S]=a.encode(t[S]),l+=4+o[S].length;const u=Kt.#r+4+l+4+(e?e.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(u),f=new Uint8Array(d),m=new DataView(d);let y=0;const b=Kt.bools.length;let A=0,w=0;for(let S=0;S<b;S++){const E=t[Kt.bools[S]];A|=(E===void 0?0:E?2:1)<<w,w+=2,(w===8||S===b-1)&&(m.setUint8(y++,A),A=0,w=0)}Pt(y===Kt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Kt.numbers)m.setFloat64(y,t[S]),y+=8;if(Pt(y===Kt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(y++,4);for(const S of t.bbox)m.setInt16(y,S,!0),y+=2}else m.setUint8(y++,0),y+=8;if(Pt(y===Kt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(y++,6);for(const S of t.fontMatrix)m.setFloat64(y,S,!0),y+=8}else m.setUint8(y++,0),y+=48;if(Pt(y===Kt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(y++,1);for(const S of t.defaultVMetrics)m.setInt16(y,S,!0),y+=2}else m.setUint8(y++,0),y+=6;Pt(y===Kt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(Kt.#r,0),y+=4;for(const S of Kt.strings){const E=o[S],C=E.length;m.setUint32(y,C),f.set(E,y+4),y+=4+C}if(m.setUint32(Kt.#r,y-Kt.#r-4),!e)m.setUint32(y,0),y+=4;else{const S=e.byteLength;m.setUint32(y,S),Pt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+S}if(!s)m.setUint32(y,0),y+=4;else{const S=s.byteLength;m.setUint32(y,S),Pt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(s),y+4),y+=4+S}return t.data===void 0?(m.setUint32(y,0),y+=4):(m.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Pt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class as{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class FC{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ma=Symbol("INTERNAL");class zC{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:s,usage:a,rbGroups:o}){this.#t=!!(t&gn.DISPLAY),this.#e=!!(t&gn.PRINT),this.name=e,this.intent=s,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,s=!1){t!==Ma&&Zt("Internal method `_setVisible` called."),this.#i=s,this.#n=e}}class IC{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=gn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const s of t.groups)this.#e.set(s.id,new zC(e,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(Ma,!1);for(const s of t.on)this.#e.get(s)._setVisible(Ma,!0);for(const s of t.off)this.#e.get(s)._setVisible(Ma,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let a=1;a<e;a++){const o=t[a];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return St(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return xc("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){const a=this.#e.get(t);if(!a){St(`Optional content group not found: ${t}`);return}if(s&&e&&a.rbGroups.length)for(const o of a.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(Ma,!1,!0);a._setVisible(Ma,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let s;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":s=a;continue}const o=this.#e.get(a);if(o)switch(s){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Z0;for(const[e,s]of this.#e)t.update(`${e}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class UC{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Pt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:o,progressiveDone:l,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=l,this._contentDispositionFilename=u,o?.length>0){const d=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const a=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(s),!0)});Pt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Pt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new HC(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new GC(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class HC{constructor(t,e,s=!1,a=null){this._stream=t,this._done=s||!1,this._filename=Sc(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class GC{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function VC(h){let t=!0,e=s("filename\\*","i").exec(h);if(e){e=e[1];let m=u(e);return m=unescape(m),m=d(m),m=f(m),o(m)}if(e=l(h),e){const m=f(e);return o(m)}if(e=s("filename","i").exec(h),e){e=e[1];let m=u(e);return m=f(m),o(m)}function s(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(m,{fatal:!0}),A=mo(y);y=b.decode(A),t=!1}catch{}}return y}function o(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function l(m){const y=[];let b;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(m))!==null;){let[,S,E,C]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[E,C]}const w=[];for(let S=0;S<y.length&&S in y;++S){let[E,C]=y[S];C=u(C),E&&(C=unescape(C),S===0&&(C=d(C))),w.push(C)}return w.join("")}function u(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function d(m){const y=m.indexOf("'");if(y===-1)return m;const b=m.slice(0,y),w=m.slice(y+1).replace(/^[^']*'/,"");return a(b,w)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,E){return String.fromCharCode(parseInt(E,16))}),a(b,w);try{w=atob(w)}catch{}return a(b,w)})}return""}function rv(h,t){const e=new Headers;if(!h||!t||typeof t!="object")return e;for(const s in t){const a=t[s];a!==void 0&&e.append(s,a)}return e}function wc(h){return URL.parse(h)?.origin??null}function ov({responseHeaders:h,isHttp:t,rangeChunkSize:e,disableRange:s}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(h.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*e)||s||!t||h.get("Accept-Ranges")!=="bytes"||(h.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function lv(h){const t=h.get("Content-Disposition");if(t){let e=VC(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Sc(e))return e}return null}function xo(h,t){return new so(`Unexpected server response (${h}) while retrieving PDF "${t}".`,h,h===404||h===0&&t.startsWith("file:"))}function cv(h){return h===200||h===206}function uv(h,t,e){return{method:"GET",headers:h,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function hv(h){return h instanceof Uint8Array?h.buffer:h instanceof ArrayBuffer?h:(St(`getArrayBuffer - unexpected data format: ${h}`),new Uint8Array(h).buffer)}class qC{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=rv(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Pt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new XC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new YC(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class XC{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),a=e.url;fetch(a,uv(s,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=wc(o.url),!cv(o.status))throw xo(o.status,a);this._reader=o.body.getReader(),this._headersCapability.resolve();const l=o.headers,{allowRangeRequests:u,suggestedLength:d}=ov({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=d||this._contentLength,this._filename=lv(l),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _i("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:hv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class YC{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${s-1}`);const l=a.url;fetch(l,uv(o,this._withCredentials,this._abortController)).then(u=>{const d=wc(u.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!cv(u.status))throw xo(u.status,l);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:hv(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const ad=200,rd=206;function $C(h){const t=h.response;return typeof t!="string"?t:mo(t).buffer}class KC{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=rv(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,a=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,l]of this.headers)e.setRequestHeader(o,l);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=rd):a.expectedStatus=ad,e.responseType="arraybuffer",Pt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){const s=this.pendingRequests[t];s&&s.onProgress?.(e)}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const a=s.xhr;if(a.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){s.onError(a.status);return}const o=a.status||ad;if(!(o===ad&&s.expectedStatus===rd)&&o!==s.expectedStatus){s.onError(a.status);return}const u=$C(a);if(o===rd){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?s.onDone({begin:parseInt(f[1],10),chunk:u}):(St('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class WC{constructor(t){this._source=t,this._manager=new KC(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Pt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new QC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new ZC(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class QC{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=wc(e.responseURL);const s=e.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[d,...f]=u.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=ov({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=lv(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=xo(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class ZC{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=wc(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=xo(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const JC=/^[a-z][a-z0-9\-+.]+:/i;function t_(h){if(JC.test(h))return new URL(h);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(h))}class e_{constructor(t){this.source=t,this.url=t_(t.url),Pt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Pt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new n_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new i_(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class n_{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=xo(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _i("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class i_{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Xr=Symbol("INITIAL_DATA");class dv{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Xr}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const s=this.#t[t];if(!s||s.data===Xr)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=this.#t[t];return!!e&&e.data!==Xr}delete(t){const e=this.#t[t];return!e||e.data===Xr?!1:(delete this.#t[t],!0)}resolve(t,e=null){const s=this.#e(t);s.data=e,s.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Xr&&(yield[t,e])}}}const s_=1e5,ab=30;let ro=class kn{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#p=null;#u=[];#m=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#C=new WeakMap;static#w=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:s}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=s.scale*Hn.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:l,pageY:u}=s.rawDims;this.#y=[1,0,0,-1,-l,u+o],this.#o=a,this.#a=o,kn.#R(),rs(e,s),this.#t.promise.finally(()=>{kn.#x.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=De.platform;return _t(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:s})=>{if(s){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#T(e.items),t()},this.#t.reject)};return this.#c=this.#p.getReader(),kn.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const s=t.scale*Hn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,rs(this.#l,{rotation:a})),s!==this.#h){e?.(),this.#h=s;const o={div:null,properties:null,ctx:kn.#N(this.#r)};for(const l of this.#u)o.properties=this.#m.get(l),o.div=l,this.#E(o)}}cancel(){const t=new _i("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#T(t){if(this.#i)return;this.#s.ctx??=kn.#N(this.#r);const e=this.#u,s=this.#g;for(const a of t){if(e.length>s_){St("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),o.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(a.str),this.#S(a)}}#S(t){const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=it.transform(this.#y,t.transform);let o=Math.atan2(a[1],a[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=kn.fontFamilyMap.get(u)||u;const d=Math.hypot(a[2],a[3]),f=d*kn.#B(u,l,this.#r);let m,y;o===0?(m=a[4],y=a[5]-f):(m=a[4]+f*Math.sin(o),y=a[5]-f*Math.cos(o));const b="calc(var(--total-scale-factor) *",A=e.style;this.#e===this.#l?(A.left=`${(100*m/this.#o).toFixed(2)}%`,A.top=`${(100*y/this.#a).toFixed(2)}%`):(A.left=`${b}${m.toFixed(2)}px)`,A.top=`${b}${y.toFixed(2)}px)`),A.fontSize=`${b}${(kn.#w*d).toFixed(2)}px)`,A.fontFamily=u,s.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(s.angle=o*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);S!==E&&Math.max(S,E)/Math.min(S,E)>1.5&&(w=!0)}if(w&&(s.canvasWidth=l.vertical?t.height:t.width),this.#m.set(e,s),this.#s.div=e,this.#s.properties=s,this.#E(this.#s),s.hasText&&this.#e.append(e),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#E(t){const{div:e,properties:s,ctx:a}=t,{style:o}=e;let l="";if(kn.#w>1&&(l=`scale(${1/kn.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:d,fontSize:f}=s;kn.#M(a,f*this.#h,u);const{width:m}=a.measureText(e.textContent);m>0&&(l=`scaleX(${d*this.#h/m}) ${l}`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)}static cleanup(){if(!(this.#x.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#N(t=null){let e=this.#b.get(t||="");if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#C.set(e,{size:0,family:""})}return e}static#M(t,e,s){const a=this.#C.get(t);e===a.size&&s===a.family||(t.font=`${e}px ${s}`,a.size=e,a.family=s)}static#R(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#B(t,e,s){const a=this.#v.get(t);if(a)return a;const o=this.#N(s);o.canvas.width=o.canvas.height=ab,this.#M(o,ab,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,d=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+d):(De.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}};const a_=100;function ef(h={}){typeof h=="string"||h instanceof URL?h={url:h}:(h instanceof ArrayBuffer||ArrayBuffer.isView(h))&&(h={data:h});const t=new nf,{docId:e}=t,s=h.url?fC(h.url):null,a=h.data?pC(h.data):null,o=h.httpHeaders||null,l=h.withCredentials===!0,u=h.password??null,d=h.range instanceof sf?h.range:null,f=Number.isInteger(h.rangeChunkSize)&&h.rangeChunkSize>0?h.rangeChunkSize:2**16;let m=h.worker instanceof Ha?h.worker:null;const y=h.verbosity,b=typeof h.docBaseUrl=="string"&&!yo(h.docBaseUrl)?h.docBaseUrl:null,A=Yl(h.cMapUrl),w=h.cMapPacked!==!1,S=h.CMapReaderFactory||(Xe?AC:qy),E=Yl(h.iccUrl),C=Yl(h.standardFontDataUrl),T=h.StandardFontDataFactory||(Xe?SC:Xy),M=Yl(h.wasmUrl),D=h.WasmFactory||(Xe?wC:Yy),k=h.stopAtErrors!==!0,F=Number.isInteger(h.maxImageSize)&&h.maxImageSize>-1?h.maxImageSize:-1,B=h.isEvalSupported!==!1,P=typeof h.isOffscreenCanvasSupported=="boolean"?h.isOffscreenCanvasSupported:!Xe,H=typeof h.isImageDecoderSupported=="boolean"?h.isImageDecoderSupported:!Xe&&(De.platform.isFirefox||!globalThis.chrome),Z=Number.isInteger(h.canvasMaxAreaInBytes)?h.canvasMaxAreaInBytes:-1,J=typeof h.disableFontFace=="boolean"?h.disableFontFace:Xe,ct=h.fontExtraProperties===!0,dt=h.enableXfa===!0,at=h.ownerDocument||globalThis.document,ht=h.disableRange===!0,L=h.disableStream===!0,V=h.disableAutoFetch===!0,Y=h.pdfBug===!0,pt=h.CanvasFactory||(Xe?xC:yC),vt=h.FilterFactory||(Xe?vC:bC),O=h.enableHWA===!0,q=h.useWasm!==!1,K=d?d.length:h.length??NaN,tt=typeof h.useSystemFonts=="boolean"?h.useSystemFonts:!Xe&&!J,lt=typeof h.useWorkerFetch=="boolean"?h.useWorkerFetch:!!(S===qy&&T===Xy&&D===Yy&&A&&C&&M&&Kr(A,document.baseURI)&&Kr(C,document.baseURI)&&Kr(M,document.baseURI)),ft=null;$E(y);const et={canvasFactory:new pt({ownerDocument:at,enableHWA:O}),filterFactory:new vt({docId:e,ownerDocument:at}),cMapReaderFactory:lt?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:lt?null:new T({baseUrl:C}),wasmFactory:lt?null:new D({baseUrl:M})};m||(m=Ha.create({verbosity:y,port:as.workerPort}),t._worker=m);const Gt={docId:e,apiVersion:"5.4.296",data:a,password:u,disableAutoFetch:V,rangeChunkSize:f,length:K,docBaseUrl:b,enableXfa:dt,evaluatorOptions:{maxImageSize:F,disableFontFace:J,ignoreErrors:k,isEvalSupported:B,isOffscreenCanvasSupported:P,isImageDecoderSupported:H,canvasMaxAreaInBytes:Z,fontExtraProperties:ct,useSystemFonts:tt,useWasm:q,useWorkerFetch:lt,cMapUrl:A,iccUrl:E,standardFontDataUrl:C,wasmUrl:M}},wt={ownerDocument:at,pdfBug:Y,styleElement:ft,loadingParams:{disableAutoFetch:V,enableXfa:dt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const jt=m.messageHandler.sendWithPromise("GetDocRequest",Gt,a?[a.buffer]:null);let Ce;if(d)Ce=new UC(d,{disableRange:ht,disableStream:L});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const _e=Kr(s)?qC:Xe?e_:WC;Ce=new _e({url:s,length:K,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:ht,disableStream:L})}return jt.then(_e=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Bt=new Wr(e,_e,m.port),Ft=new l_(Bt,t,Ce,wt,et,O);t._transport=Ft,Bt.send("Ready",null)})}).catch(t._capability.reject),t}class nf{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${nf.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let sf=class{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,s=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const s of this.#r)s(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const s of this.#n)s(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Zt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class r_{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class o_{#t=!1;constructor(t,e,s,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=a?new Fy:null,this._pdfBug=a,this.commonObjs=s.commonObjs,this.objs=new dv,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}={}){return new go({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:a,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _t(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:s,intent:a="display",annotationMode:o=ii.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,o,y,b),{renderingIntent:E,cacheKey:C}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(E);let T=this._intentStates.get(C);T||(T=Object.create(null),this._intentStates.set(C,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const M=!!(E&gn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const D=!!(this._pdfBug&&globalThis.StepperManager?.enabled),k=!this.recordedBBoxes&&(A||D),F=H=>{if(T.renderTasks.delete(B),k){const Z=B.gfx?.dependencyTracker.take();Z&&(B.stepper&&B.stepper.setOperatorBBoxes(Z,B.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=Z))}M&&(this.#t=!0),this.#e(),H?(B.capability.reject(H),this._abortOperatorList({intentState:T,reason:H instanceof Error?H:new Error(H)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new ka({callback:F,params:{canvas:e,canvasContext:t,dependencyTracker:k?new CC(e,T.operatorList.length,D):null,viewport:s,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:w});(T.renderTasks||=new Set).add(B);const P=B.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([H,Z])=>{if(this.destroyed){F();return}if(this._stats?.time("Rendering"),!(Z.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:H,optionalContentConfig:Z}),B.operatorListChanged()}).catch(F),P}getOperatorList({intent:t="display",annotationMode:e=ii.ENABLE,printAnnotationStorage:s=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(d))}const l=this._transport.getRenderingIntent(t,e,s,a,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let d;return u.opListReadCapability||(d=Object.create(null),d.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(d),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>ao.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,a){function o(){l.read().then(function({value:d,done:f}){if(f){s(u);return}u.lang??=d.lang,Object.assign(u.styles,d.styles),u.items.push(...d.items),o()},a)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Fy),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const s=this._intentStates.get(e);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let s=0,a=t.length;s<a;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:a}){const{map:o,transfer:l}=s,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:a},l).getReader(),f=this._intentStates.get(e);f.streamReader=d;const m=()=>{d.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),m())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Ac){let a=a_;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new _i(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var is,Fn,Ci,Ns,dc,Ds,ks,Ke,ec,fv,pv,Qr,za,nc;const ie=class ie{constructor({name:t=null,port:e=null,verbosity:s=KE()}={}){Wn(this,Ke);Wn(this,is,Promise.withResolvers());Wn(this,Fn,null);Wn(this,Ci,null);Wn(this,Ns,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(ne(ie,ks).has(e))throw new Error("Cannot use more than one PDFWorker per port.");ne(ie,ks).set(e,this),Qn(this,Ke,fv).call(this,e)}else Qn(this,Ke,pv).call(this)}get promise(){return ne(this,is).promise}get port(){return ne(this,Ci)}get messageHandler(){return ne(this,Fn)}destroy(){this.destroyed=!0,ne(this,Ns)?.terminate(),sn(this,Ns,null),ne(ie,ks).delete(ne(this,Ci)),sn(this,Ci,null),ne(this,Fn)?.destroy(),sn(this,Fn,null)}static create(t){const e=ne(this,ks).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ie(t)}static get workerSrc(){if(as.workerSrc)return as.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return _t(this,"_setupFakeWorkerGlobal",(async()=>ne(this,za,nc)?ne(this,za,nc):(await import(this.workerSrc)).WorkerMessageHandler)())}};is=new WeakMap,Fn=new WeakMap,Ci=new WeakMap,Ns=new WeakMap,dc=new WeakMap,Ds=new WeakMap,ks=new WeakMap,Ke=new WeakSet,ec=function(){ne(this,is).resolve(),ne(this,Fn).send("configure",{verbosity:this.verbosity})},fv=function(t){sn(this,Ci,t),sn(this,Fn,new Wr("main","worker",t)),ne(this,Fn).on("ready",()=>{}),Qn(this,Ke,ec).call(this)},pv=function(){if(ne(ie,Ds)||ne(ie,za,nc)){Qn(this,Ke,Qr).call(this);return}let{workerSrc:t}=ie;try{ie._isSameOrigin(window.location,t)||(t=ie._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Wr("main","worker",e),a=()=>{o.abort(),s.destroy(),e.terminate(),this.destroyed?ne(this,is).reject(new Error("Worker was destroyed")):Qn(this,Ke,Qr).call(this)},o=new AbortController;e.addEventListener("error",()=>{ne(this,Ns)||a()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}sn(this,Fn,s),sn(this,Ci,e),sn(this,Ns,e),Qn(this,Ke,ec).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{l()}catch{Qn(this,Ke,Qr).call(this)}});const l=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};l();return}catch{xc("The worker has been disabled.")}Qn(this,Ke,Qr).call(this)},Qr=function(){ne(ie,Ds)||(St("Setting up fake worker."),sn(ie,Ds,!0)),ie._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){ne(this,is).reject(new Error("Worker was destroyed"));return}const e=new gC;sn(this,Ci,e);const s=`fake${cy(ie,dc)._++}`,a=new Wr(s+"_worker",s,e);t.setup(a,e),sn(this,Fn,new Wr(s,s+"_worker",e)),Qn(this,Ke,ec).call(this)}).catch(t=>{ne(this,is).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},za=new WeakSet,nc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Wn(ie,za),Wn(ie,dc,0),Wn(ie,Ds,!1),Wn(ie,ks,new WeakMap),Xe&&(sn(ie,Ds,!0),as.workerSrc||="./pdf.worker.mjs"),ie._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const a=new URL(e,s);return s.origin===a.origin},ie._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ie.fromPort=t=>{if(sC("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return ie.create(t)};let Ha=ie;class l_{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,s,a,o,l){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new dv,this.fontLoader=new hC({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=l,this.setupMessageHandler()}#s(t,e=null){const s=this.#t.get(t);if(s)return s;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return _t(this,"annotationStorage",new Qd)}getRenderingIntent(t,e=ii.ENABLE,s=null,a=!1,o=!1){let l=gn.DISPLAY,u=md;switch(t){case"any":l=gn.ANY;break;case"display":break;case"print":l=gn.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const d=l&gn.PRINT&&s instanceof J0?s:this.annotationStorage;switch(e){case ii.DISABLE:l+=gn.ANNOTATIONS_DISABLE;break;case ii.ENABLE:break;case ii.ENABLE_FORMS:l+=gn.ANNOTATIONS_FORMS;break;case ii.ENABLE_STORAGE:l+=gn.ANNOTATIONS_STORAGE,u=d.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(l+=gn.IS_EDITING),o&&(l+=gn.OPLIST);const{ids:f,hash:m}=d.modifiedIds,y=[l,u.hash,m];return{renderingIntent:l,cacheKey:y.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ro.cleanup(),this._networkStream?.cancelAllRequests(new _i("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,a)=>{Pt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},a.onPull=()=>{this._fullReader.read().then(function({value:o,done:l}){if(l){a.close();return}Pt(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this._fullReader.cancel(o),a.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:l}=this._fullReader;return(!a||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:a,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(s,a)=>{Pt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){a.close();return}Pt(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{o.cancel(l),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new r_(s,this))}),t.on("DocException",s=>{e._capability.reject(an(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw an(s);const a=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};e.onPassword(a,s.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",s=>{e.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,a,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(a){case"Font":if("error"in o){const m=o.error;St(`Error during font loading: ${m}`),this.commonObjs.resolve(s,m);break}const l=new Kt(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,y)=>globalThis.FontInspector.fontAdded(m,y):null,d=new dC(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(s,d)});break;case"CopyLocalImage":const{imageRef:f}=o;Pt(f,"The imageRef must be defined.");for(const m of this.#e.values())for(const[,y]of m.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(s,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([s,a,o,l])=>{if(this.destroyed)return;const u=this.#e.get(a);if(!u.objs.has(s)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",s=>{this.destroyed||e.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[s.type];if(!a)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=this.#i.get(e);if(s)return s;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#n.set(o.refStr,t);const l=new o_(e,o,this,this._params.pdfBug);return this.#e.set(e,l),l});return this.#i.set(e,a),a}getPageIndex(t){return gd(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new IC(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new FC(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ro.cleanup()}}cachedPageNumber(t){if(!gd(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class c_{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ka{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:s,commonObjs:a,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=e,this.objs=s,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new c_(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=A,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ka.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ka.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Oa(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ka.#e.delete(this._canvas),t||=new Ac(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ka.#e.delete(this._canvas),this.callback())))}}const af="5.4.296",mv="f56dc8601";class yn{#t=null;#e=null;#i;#n=null;#r=!1;#s=!1;#a=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return _t(this,"_keyboardManager",new bo([[["Escape","mac+Escape"],yn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],yn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],yn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],yn.prototype._moveToPrevious],[["Home","mac+Home"],yn.prototype._moveToBeginning],[["End","mac+End"],yn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",yn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#i,t.append(s),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",vn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=s,o.setAttribute("data-l10n-id",yn.#d[s]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Lt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#p(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#t){this.#n.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstChild||t.target===this.#t){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#n.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#n.lastChild?.focus()}#g(t){yn._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const s of this.#n.children)s.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class oo{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,oo.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,colorValue:s}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=s||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",oo.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function rb(h){return Math.floor(Math.max(0,Math.min(1,h))*255).toString(16).padStart(2,"0")}function Yr(h){return Math.max(0,Math.min(255,255*h))}class ob{static CMYK_G([t,e,s,a]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Yr(t),[t,t,t]}static G_HTML([t]){const e=rb(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Yr)}static RGB_HTML(t){return`#${t.map(rb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,s+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,s,a]){return[Yr(1-Math.min(1,t+a)),Yr(1-Math.min(1,s+a)),Yr(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const a=1-t,o=1-e,l=1-s,u=Math.min(a,o,l);return["CMYK",a,o,l,u]}}class u_{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),s||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Zt("Abstract method `_createSVG` called.")}}class lo extends u_{_createSVG(t){return document.createElementNS(Ei,t)}}const h_=9,Ps=new WeakSet,d_=new Date().getTimezoneOffset()*60*1e3;class lb{static create(t){switch(t.data.annotationType){case fe.LINK:return new rf(t);case fe.TEXT:return new p_(t);case fe.WIDGET:switch(t.data.fieldType){case"Tx":return new m_(t);case"Btn":return t.data.radioButton?new gv(t):t.data.checkBox?new y_(t):new b_(t);case"Ch":return new v_(t);case"Sig":return new g_(t)}return new Fs(t);case fe.POPUP:return new vd(t);case fe.FREETEXT:return new yv(t);case fe.LINE:return new A_(t);case fe.SQUARE:return new S_(t);case fe.CIRCLE:return new w_(t);case fe.POLYLINE:return new bv(t);case fe.CARET:return new C_(t);case fe.INK:return new of(t);case fe.POLYGON:return new E_(t);case fe.HIGHLIGHT:return new vv(t);case fe.UNDERLINE:return new __(t);case fe.SQUIGGLY:return new T_(t);case fe.STRIKEOUT:return new M_(t);case fe.STAMP:return new xv(t);case fe.FILEATTACHMENT:return new R_(t);default:return new oe(t)}}}class oe{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return oe._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:s,rect:a}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>l?(l=e[u+1],o=e[u+2]):e[u+1]===l&&(o=Math.max(o,e[u+2]));return[o,l]}if(s?.length>=1){for(const u of s)for(let d=0,f=u.length;d<f;d+=2)u[d+1]>l?(l=u[d+1],o=u[d]):u[d+1]===l&&(o=Math.max(o,u[d]));if(o!==1/0)return[o,l]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/s,t[1]=100*(t[1]-l)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${io}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:s})||this.annotationStorage.setValue(`${io}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:s}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&s?.text&&(this._createPopup(s),a=this.#i.popup),a&&(a.updateEdited(t),s?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:s,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:d}}}}=this;s?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+d)/l}%`,a===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:s,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof Fs)&&!(this instanceof rf)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof vd){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,o),o}const{width:u,height:d}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(S>0||E>0){const T=`calc(${S}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;l.borderRadius=T}else if(this instanceof gv){const T=`calc(${u}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;l.borderRadius=T}switch(e.borderStyle.style){case Ta.SOLID:l.borderStyle="solid";break;case Ta.DASHED:l.borderStyle="dashed";break;case Ta.BEVELED:St("Unimplemented border style: beveled");break;case Ta.INSET:St("Unimplemented border style: inset");break;case Ta.UNDERLINE:l.borderBottomStyle="solid";break}const C=e.borderColor||null;C?(this.#e=!0,l.borderColor=it.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):l.borderWidth=0}const f=it.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:m,pageHeight:y,pageX:b,pageY:A}=a.rawDims;l.left=`${100*(f[0]-b)/m}%`,l.top=`${100*(f[1]-A)/y}%`;const{rotation:w}=e;return e.hasOwnCanvas||w===0?(l.width=`${100*u/m}%`,l.height=`${100*d/y}%`):this.setRotation(w,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/s}%`,e.style.height=`${100*l/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,a)=>{const o=a.detail[e],l=o[0],u=o.slice(1);a.target.style[s]=ob[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:ob[`${l}_rgb`](u)})};return _t(this,"_commonActions",{display:e=>{const{display:s}=e.detail,a=s%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||s[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[a,o]of Object.entries(e)){const l=s[a];if(l){const u={detail:{[a]:o},target:t};l(u),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,a,o]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,E,C,T]=t.subarray(2,6);if(a===S&&o===E&&e===C&&s===T)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:E}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const d=a-e,f=o-s,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=m.createElement("defs");y.append(b);const A=m.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,E=t.length;S<E;S+=8){const C=t[S],T=t[S+1],M=t[S+2],D=t[S+3],k=m.createElement("rect"),F=(M-e)/d,B=(o-T)/f,P=(C-M)/d,H=(T-D)/f;k.setAttribute("x",F),k.setAttribute("y",B),k.setAttribute("width",P),k.setAttribute("height",H),A.append(k),u?.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${B}" width="${P}" height="${H}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(y),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:e}=this;let s,a;t?(s={str:t.text},a=t.date):(s=e.contentsObj,a=e.modificationDate);const o=this.#i=new vd({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:s,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Zt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:o,id:l,exportValues:u}of a){if(o===-1||l===e)continue;const d=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!Ps.has(f)){St(`_getElementsByName - element not allowed: ${l}`);continue}s.push({id:l,exportValue:d,domElement:f})}return s}for(const a of document.getElementsByName(t)){const{exportValue:o}=a,l=a.getAttribute("data-element-id");l!==e&&Ps.has(a)&&s.push({id:l,exportValue:o,domElement:a})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class f_ extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class rf extends oe{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,s=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),s&&(t.title=s),this.#t()}#e(t,e,s="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const o=s.get(a);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:a,refs:o,include:l}=e,u=[];if(a.length!==0||o.length!==0){const m=new Set(o);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:A}of b)m.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)m.has(b.id)===l&&u.push(b)}else for(const m of Object.values(this._fieldObjects))u.push(...m);const d=this.annotationStorage,f=[];for(const m of u){const{id:y}=m;switch(f.push(y),m.type){case"text":{const A=m.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=m.defaultValue===m.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=m.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!Ps.has(b)){St(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class p_ extends oe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Fs extends oe{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return De.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,a,o){s.includes("mouse")?t.addEventListener(s,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(s,l=>{if(s==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(l)}})})}_setEventListeners(t,e,s,a){for(const[o,l]of s)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,a),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":it.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||h_,o=t.style;let l;const u=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),m=Math.round(f/(Jh*a))||1,y=f/m;l=Math.min(a,d(y/Jh))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(a,d(f/Jh))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=it.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class m_ extends Fs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,a){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=s),o.setValue(l.id,{[a]:s})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Ps.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:y}=this.data,b=!!m&&this.enableScripting;f&&(s.title=f),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",w=>{t.setValue(e,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=d.userValue=S,d.formattedValue=null});let A=w=>{const{formattedValue:S}=d;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(d.focused)return;const{target:E}=S;if(b&&(E.type=m,y&&(E.step=y)),d.userValue){const C=d.userValue;if(b)if(m==="time"){const T=new Date(C),M=[T.getHours(),T.getMinutes(),T.getSeconds()];E.value=M.map(D=>D.toString().padStart(2,"0")).join(":")}else E.value=new Date(C-d_).toISOString().split(m==="date"?"T":".",1)[0];else E.value=C}d.lastCommittedValue=E.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const E={value(C){d.userValue=C.detail.value??"",b||t.setValue(e,{value:d.userValue.toString()}),C.target.value=d.userValue},formattedValue(C){const{formattedValue:T}=C.detail;d.formattedValue=T,T!=null&&C.target!==document.activeElement&&(C.target.value=T);const M={formattedValue:T};b&&(M.value=T),t.setValue(e,M)},selRange(C){C.target.setSelectionRange(...C.detail.selRange)},charLimit:C=>{const{charLimit:T}=C.detail,{target:M}=C;if(T===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",T);let D=d.userValue;!D||D.length<=T||(D=D.slice(0,T),M.value=d.userValue=D,t.setValue(e,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(E,S)}),s.addEventListener("keydown",S=>{d.commitKey=1;let E=-1;if(S.key==="Escape"?E=0:S.key==="Enter"&&!this.data.multiLine?E=2:S.key==="Tab"&&(d.commitKey=3),E===-1)return;const{value:C}=S.target;d.lastCommittedValue!==C&&(d.lastCommittedValue=C,d.userValue=C,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:E,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:E}=S;let{value:C}=E;if(b){if(C&&m==="time"){const T=C.split(":").map(M=>parseInt(M,10));C=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),E.step=""}else C.includes("T")||(C=`${C}T00:00`),C=new Date(C).valueOf();E.type="text"}d.userValue=C,d.lastCommittedValue!==C&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:E,target:C}=S,{value:T,selectionStart:M,selectionEnd:D}=C;let k=M,F=D;switch(S.inputType){case"deleteWordBackward":{const B=T.substring(0,M).match(/\w*[^\w]*$/);B&&(k-=B[0].length);break}case"deleteWordForward":{const B=T.substring(M).match(/^[^\w]*\w*/);B&&(F+=B[0].length);break}case"deleteContentBackward":M===D&&(k-=1);break;case"deleteContentForward":M===D&&(F+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:E||"",willCommit:!1,selStart:k,selEnd:F}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class g_ extends Fs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class y_ extends Fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(s,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Ps.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s)){const m=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(s,{value:d.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class gv extends Fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let a=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(s,{value:a})),a)for(const l of this._getElementsByName(e.fieldName,s))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(Ps.add(o),o.setAttribute("data-element-id",s),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:d}=l.target;for(const f of this._getElementsByName(u,s))t.setValue(f.id,{value:!1});t.setValue(s,{value:d})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const d={value:f=>{const m=l===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=m&&y.id===s;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class b_ extends rf{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class v_ extends Fs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");Ps.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,s.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),o=!1),a.append(y)}let l=null;if(o){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),l=()=>{m.remove(),a.removeEventListener("input",l),l=null},a.addEventListener("input",l)}const u=m=>{const y=m?"value":"textContent",{options:b,multiple:A}=a;return A?Array.prototype.filter.call(b,w=>w.selected).map(w=>w[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=u(!1);const f=m=>{const y=m.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const y={value(b){l?.();const A=b.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of a.options)S.selected=w.has(S.value);t.setValue(e,{value:u(!0)}),d=u(!1)},multipleSelection(b){a.multiple=!0},remove(b){const A=a.options,w=b.detail.remove;A[w].selected=!1,a.remove(w),A.length>0&&Array.prototype.findIndex.call(A,E=>E.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=u(!1)},insert(b){const{index:A,displayValue:w,exportValue:S}=b.detail.insert,E=a.children[A],C=document.createElement("option");C.textContent=w,C.value=S,E?E.before(C):a.append(C),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},items(b){const{items:A}=b.detail;for(;a.length!==0;)a.remove(0);for(const w of A){const{displayValue:S,exportValue:E}=w,C=document.createElement("option");C.textContent=S,C.value=E,a.append(C)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),d=u(!1)},indices(b){const A=new Set(b.detail.indices);for(const w of b.target.options)w.selected=A.has(w.index);t.setValue(e,{value:u(!0)}),d=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,m)}),a.addEventListener("input",m=>{const y=u(!0),b=u(!1);t.setValue(e,{value:y}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class vd extends oe{constructor(t){const{data:e,elements:s,parent:a}=t,o=!!a._commentManager;if(super(t,{isRenderable:!o&&oe._hasPopupData(e)}),this.elements=s,o&&oe._hasPopupData(e)){const l=this.popup=this.#t();for(const u of s)u.popup=l}else this.popup=null}#t(){return new x_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),s=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${Xd}${a}`).join(",")),this.container}}class x_{#t=null;#e=this.#V.bind(this);#i=this.#z.bind(this);#n=this.#L.bind(this);#r=this.#A.bind(this);#s=null;#a=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#p=null;#u=null;#m=null;#y=null;#v=null;#b=null;#C=null;#w=null;#x=null;#T=!1;#S=null;#E=null;constructor({container:t,color:e,elements:s,titleObj:a,modificationDate:o,contentsObj:l,richText:u,parent:d,rect:f,parentRect:m,open:y,commentManager:b=null}){this.#a=t,this.#w=a,this.#o=l,this.#C=u,this.#d=d,this.#s=e,this.#b=f,this.#h=m,this.#l=s,this.#t=b,this.#S=s[0],this.#c=cc.toDateObject(o),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),b?this.renderCommentButton():(this.#N(),this.#a.hidden=!0,y&&this.#A())}#N(){if(this.#p)return;this.#p=new AbortController;const{signal:t}=this.#p;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#M(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m||(this.#y||this.#M(),!this.#y))return;const{signal:t}=this.#p=new AbortController,e=!!this.#S.extraPopupElement,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#S.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#m=document.createElement("button");l.className="annotationCommentButton";const u=this.#S.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#R(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",s,{signal:t}),l.addEventListener("pointerenter",a,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#R(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,e]=this.#y,{style:s}=this.#m;s.left=`calc(${t}%)`,s.top=`calc(${e}% - var(--comment-button-dim))`}#B(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#S.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:t,color:e,opacity:s,creationDate:a,modificationDate:o}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:s,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#m}get comment(){return this.#E||=this.#S.commentText,this.#E}set comment(t){t!==this.comment&&(this.#S.commentText=this.#E=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:s}=this.#m.getBoundingClientRect(),{x:a,y:o,width:l,height:u}=this.#S.layer.getBoundingClientRect();return[(t-a)/l,(e+s-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,s]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:l,width:u,height:d}=a;this.#t.showDialog(null,this,o+e*u,l+s*d,{...t,parentDimensions:a})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#s){const s=t.style.outlineColor=it.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",e.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(e),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),e.append(s)}$d({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#a.append(t)}get#k(){const t=this.#C,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#C.html||null}get#O(){return this.#k?.attributes?.style?.fontSize||0}get#F(){return this.#k?.attributes?.style?.color||null}#P(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#F,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:a});return s}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#A()}updateEdited({rect:t,popup:e,deleted:s}){if(this.#t){s?(this.remove(),this.#E=null):e&&(e.deleted?this.remove():(this.#B(),this.#E=e.text)),t&&(this.#y=null,this.#M(),this.#R());return}if(s||e?.deleted){this.remove();return}this.#N(),this.#x||={contentsObj:this.#o,richText:this.#C},t&&(this.#u=null),e&&e.text&&(this.#C=this.#P(e.text),this.#c=cc.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#C}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#T=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#_(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:a,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#b;for(const w of this.#l)if(!u||it.intersect(w.data.rect,u)!==null){u=w.data.rect,l=!0;break}const d=it.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),m=l?u[2]-u[0]+5:0,y=d[0]+m,b=d[1];this.#u=[100*(y-a)/e,100*(b-o)/s];const{style:A}=this.#a;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#A(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#z(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#L(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#_(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#z(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#N(),this.#T&&(this.#g||this.#L(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class yv extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class A_ extends oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class S_ extends oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class w_ extends oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:s}=this,a=this.svgFactory.create(e,s,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",s/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class bv extends oe{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:s,popupRef:a},width:o,height:l}=this;if(!e)return this.container;const u=this.svgFactory.create(o,l,!0);let d=[];for(let m=0,y=e.length;m<y;m+=2){const b=e[m]-t[0],A=t[3]-e[m+1];d.push(`${b},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",s.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class E_ extends bv{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class C_ extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class of extends oe{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:l,width:u,height:d}=this.#i(e,t),f=this.svgFactory.create(u,d,!0),m=this.#t=this.svgFactory.createElement("svg:g");f.append(m),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",l);for(let y=0,b=s.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[y].join(",")),m.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:s,rect:a}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),s)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",s[l].join(","));if(a){const{transform:l,width:u,height:d}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class vv extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class __ extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class T_ extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class M_ extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class xv extends oe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class R_ extends oe{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let s;e.hasAppearance||e.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:a}=De.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let lf=class Av{#t=null;#e=null;#i=null;#n=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:a,page:o,viewport:l,structTreeLayer:u,commentManager:d,linkService:f,annotationStorage:m}){this.div=t,this.#t=e,this.#e=s,this.#r=u||null,this.#s=f||null,this.#i=m||new Qd,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async#a(t,e,s){const a=t.firstChild||t,o=a.id=`${Xd}${e}`,l=await this.#r?.getAriaAttributes(o);if(l)for(const[u,d]of l)a.setAttribute(u,d);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,a,!1))}async render(t){const{annotations:e}=t,s=this.div;rs(s,this.viewport);const a=new Map,o={data:null,layer:s,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new lo,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const u=l.annotationType===fe.POPUP;if(u){const m=a.get(l.id);if(!m)continue;o.elements=m}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;const d=lb.create(o);if(!d.isRenderable)continue;if(!u&&l.popupRef){const m=a.get(l.popupRef);m?m.push(d):a.set(l.popupRef,[d])}const f=d.render();l.hidden&&(f.style.visibility="hidden"),await this.#a(f,l.id,o.elements),d.extraPopupElement?.popup?.renderCommentButton(),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}this.#o()}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#s,svgFactory:new lo,parent:this};for(const s of t){s.borderStyle||=Av._defaultBorderStyle,e.data=s;const a=lb.create(e);if(!a.isRenderable)continue;const o=a.render();await this.#a(o,s.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,rs(e,{rotation:t.rotation}),this.#o(),e.hidden=!1}#o(){if(!this.#e)return;const t=this.div;for(const[e,s]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,s),l._hasNoCanvas=!1):l.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:s,rotation:a}=t,o=new f_({data:{id:s,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#i}),l=o.render();return e.append(l),this.#t?.moveElementInDOM(e,l,l,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return _t(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ta.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const Jl=/\r\n?|\n/g;class Re extends gt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Re.prototype,e=o=>o.isEmpty(),s=Ti.TRANSLATE_SMALL,a=Ti.TRANSLATE_BIG;return _t(this,"_keyboardManager",new bo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=At.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Re._defaultColor||gt._defaultLineColor,this.#n=t.fontSize||Re._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){gt.initialize(t,e);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Lt.FREETEXT_SIZE:Re._defaultFontSize=e;break;case Lt.FREETEXT_COLOR:Re._defaultColor=e;break}}updateParams(t,e){switch(t){case Lt.FREETEXT_SIZE:this.#r(e);break;case Lt.FREETEXT_COLOR:this.#s(e);break}}static get defaultPropertiesToUpdate(){return[[Lt.FREETEXT_SIZE,Re._defaultFontSize],[Lt.FREETEXT_COLOR,Re._defaultColor||gt._defaultLineColor]]}get propertiesToUpdate(){return[[Lt.FREETEXT_SIZE,this.#n],[Lt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new oo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Lt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},s=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const e=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Re._internalPadding*t,-(Re._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let e=null;for(const s of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(Re.#c(s)),e=s);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/e):(this.width=s.height/t,this.height=s.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;const s=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(e)},undo:()=>{s(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Re._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[f,m]=this.pageDimensions,[y,b]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(l[0]-y)/f,w=e+this.height-(l[1]-b)/m;break;case 90:A=t+(l[0]-y)/f,w=e-(l[1]-b)/m,[u,d]=[d,-u];break;case 180:A=t-this.width+(l[0]-y)/f,w=e-(l[1]-b)/m,[u,d]=[-u,-d];break;case 270:A=t+(l[0]-y-this.height*m)/f,w=e+(l[1]-b-this.width*f)/m,[u,d]=[-d,u];break}this.setAt(A*a,w*o,u,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Jl,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:s}=e;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=Re.#h(e.getData("text")||"").replaceAll(Jl,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!a.includes(`
`)){l.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=l,f=[],m=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(m.push(u.nodeValue.slice(d).replaceAll(Jl,"")),A!==this.editorDiv){let w=f;for(const S of this.editorDiv.childNodes){if(S===A){w=m;continue}w.push(Re.#c(S))}}f.push(u.nodeValue.slice(0,d).replaceAll(Jl,""))}else if(u===this.editorDiv){let A=f,w=0;for(const S of this.editorDiv.childNodes)w++===d&&(A=m),A.push(Re.#c(S))}this.#t=`${f.join(`
`)}${a}${m.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(b<=w){y.setStart(A,b),y.setEnd(A,b);break}b-=w}o.removeAllRanges(),o.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Re._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,s){let a=null;if(t instanceof yv){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:f,id:m,popupRef:y,richText:b,contentsObj:A,creationDate:w,modificationDate:S},textContent:E,textPosition:C,parent:{page:{pageNumber:T}}}=t;if(!E||E.length===0)return null;a=t={annotationType:At.FREETEXT,color:Array.from(u),fontSize:l,value:E.join(`
`),position:C,pageIndex:T-1,rect:d.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:w,modificationDate:S}}const o=await super.deserialize(t,e,s);return o.#n=t.fontSize,o.color=it.makeHexColor(...t.color),o.#t=Re.#h(t.value),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=gt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:e,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==s||t.color.some((l,u)=>l!==a[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:s}=e;s.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,s.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class nt{static PRECISION=1e-4;toSVGPath(){Zt("Abstract method `toSVGPath` must be implemented.")}get box(){Zt("Abstract getter `box` must be implemented.")}serialize(t,e){Zt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u]*a,l[u+1]=s+t[u+1]*o;return l}static _rescaleAndSwap(t,e,s,a,o,l){l||=new Float32Array(t.length);for(let u=0,d=t.length;u<d;u+=2)l[u]=e+t[u+1]*a,l[u+1]=s+t[u]*o;return l}static _translate(t,e,s,a){a||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)a[o]=e+t[o],a[o+1]=s+t[o+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,a,o){switch(o){case 90:return[1-e/s,t/a];case 180:return[1-t/s,1-e/a];case 270:return[e/s,1-t/a];default:return[t/s,e/a]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,a,o,l){return[(t+5*s)/6,(e+5*a)/6,(5*s+o)/6,(5*a+l)/6,(s+o)/2,(a+l)/2]}}class Rs{#t;#e=[];#i;#n;#r=[];#s=new Float32Array(18);#a;#o;#c;#l;#d;#h;#f=[];static#g=8;static#p=2;static#u=Rs.#g+Rs.#p;constructor({x:t,y:e},s,a,o,l,u=0){this.#t=s,this.#h=o*a,this.#n=l,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=u,this.#l=Rs.#g*a,this.#c=Rs.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){const t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[s,a,o,l]=this.#t;return[(this.#a+(t[0]-e[0])/2-s)/o,(this.#o+(t[1]-e[1])/2-a)/l,(this.#a+(e[0]-t[0])/2-s)/o,(this.#o+(e[1]-t[1])/2-a)/l]}add({x:t,y:e}){this.#a=t,this.#o=e;const[s,a,o,l]=this.#t;let[u,d,f,m]=this.#s.subarray(8,12);const y=t-f,b=e-m,A=Math.hypot(y,b);if(A<this.#c)return!1;const w=A-this.#l,S=w/A,E=S*y,C=S*b;let T=u,M=d;u=f,d=m,f+=E,m+=C,this.#f?.push(t,e);const D=-C/w,k=E/w,F=D*this.#h,B=k*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([f+F,m+B],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([f-F,m-B],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+F,d+B],2),this.#r.push(NaN,NaN,NaN,NaN,(u+F-s)/o,(d+B-a)/l),this.#s.set([u-F,d-B],14),this.#e.push(NaN,NaN,NaN,NaN,(u-F-s)/o,(d-B-a)/l)),this.#s.set([T,M,u,d,f,m],6),!this.isEmpty()):(this.#s.set([T,M,u,d,f,m],6),Math.abs(Math.atan2(M-d,T-u)-Math.atan2(C,E))<Math.PI/2?([u,d,f,m]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-s)/o,((d+m)/2-a)/l),[u,d,T,M]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+u)/2-s)/o,((M+d)/2-a)/l),!0):([T,M,u,d,f,m]=this.#s.subarray(0,6),this.#r.push(((T+5*u)/6-s)/o,((M+5*d)/6-a)/l,((5*u+f)/6-s)/o,((5*d+m)/6-a)/l,((u+f)/2-s)/o,((d+m)/2-a)/l),[f,m,u,d,T,M]=this.#s.subarray(12,18),this.#e.push(((T+5*u)/6-s)/o,((M+5*d)/6-a)/l,((5*u+f)/6-s)/o,((5*d+m)/6-a)/l,((u+f)/2-s)/o,((d+m)/2-a)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?s.push(`L${t[a+4]} ${t[a+5]}`):s.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(s);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?s.push(`L${e[a+4]} ${e[a+5]}`):s.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(s),s.join(" ")}#y(){const[t,e,s,a]=this.#t,[o,l,u,d]=this.#m();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-e)/a} L${(this.#s[4]-t)/s} ${(this.#s[5]-e)/a} L${o} ${l} L${u} ${d} L${(this.#s[16]-t)/s} ${(this.#s[17]-e)/a} L${(this.#s[14]-t)/s} ${(this.#s[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,s,a,o]=this.#t,l=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[d,f,m,y]=this.#m();t.push(`L${(l[0]-e)/a} ${(l[1]-s)/o} L${d} ${f} L${m} ${y} L${(u[0]-e)/a} ${(u[1]-s)/o}`)}newFreeDrawOutline(t,e,s,a,o,l){return new Sv(t,e,s,a,o,l)}getOutlines(){const t=this.#r,e=this.#e,s=this.#s,[a,o,l,u]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/l,d[y+1]=(this.#f[y+1]-o)/u;if(d[d.length-2]=(this.#a-a)/l,d[d.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#C(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let m=t.length;for(let y=0;y<m;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}m=this.#x(f,m);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[y+b],f[m+1]=e[y+b+1],m+=2}return this.#w(f,m),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#C(t){const e=this.#s,[s,a,o,l]=this.#t,[u,d,f,m]=this.#m(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-s)/o,(e[3]-a)/l,NaN,NaN,NaN,NaN,(e[4]-s)/o,(e[5]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-s)/o,(e[17]-a)/l,NaN,NaN,NaN,NaN,(e[14]-s)/o,(e[15]-a)/l],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#w(t,e){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6}#x(t,e){const s=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[o,l,u,d]=this.#t,[f,m,y,b]=this.#m();return t.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-l)/d],e),e+=24}}class Sv extends nt{#t;#e=new Float32Array(4);#i;#n;#r;#s;#a;constructor(t,e,s,a,o,l){super(),this.#a=t,this.#r=e,this.#t=s,this.#s=a,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,d,f,m]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-u)/f,t[y+1]=(t[y+1]-d)/m;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-u)/f,e[y+1]=(e[y+1]-d)/m}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let e=6,s=this.#a.length;e<s;e+=6){if(isNaN(this.#a[e])){t.push(`L${this.#a[e+4]} ${this.#a[e+5]}`);continue}t.push(`C${this.#a[e]} ${this.#a[e+1]} ${this.#a[e+2]} ${this.#a[e+3]} ${this.#a[e+4]} ${this.#a[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,s,a],o){const l=s-t,u=a-e;let d,f;switch(o){case 0:d=nt._rescale(this.#a,t,a,l,-u),f=nt._rescale(this.#r,t,a,l,-u);break;case 90:d=nt._rescaleAndSwap(this.#a,t,e,l,u),f=nt._rescaleAndSwap(this.#r,t,e,l,u);break;case 180:d=nt._rescale(this.#a,s,e,-l,u),f=nt._rescale(this.#r,s,e,-l,u);break;case 270:d=nt._rescaleAndSwap(this.#a,s,a,-l,-u),f=nt._rescaleAndSwap(this.#r,s,a,-l,-u);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#a;let s=e[4],a=e[5];const o=[s,a,s,a];let l=s,u=a,d=s,f=a;const m=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,w=e.length;A<w;A+=6){const S=e[A+4],E=e[A+5];isNaN(e[A])?(it.pointBoundingBox(S,E,o),u>E?(l=S,u=E):u===E&&(l=m(l,S)),f<E?(d=S,f=E):f===E&&(d=m(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,it.bezierBoundingBox(s,a,...e.slice(A,A+6),y),it.rectBoundingBox(y[0],y[1],y[2],y[3],o),u>y[1]?(l=y[0],u=y[1]):u===y[1]&&(l=m(l,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=m(d,y[2]))),s=S,a=E}const b=this.#e;b[0]=o[0]-this.#i,b[1]=o[1]-this.#i,b[2]=o[2]-o[0]+2*this.#i,b[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,u],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,s,a,o,l=0){return new Rs(t,e,s,a,o,l)}getNewOutline(t,e){const[s,a,o,l]=this.#e,[u,d,f,m]=this.#t,y=o*f,b=l*m,A=s*f+u,w=a*m+d,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+w},this.#t,this.#s,t,this.#n,e??this.#i);for(let E=2;E<this.#r.length;E+=2)S.add({x:this.#r[E]*y+A,y:this.#r[E+1]*b+w});return S.getOutlines()}}class xd{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,s=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:S,y:E,width:C,height:T}of t){const M=Math.floor((S-e)/l)*l,D=Math.ceil((S+C+e)/l)*l,k=Math.floor((E-e)/l)*l,F=Math.ceil((E+T+e)/l)*l,B=[M,k,F,!0],P=[D,k,F,!1];this.#n.push(B,P),it.rectBoundingBox(M,k,D,F,o)}const u=o[2]-o[0]+2*s,d=o[3]-o[1]+2*s,f=o[0]-s,m=o[1]-s;let y=a?-1/0:1/0,b=1/0;const A=this.#n.at(a?-1:-2),w=[A[0],A[2]];for(const S of this.#n){const[E,C,T,M]=S;!M&&a?C<b?(b=C,y=E):C===b&&(y=Math.max(y,E)):M&&!a&&(C<b?(b=C,y=E):C===b&&(y=Math.min(y,E))),S[0]=(E-f)/u,S[1]=(C-m)/d,S[2]=(T-m)/d}this.#t=new Float32Array([f,m,u,d]),this.#e=[y,b],this.#i=w}getOutlines(){this.#n.sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){const e=[],s=new Set;for(const l of t){const[u,d,f]=l;e.push([u,d,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const d=e[l][2],f=e[l+1][2];d.push(f),f.push(d),s.add(d),s.add(f)}const a=[];let o;for(;s.size>0;){const l=s.values().next().value;let[u,d,f,m,y]=l;s.delete(l);let b=u,A=d;for(o=[u,f],a.push(o);;){let w;if(s.has(m))w=m;else if(s.has(y))w=y;else break;s.delete(w),[u,d,f,m,y]=w,b!==u&&(o.push(b,A,u,A===d?d:f),b=u),A=A===d?f:d}o.push(b,A)}return new N_(a,this.#t,this.#e,this.#i)}#a(t){const e=this.#r;let s=0,a=e.length-1;for(;s<=a;){const o=s+a>>1,l=e[o][0];if(l===t)return o;l<t?s=o+1:a=o-1}return a+1}#o([,t,e]){const s=this.#a(t);this.#r.splice(s,0,[t,e])}#c([,t,e]){const s=this.#a(t);for(let a=s;a<this.#r.length;a++){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}for(let a=s-1;a>=0;a--){const[o,l]=this.#r[a];if(o!==t)break;if(o===t&&l===e){this.#r.splice(a,1);return}}}#l(t){const[e,s,a]=t,o=[[e,s,a]],l=this.#a(a);for(let u=0;u<l;u++){const[d,f]=this.#r[u];for(let m=0,y=o.length;m<y;m++){const[,b,A]=o[m];if(!(f<=b||A<=d)){if(b>=d){if(A>f)o[m][1]=f;else{if(y===1)return[];o.splice(m,1),m--,y--}continue}o[m][2]=d,A>f&&o.push([e,f,A])}}}return o}}class N_ extends nt{#t;#e;constructor(t,e,s,a){super(),this.#e=t,this.#t=e,this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[s,a]=e;t.push(`M${s} ${a}`);for(let o=2;o<e.length;o+=2){const l=e[o],u=e[o+1];l===s?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,e,s,a],o){const l=[],u=s-t,d=a-e;for(const f of this.#e){const m=new Array(f.length);for(let y=0;y<f.length;y+=2)m[y]=t+f[y]*u,m[y+1]=a-f[y+1]*d;l.push(m)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Ad extends Rs{newFreeDrawOutline(t,e,s,a,o,l){return new D_(t,e,s,a,o,l)}}class D_ extends Sv{newOutliner(t,e,s,a,o,l=0){return new Ad(t,e,s,a,o,l)}}class pe extends gt{#t=null;#e=0;#i;#n=null;#r=null;#s=null;#a=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#p=null;#u="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=At.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=pe.prototype;return _t(this,"_keyboardManager",new bo([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||pe._defaultColor,this.#m=t.thickness||pe._defaultThickness,this.opacity=t.opacity||pe._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#S()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new xd(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new xd(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:a}=this.#s;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:s}){this.#l=t;const a=1.5;if(this.#s=t.getNewOutline(this.#m/2+a,.0025),e>=0)this.#d=e,this.#n=s,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:pe.#E(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:pe.#E(this.#s.box,y),path:{d:this.#s.toSVGPath()}})}const[o,l,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/y,this.height=d*y/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/y,this.height=d*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/d];const{lastPoint:m}=this.#s;this.#g=[(m[0]-o)/u,(m[1]-l)/d]}static initialize(t,e){gt.initialize(t,e),pe._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Lt.HIGHLIGHT_COLOR:pe._defaultColor=e;break;case Lt.HIGHLIGHT_THICKNESS:pe._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Lt.HIGHLIGHT_COLOR:this.#C(e);break;case Lt.HIGHLIGHT_THICKNESS:this.#w(e);break}}static get defaultPropertiesToUpdate(){return[[Lt.HIGHLIGHT_COLOR,pe._defaultColor],[Lt.HIGHLIGHT_THICKNESS,pe._defaultThickness]]}get propertiesToUpdate(){return[[Lt.HIGHLIGHT_COLOR,this.color||pe._defaultColor],[Lt.HIGHLIGHT_THICKNESS,this.#m||pe._defaultThickness],[Lt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#C(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,pe._defaultOpacity),undo:e.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const e=this.#m,s=a=>{this.#m=a,this.#x(a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Lt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new yn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#R())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#R())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#T():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([t,e,s,a],o){switch(o){case 90:return[1-e-a,t,a,s];case 180:return[1-t-s,1-e-a,s,a];case 270:return[e,1-t-s,a,s]}return[t,e,s,a]}rotate(t){const{drawLayer:e}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=pe.#E(this.#l.box,t)):s=pe.#E([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:pe.#E(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#N.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(this.width,this.height),Q0(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#N(t){pe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#M(!0);break;case 1:case 3:this.#M(!1);break}}#M(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#a,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#M(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#R(){return this.#h?this.rotation:0}#B(){if(this.#h)return null;const[t,e]=this.pageDimensions,[s,a]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let u=0;for(const{x:d,y:f,width:m,height:y}of o){const b=d*t+s,A=(1-f)*e+a;l[u]=l[u+4]=b,l[u+1]=l[u+3]=A,l[u+2]=l[u+6]=b+m*t,l[u+5]=l[u+7]=A-y*e,u+=8}return l}#k(t){return this.#l.serialize(t,this.#R())}static startHighlighting(t,e,{target:s,x:a,y:o}){const{x:l,y:u,width:d,height:f}=s.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),b=A=>{m.abort(),this.#F(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",re,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",vn,{signal:y}),s.addEventListener("pointermove",this.#O.bind(this,t),{signal:y}),this._freeHighlight=new Ad({x:a,y:o},[l,u,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,s){let a=null;if(t instanceof vv){const{data:{quadPoints:w,rect:S,rotation:E,id:C,color:T,opacity:M,popupRef:D,richText:k,contentsObj:F,creationDate:B,modificationDate:P},parent:{page:{pageNumber:H}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(T),opacity:M,quadPoints:w,boxes:null,pageIndex:H-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:D,richText:k,comment:F?.str||null,creationDate:B,modificationDate:P}}else if(t instanceof of){const{data:{inkLists:w,rect:S,rotation:E,id:C,color:T,borderStyle:{rawWidth:M},popupRef:D,richText:k,contentsObj:F,creationDate:B,modificationDate:P},parent:{page:{pageNumber:H}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(T),thickness:M,inkLists:w,boxes:null,pageIndex:H-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,popupRef:D,richText:k,comment:F?.str||null,creationDate:B,modificationDate:P}}const{color:o,quadPoints:l,inkLists:u,opacity:d}=t,f=await super.deserialize(t,e,s);f.color=it.makeHexColor(...o),f.opacity=d||1,u&&(f.#m=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[m,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(l){const w=f.#i=[];for(let S=0;S<l.length;S+=8)w.push({x:(l[S]-b)/m,y:1-(l[S+1]-A)/y,width:(l[S+2]-l[S])/m,height:(l[S+1]-l[S+5])/y});f.#v(),f.#S(),f.rotate(f.rotation)}else if(u){f.#h=!0;const w=u[0],S={x:w[0]-b,y:y-(w[1]-A)},E=new Ad(S,[0,0,m,y],1,f.#m/2,!0,.001);for(let M=0,D=w.length;M<D;M+=2)S.x=w[M]-b,S.y=y-(w[M+1]-A),E.add(S);const{id:C,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);f.#b({highlightOutlines:E.getOutlines(),highlightId:C,clipPathId:T}),f.#S(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=gt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#B(),outlines:this.#k(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#P(s)?null:(s.id=this.annotationElementId,s)}#P(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class wv{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Zt("Not implemented")}}class bt extends gt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static#s=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#l(t),this.#f())}#l({drawOutlines:t,drawId:e,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,e){const{id:s}=e.drawLayer.draw(bt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,e){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(e))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){Zt("Not implemented")}static get typesMap(){Zt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,e),this._currentParent&&(bt.#i.updateProperty(s,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,e[a]]);return t}_updateProperty(t,e,s){const a=this._drawingOptions,o=a[e],l=u=>{a.updateProperty(e,u);const d=this.#t.updateProperty(e,u);d&&this.#u(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,bt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,bt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,bt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#g([t,e,s,a]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[e,1-t,s*(l/o),a*(o/l)];case 180:return[1-t,1-e,s,a];case 270:return[1-e,t,s*(l/o),a*(o/l)];default:return[t,e,s,a]}}#p(){const{x:t,y:e,width:s,height:a,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-e,t,s*(o/l),a*(l/o)];case 180:return[1-t,1-e,s,a];case 270:return[e,1-t,s*(o/l),a*(l/o)];default:return[t,e,s,a]}}#u(t){[this.x,this.y,this.width,this.height]=this.#g(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#m(){const{x:t,y:e,width:s,height:a,rotation:o,parentRotation:l,parentDimensions:[u,d]}=this;switch((o*4+l)/90){case 1:return[1-e-a,t,a,s];case 2:return[1-t-s,1-e-a,s,a];case 3:return[e,1-t-s,a,s];case 4:return[t,e-s*(u/d),a*(d/u),s*(u/d)];case 5:return[1-e,t,s*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-e,a*(d/u),s*(u/d)];case 7:return[e-s*(u/d),1-t-a*(d/u),s*(u/d),a*(d/u)];case 8:return[t-s,e-a,s,a];case 9:return[1-e,t-s,a,s];case 10:return[1-t,1-e,s,a];case 11:return[e-a,1-t,a,s];case 12:return[t-a*(d/u),e,a*(d/u),s*(u/d)];case 13:return[1-e-s*(u/d),t-a*(d/u),s*(u/d),a*(d/u)];case 14:return[1-t,1-e-s*(u/d),a*(d/u),s*(u/d)];case 15:return[e,1-t,s*(u/d),a*(d/u)];default:return[t,e,s,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,bt._mergeSVGProperties({bbox:this.#m()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),s}static createDrawerInstance(t,e,s,a,o){Zt("Not implemented")}static startDrawing(t,e,s,a){const{target:o,offsetX:l,offsetY:u,pointerId:d,pointerType:f}=a;if(bt.#a&&bt.#a!==f)return;const{viewport:{rotation:m}}=t,{width:y,height:b}=o.getBoundingClientRect(),A=bt.#n=new AbortController,w=t.combinedSignal(A);if(bt.#s||=d,bt.#a??=f,window.addEventListener("pointerup",S=>{bt.#s===S.pointerId?this._endDraw(S):bt.#o?.delete(S.pointerId)},{signal:w}),window.addEventListener("pointercancel",S=>{bt.#s===S.pointerId?this._currentParent.endDrawingSession():bt.#o?.delete(S.pointerId)},{signal:w}),window.addEventListener("pointerdown",S=>{bt.#a===S.pointerType&&((bt.#o||=new Set).add(S.pointerId),bt.#i.isCancellable()&&(bt.#i.removeLastElement(),bt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",vn,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",S=>{S.timeStamp===bt.#c&&re(S)},{signal:w}),t.toggleDrawing(),e._editorUndoBar?.hide(),bt.#i){t.drawLayer.updateProperties(this._currentDrawId,bt.#i.startNew(l,u,y,b,m));return}e.updateUIForDefaultProperties(this),bt.#i=this.createDrawerInstance(l,u,y,b,m),bt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(bt.#r.toSVGProperties(),bt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(bt.#c=-1,!bt.#i)return;const{offsetX:e,offsetY:s,pointerId:a}=t;if(bt.#s===a){if(bt.#o?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,bt.#i.add(e,s)),bt.#c=t.timeStamp,re(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,bt.#i=null,bt.#r=null,bt.#a=null,bt.#c=NaN),bt.#n&&(bt.#n.abort(),bt.#n=null,bt.#s=NaN,bt.#o=null)}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,bt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=bt.#i,a=this._currentDrawId,o=s.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:Lt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Lt.DRAW_STEP),!bt.#i.isEmpty()){const{pageDimensions:[s,a],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:bt.#i.getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:bt.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,s,a,o,l){Zt("Not implemented")}static async deserialize(t,e,s){const{rawDims:{pageWidth:a,pageHeight:o,pageX:l,pageY:u}}=e.viewport,d=this.deserializeDraw(l,u,a,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,s);return f.createDrawingOptions(t),f.#l({drawOutlines:d}),f.#f(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,s]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#t.serialize([e,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class k_{#t=new Float64Array(6);#e;#i;#n;#r;#s;#a="";#o=0;#c=new Ao;#l;#d;constructor(t,e,s,a,o,l){this.#l=s,this.#d=a,this.#n=o,this.#r=l,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#i=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return nt._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#h(t,e);const[s,a,o,l]=this.#t.subarray(2,6),u=t-o,d=e-l;return Math.hypot(this.#l*u,this.#d*d)<=2?null:(this.#s.push(t,e),isNaN(s)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,a,o,l,t,e],0),this.#e.push(...nt.createBezierPoints(s,a,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,a,o){this.#l=s,this.#d=a,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:l,points:this.#s}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#s=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#a="";for(let t=0,e=this.#i.length;t<e;t++){const{line:s,points:a}=this.#i[t];this.#e=s,this.#s=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=nt.svgRound(this.#e[4]),e=nt.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${e} Z`,this.#a;if(this.#s.length<=6){const a=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#s.length===4){const a=nt.svgRound(this.#e[10]),o=nt.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${a} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,o=this.#e.length;a<o;a+=6){const[l,u,d,f,m,y]=this.#e.slice(a,a+6).map(nt.svgRound);s.push(`C${l} ${u} ${d} ${f} ${m} ${y}`)}return this.#a+=s.join(" "),this.#o=this.#e.length,this.#a}getOutlines(t,e,s,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,s,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Ao extends nt{#t;#e=0;#i;#n;#r;#s;#a;#o;#c;build(t,e,s,a,o,l,u){this.#r=e,this.#s=s,this.#a=a,this.#o=o,this.#c=l,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${nt.svgRound(e[4])} ${nt.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${nt.svgRound(e[10])} ${nt.svgRound(e[11])}`);continue}for(let s=6,a=e.length;s<a;s+=6){const[o,l,u,d,f,m]=e.subarray(s,s+6).map(nt.svgRound);t.push(`C${o} ${l} ${u} ${d} ${f} ${m}`)}}return t.join("")}serialize([t,e,s,a],o){const l=[],u=[],[d,f,m,y]=this.#d();let b,A,w,S,E,C,T,M,D;switch(this.#o){case 0:D=nt._rescale,b=t,A=e+a,w=s,S=-a,E=t+d*s,C=e+(1-f-y)*a,T=t+(d+m)*s,M=e+(1-f)*a;break;case 90:D=nt._rescaleAndSwap,b=t,A=e,w=s,S=a,E=t+f*s,C=e+d*a,T=t+(f+y)*s,M=e+(d+m)*a;break;case 180:D=nt._rescale,b=t+s,A=e,w=-s,S=a,E=t+(1-d-m)*s,C=e+f*a,T=t+(1-d)*s,M=e+(f+y)*a;break;case 270:D=nt._rescaleAndSwap,b=t+s,A=e+a,w=-s,S=-a,E=t+(1-f-y)*s,C=e+(1-d-m)*a,T=t+(1-f)*s,M=e+(1-d)*a;break}for(const{line:k,points:F}of this.#n)l.push(D(k,b,A,w,S,o?new Array(k.length):null)),u.push(D(F,b,A,w,S,o?new Array(F.length):null));return{lines:l,points:u,rect:[E,C,T,M]}}static deserialize(t,e,s,a,o,{paths:{lines:l,points:u},rotation:d,thickness:f}){const m=[];let y,b,A,w,S;switch(d){case 0:S=nt._rescale,y=-t/s,b=e/a+1,A=1/s,w=-1/a;break;case 90:S=nt._rescaleAndSwap,y=-e/a,b=-t/s,A=1/a,w=1/s;break;case 180:S=nt._rescale,y=t/s+1,b=-e/a,A=-1/s,w=1/a;break;case 270:S=nt._rescaleAndSwap,y=e/a+1,b=t/s+1,A=-1/a,w=-1/s;break}if(!l){l=[];for(const C of u){const T=C.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const M=new Float32Array(3*(T-2));l.push(M);let[D,k,F,B]=C.subarray(0,4);M.set([NaN,NaN,NaN,NaN,D,k],0);for(let P=4;P<T;P+=2){const H=C[P],Z=C[P+1];M.set(nt.createBezierPoints(D,k,F,B,H,Z),(P-2)*3),[D,k,F,B]=[F,B,H,Z]}}}for(let C=0,T=l.length;C<T;C++)m.push({line:S(l[C].map(M=>M??NaN),y,b,A,w),points:S(u[C].map(M=>M??NaN),y,b,A,w)});const E=new this.prototype.constructor;return E.build(m,s,a,1,d,f,o),E}#l(t=this.#c){const e=this.#i+t/2*this.#a;return this.#o%180===0?[e/this.#r,e/this.#s]:[e/this.#s,e/this.#r]}#d(){const[t,e,s,a]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,s-2*o,a-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)it.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],l=a[5];for(let u=6,d=a.length;u<d;u+=6){const[f,m,y,b,A,w]=a.subarray(u,u+6);it.bezierBoundingBox(o,l,f,m,y,b,A,w,t),o=A,l=w}}const[e,s]=this.#l();t[0]=Ue(t[0]-e,0,1),t[1]=Ue(t[1]-s,0,1),t[2]=Ue(t[2]+e,0,1),t[3]=Ue(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,s]=this.#l();this.#c=t;const[a,o]=this.#l(),[l,u]=[a-e,o-s],d=this.#t;return d[0]-=l,d[1]-=u,d[2]+=2*l,d[3]+=2*u,d}updateParentDimensions([t,e],s){const[a,o]=this.#l();this.#r=t,this.#s=e,this.#a=s;const[l,u]=this.#l(),d=l-a,f=u-o,m=this.#t;return m[0]-=d,m[1]-=f,m[2]+=2*d,m[3]+=2*f,m}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(nt.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let s=0,a=0,o=0,l=0,u=0,d=0;switch(this.#e){case 90:a=e/t,o=-t/e,u=t;break;case 180:s=-1,l=-1,u=t,d=e;break;case 270:a=-e/t,o=t/e,d=e;break;default:return""}return`matrix(${s} ${a} ${o} ${l} ${nt.svgRound(u)} ${nt.svgRound(d)})`}getPathResizingSVGProperties([t,e,s,a]){const[o,l]=this.#l(),[u,d,f,m]=this.#t;if(Math.abs(f-o)<=nt.PRECISION||Math.abs(m-l)<=nt.PRECISION){const S=t+s/2-(u+f/2),E=e+a/2-(d+m/2);return{path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${E})`}}}const y=(s-2*o)/(f-2*o),b=(a-2*l)/(m-2*l),A=f/s,w=m/a;return{path:{"transform-origin":`${nt.svgRound(u)} ${nt.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${nt.svgRound(o)} ${nt.svgRound(l)}) scale(${y} ${b}) translate(${nt.svgRound(-o)} ${nt.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,s,a]){const[o,l]=this.#l(),u=this.#t,[d,f,m,y]=u;if(u[0]=t,u[1]=e,u[2]=s,u[3]=a,Math.abs(m-o)<=nt.PRECISION||Math.abs(y-l)<=nt.PRECISION){const E=t+s/2-(d+m/2),C=e+a/2-(f+y/2);for(const{line:T,points:M}of this.#n)nt._translate(T,E,C,T),nt._translate(M,E,C,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(s-2*o)/(m-2*o),A=(a-2*l)/(y-2*l),w=-b*(d+o)+t+o,S=-A*(f+l)+e+l;if(b!==1||A!==1||w!==0||S!==0)for(const{line:E,points:C}of this.#n)nt._rescale(E,w,S,b,A,E),nt._rescale(C,w,S,b,A,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],s){const[a,o]=s,l=this.#t,u=t-l[0],d=e-l[1];if(this.#r===a&&this.#s===o)for(const{line:f,points:m}of this.#n)nt._translate(f,u,d,f),nt._translate(m,u,d,m);else{const f=this.#r/a,m=this.#s/o;this.#r=a,this.#s=o;for(const{line:y,points:b}of this.#n)nt._rescale(y,u,d,f,m,y),nt._rescale(b,u,d,f,m,b);l[2]*=f,l[3]*=m}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t)} ${nt.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${nt.svgRound(t[0])} ${nt.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Ec extends wv{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:gt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Ec(this._viewParameters);return t.updateAll(this),t}}class cf extends bt{static _type="ink";static _editorType=At.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){gt.initialize(t,e),this._defaultDrawingOptions=new Ec(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return _t(this,"typesMap",new Map([[Lt.INK_THICKNESS,"stroke-width"],[Lt.INK_COLOR,"stroke"],[Lt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,s,a,o){return new k_(t,e,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,s,a,o,l){return Ao.deserialize(t,e,s,a,o,l)}static async deserialize(t,e,s){let a=null;if(t instanceof of){const{data:{inkLists:l,rect:u,rotation:d,id:f,color:m,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:w,contentsObj:S,creationDate:E,modificationDate:C},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:At.INK,color:Array.from(m),thickness:b,opacity:y,paths:{points:l},boxes:null,pageIndex:T-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:E,modificationDate:C}}const o=await super.deserialize(t,e,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new oo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Lt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:s}=this;e.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:s}){this._drawingOptions=cf.getDefaultDrawingOptions({stroke:it.makeHexColor(...t),"stroke-width":e,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:gt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:e,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Sd extends Ao{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const tc=8,$r=3;class Ms{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,s,a){return s-=t,a-=e,s===0?a>0?0:4:s===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const m=(-f+d-u+16)%8,y=this.#i[2*m],b=this.#i[2*m+1];if(t[(s+y)*e+(a+b)]!==0)return m}return-1}static#r(t,e,s,a,o,l,u){const d=this.#e(s,a,o,l);for(let f=0;f<8;f++){const m=(f+d+u+16)%8,y=this.#i[2*m],b=this.#i[2*m+1];if(t[(s+y)*e+(a+b)]!==0)return m}return-1}static#s(t,e,s,a){const o=t.length,l=new Int32Array(o);for(let m=0;m<o;m++)l[m]=t[m]<=a?1:0;for(let m=1;m<s-1;m++)l[m*e]=l[m*e+e-1]=0;for(let m=0;m<e;m++)l[m]=l[e*s-1-m]=0;let u=1,d;const f=[];for(let m=1;m<s-1;m++){d=1;for(let y=1;y<e-1;y++){const b=m*e+y,A=l[b];if(A===0)continue;let w=m,S=y;if(A===1&&l[b-1]===0)u+=1,S-=1;else if(A>=1&&l[b+1]===0)u+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const E=[y,m],C=S===y+1,T={isHole:C,points:E,id:u,parent:0};f.push(T);let M;for(const J of f)if(J.id===d){M=J;break}M?M.isHole?T.parent=C?M.parent:d:T.parent=C?d:M.parent:T.parent=C?d:0;const D=this.#n(l,e,m,y,w,S,0);if(D===-1){l[b]=-u,l[b]!==1&&(d=Math.abs(l[b]));continue}let k=this.#i[2*D],F=this.#i[2*D+1];const B=m+k,P=y+F;w=B,S=P;let H=m,Z=y;for(;;){const J=this.#r(l,e,H,Z,w,S,1);k=this.#i[2*J],F=this.#i[2*J+1];const ct=H+k,dt=Z+F;E.push(dt,ct);const at=H*e+Z;if(l[at+1]===0?l[at]=-u:l[at]===1&&(l[at]=u),ct===m&&dt===y&&H===B&&Z===P){l[b]!==1&&(d=Math.abs(l[b]));break}else w=H,S=Z,H=ct,Z=dt}}}return f}static#a(t,e,s,a){if(s-e<=4){for(let B=e;B<s-2;B+=2)a.push(t[B],t[B+1]);return}const o=t[e],l=t[e+1],u=t[s-4]-o,d=t[s-3]-l,f=Math.hypot(u,d),m=u/f,y=d/f,b=m*l-y*o,A=d/u,w=1/f,S=Math.atan(A),E=Math.cos(S),C=Math.sin(S),T=w*(Math.abs(E)+Math.abs(C)),M=w*(1-T+T**2),D=Math.max(Math.atan(Math.abs(C+E)*M),Math.atan(Math.abs(C-E)*M));let k=0,F=e;for(let B=e+2;B<s-2;B+=2){const P=Math.abs(b-m*t[B+1]+y*t[B]);P>k&&(F=B,k=P)}k>(f*D)**2?(this.#a(t,e,F+2,a),this.#a(t,F,s,a)):a.push(o,l)}static#o(t){const e=[],s=t.length;return this.#a(t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e}static#c(t,e,s,a,o,l){const u=new Float32Array(l**2),d=-2*a**2,f=l>>1;for(let S=0;S<l;S++){const E=(S-f)**2;for(let C=0;C<l;C++)u[S*l+C]=Math.exp((E+(C-f)**2)/d)}const m=new Float32Array(256),y=-2*o**2;for(let S=0;S<256;S++)m[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let E=0;E<e;E++){const C=S*e+E,T=t[C];let M=0,D=0;for(let F=0;F<l;F++){const B=S+F-f;if(!(B<0||B>=s))for(let P=0;P<l;P++){const H=E+P-f;if(H<0||H>=e)continue;const Z=t[B*e+H],J=u[F*l+P]*m[Math.abs(Z-T)];M+=Z*J,D+=J}}const k=A[C]=Math.round(M/D);w[k]++}return[A,w]}static#l(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e}static#d(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let a=-1/0,o=1/0;for(let u=0,d=s.length;u<d;u++){const f=s[u]=t[u<<2];a=Math.max(a,f),o=Math.min(o,f)}const l=255/(a-o);for(let u=0,d=s.length;u<d;u++)s[u]=(s[u]-o)*l;return s}static#h(t){let e,s=-1/0,a=-1/0;const o=t.findIndex(d=>d!==0);let l=o,u=o;for(e=o;e<256;e++){const d=t[e];d>s&&(e-l>a&&(a=e-l,u=e-1),s=d,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:s,height:a}=t,{maxDim:o}=this.#t;let l=s,u=a;if(s>o||a>o){let b=s,A=a,w=Math.log2(Math.max(s,a)/o);const S=Math.floor(w);w=w===S?S-1:S;for(let C=0;C<w;C++){l=Math.ceil(b/2),u=Math.ceil(A/2);const T=new OffscreenCanvas(l,u);T.getContext("2d").drawImage(t,0,0,b,A,0,0,l,u),b=l,A=u,t!==e&&t.close(),t=T.transferToImageBitmap()}const E=Math.min(o/l,o/u);l=Math.round(l*E),u=Math.round(u*E)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const m=f.getImageData(0,0,l,u).data;return[this.#d(m),l,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:a},o,l,u,d){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const y=200,b=m.font=`${s} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:E,fontBoundingBoxAscent:C,fontBoundingBoxDescent:T,width:M}=m.measureText(t),D=1.5,k=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,M)*D),F=Math.ceil(Math.max(Math.abs(S)+Math.abs(E)||y,Math.abs(C)+Math.abs(T)||y)*D);f=new OffscreenCanvas(k,F),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,k,F),m.fillStyle="black",m.fillText(t,k*(D-1)/2,F*(3-D)/2);const B=this.#d(m.getImageData(0,0,k,F).data),P=this.#l(B),H=this.#h(P),Z=this.#s(B,k,F,H);return this.processDrawnLines({lines:{curves:Z,width:k,height:F},pageWidth:o,pageHeight:l,rotation:u,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,s,a,o){const[l,u,d]=this.#f(t),[f,m]=this.#c(l,u,d,Math.hypot(u,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(m),b=this.#s(f,u,d,y);return this.processDrawnLines({lines:{curves:b,width:u,height:d},pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:o,mustSmooth:l,areContours:u}){a%180!==0&&([e,s]=[s,e]);const{curves:d,width:f,height:m}=t,y=t.thickness??0,b=[],A=Math.min(e/f,s/m),w=A/e,S=A/s,E=[];for(const{points:T}of d){const M=l?this.#o(T):T;if(!M)continue;E.push(M);const D=M.length,k=new Float32Array(D),F=new Float32Array(3*(D===2?2:D-2));if(b.push({line:F,points:k}),D===2){k[0]=M[0]*w,k[1]=M[1]*S,F.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[B,P,H,Z]=M;B*=w,P*=S,H*=w,Z*=S,k.set([B,P,H,Z],0),F.set([NaN,NaN,NaN,NaN,B,P],0);for(let J=4;J<D;J+=2){const ct=k[J]=M[J]*w,dt=k[J+1]=M[J+1]*S;F.set(nt.createBezierPoints(B,P,H,Z,ct,dt),(J-2)*3),[B,P,H,Z]=[H,Z,ct,dt]}}if(b.length===0)return null;const C=u?new Sd:new Ao;return C.build(b,e,s,1,a,u?0:y,o),{outline:C,newCurves:E,areContours:u,thickness:y,width:f,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:a,height:o}){let l=1/0,u=-1/0,d=0;for(const M of t){d+=M.length;for(let D=2,k=M.length;D<k;D++){const F=M[D]-M[D-2];l=Math.min(l,F),u=Math.max(u,F)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const m=t.length,y=tc+$r*m,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*m)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=a,b[A++]=o,b[A++]=e?0:1,b[A++]=Math.max(0,Math.floor(s??0)),b[A++]=m,b[A++]=f.BYTES_PER_ELEMENT;for(const M of t)b[A++]=M.length-2,b[A++]=M[0],b[A++]=M[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(b);const E=f.prototype.constructor;for(const M of t){const D=new E(M.length-2);for(let k=2,F=M.length;k<F;k++)D[k-2]=M[k]-M[k-2];S.write(D)}S.close();const C=await new Response(w.readable).arrayBuffer(),T=new Uint8Array(C);return V0(T)}static async decompressSignature(t){try{const e=iC(t),{readable:s,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const M of s)l||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),l.set(M,u),u+=M.length;const d=new Uint32Array(l.buffer,0,l.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=d[2],y=d[3],b=d[4]===0,A=d[5],w=d[6],S=d[7],E=[],C=(tc+$r*w)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(S){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(l.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(l.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(l.buffer,C);break}u=0;for(let M=0;M<w;M++){const D=d[$r*M+tc],k=new Float32Array(D+2);E.push(k);for(let F=0;F<$r-1;F++)k[F]=d[$r*M+tc+F+1];for(let F=0;F<D;F++)k[F+2]=k[F]+T[u++]}return{areContours:b,thickness:A,outlines:E,width:m,height:y}}catch(e){return St(`decompressSignature: ${e}`),null}}}class uf extends wv{constructor(){super(),super.updateProperties({fill:gt._defaultLineColor,"stroke-width":0})}clone(){const t=new uf;return t.updateAll(this),t}}class hf extends Ec{constructor(t){super(t),super.updateProperties({stroke:gt._defaultLineColor,"stroke-width":1})}clone(){const t=new hf(this._viewParameters);return t.updateAll(this),t}}class ti extends bt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=At.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){gt.initialize(t,e),this._defaultDrawingOptions=new uf,this._defaultDrawnSignatureOptions=new hf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return _t(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:l,description:u,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:m,pageHeight:y},rotation:b}=this.parent.viewport,A=Ms.processDrawnLines({lines:a,pageWidth:m,pageHeight:y,rotation:b,innerMargin:ti._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(A,f,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:s,width:a,height:o}=this.#i,l=Math.max(a,o),u=Ms.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,s,a){const{x:o,y:l}=this,{outline:u}=this.#i=t;this.#t=u instanceof Sd,this.description=s;let d;this.#t?d=ti.getDefaultDrawingOptions():(d=ti._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,f]=this.pageDimensions;let m=e/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return Ms.process(t,e,s,a,ti._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return Ms.extractContoursFromText(t,e,s,a,o,ti._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:s},rotation:a}=this.parent.viewport;return Ms.processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:a,innerMargin:ti._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=ti.getDefaultDrawingOptions():(this._drawingOptions=ti._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(o),t?(o.paths={lines:e,points:s},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,s,a,o,l){return l.areContours?Sd.deserialize(t,e,s,a,o,l):Ao.deserialize(t,e,s,a,o,l)}static async deserialize(t,e,s){const a=await super.deserialize(t,e,s);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class L_ extends gt{#t=null;#e=null;#i=null;#n=null;#r=null;#s="";#a=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=At.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){gt.initialize(t,e)}static isHandlingMimeForPasting(t){return uc.includes(t)}static paste(t,e){e.pasteEditor({mode:At.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:a,width:o,height:l,channels:a.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#n){const s=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(s).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(s).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=uc.join(",");const e=this._uiManager._signal;this.#i=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}s()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,a&&(this.#t=a),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#p(){const{div:t}=this;let{width:e,height:s}=this.#t;const[a,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*a,s=this.height*o;else if(e>l*a||s>l*o){const d=Math.min(l*a/e,l*o/s);e*=d,s*=d}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/a,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,s=!1){t||(t=224);const{width:a,height:o}=this.#t,l=new Hn;let u=this.#t,d=a,f=o,m=null;if(e){if(a>e||o>e){const F=Math.min(e/a,e/o);d=Math.floor(a*F),f=Math.floor(o*F)}m=document.createElement("canvas");const b=m.width=Math.ceil(d*l.sx),A=m.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(b,A));const w=m.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":rC.isDarkMode&&(S="#8f8f9d",E="#42414d");const C=15,T=C*l.sx,M=C*l.sy,D=new OffscreenCanvas(T*2,M*2),k=D.getContext("2d");k.fillStyle=S,k.fillRect(0,0,T*2,M*2),k.fillStyle=E,k.fillRect(0,0,T,M),k.fillRect(T,M,T,M),w.fillStyle=w.createPattern(D,"repeat"),w.fillRect(0,0,b,A),w.drawImage(u,0,0,u.width,u.height,0,0,b,A)}let y=null;if(s){let b,A;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,A=u.height;else if(u=this.#t,a>t||o>t){const E=Math.min(t/a,t/o);b=Math.floor(a*E),A=Math.floor(o*E),this.#l||(u=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:m,width:d,height:f,imageData:y}}#u(t,e){const{width:s,height:a}=this.#t;let o=s,l=a,u=this.#t;for(;o>2*t||l>2*e;){const d=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const m=new OffscreenCanvas(o,l);m.getContext("2d").drawImage(u,0,0,d,f,0,0,o,l),u=m.transferToImageBitmap()}return u}#m(){const[t,e]=this.parentDimensions,{width:s,height:a}=this,o=new Hn,l=Math.ceil(s*t*o.sx),u=Math.ceil(a*e*o.sy),d=this.#a;if(!d||d.width===l&&d.height===u)return;d.width=l,d.height=u;const f=this.#l?this.#t:this.#u(l,u),m=d.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,s]=this.pageDimensions,a=Math.round(this.width*e*Os.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Os.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(a,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,s){let a=null,o=!1;if(t instanceof xv){const{data:{rect:S,rotation:E,id:C,structParent:T,popupRef:M,richText:D,contentsObj:k,creationDate:F,modificationDate:B},container:P,parent:{page:{pageNumber:H}},canvas:Z}=t;let J,ct;Z?(delete t.canvas,{id:J,bitmap:ct}=s.imageManager.getFromCanvas(P.id,Z),Z.remove()):(o=!0,t._hasNoCanvas=!0);const dt=(await e._structTree.getAriaAttributes(`${Xd}${C}`))?.get("aria-label")||"";a=t={annotationType:At.STAMP,bitmapId:J,bitmap:ct,pageIndex:H-1,rect:S.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:dt},isSvg:!1,structParent:T,popupRef:M,richText:D,comment:k?.str||null,creationDate:F,modificationDate:B}}const l=await super.deserialize(t,e,s),{rect:u,bitmap:d,bitmapUrl:f,bitmapId:m,isSvg:y,accessibilityData:b}=t;o?(s.addMissingCanvas(t.id,l),l.#o=!0):m&&s.imageManager.isValidId(m)?(l.#e=m,d&&(l.#t=d)):l.#n=f,l.#l=y;const[A,w]=l.pageDimensions;return l.width=(u[2]-u[0])/A,l.height=(u[3]-u[1])/w,b&&(l.altTextData=b),l._initialData=a,t.comment&&l.setCommentData(t),l.#d=!!a,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(s),t)return s.bitmapUrl=this.#y(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(e===null)return s;e.stamps||=new Map;const l=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:s}),s.bitmap=this.#y(!1);else if(this.#l){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return s}#v(t){const{pageIndex:e,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class ni{#t;#e=!1;#i=null;#n=null;#r=null;#s=new Map;#a=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#p=-1;#u;static _initialized=!1;static#m=new Map([Re,cf,L_,pe,ti].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:a,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:d,viewport:f,l10n:m}){const y=[...ni.#m.values()];if(!ni._initialized){ni._initialized=!0;for(const b of y)b.initialize(m,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=s,this.#t=o,this.#i=l,this.viewport=f,this.#h=d,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===At.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case At.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===At.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const s of ni.#m.values())e.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.div.classList.toggle("disabled",!t)}get#y(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const s of this.#y)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=this.#i;if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const s=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:u,timeStamp:d}=a,f=this.#p;if(d-f>500){this.#p=d;return}this.#p=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const y=document.elementsFromPoint(l,u);if(m.toggle("getElements",!1),!this.div.contains(y[0]))return;let b;const A=new RegExp(`^${io}[0-9]+$`);for(const S of y)if(A.test(S.id)){b=S.id;break}if(!b)return;const w=this.#s.get(b);w?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),w.dblclick(a))},{signal:s,capture:!0})}const t=this.#i;if(t){const s=new Map,a=new Map;for(const l of this.#y){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(t);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const o=t.getEditableAnnotations();for(const l of o){const{id:u}=l.data;if(this.#u.isDeletedAnnotationElement(u)){l.updateEdited({deleted:!0});continue}let d=a.get(u);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=s.get(u),d&&(this.#u.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:e}=this.div;for(const s of ni.#m.values())e.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:s}=De.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),pe.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),gt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getEditorByUID(t){for(const e of this.#s.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return ni.#m.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#C(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:a}=this.#w(),o=this.getNextId(),l=this.#C({parent:this,id:o,x:s,y:a,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await ni.#m.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,s={}){const a=this.getNextId(),o=this.#C({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:e,width:s,height:a}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+s),d=Math.min(window.innerHeight,e+a),f=(o+u)/2-t,m=(l+d)/2-e,[y,b]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=De.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#a||(this.#a=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===At.STAMP||s===At.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===At.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:e}=De.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#a=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,s){const a=this.#u.findParent(e,s);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,rs(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,rs(this.div,{rotation:s}),e!==s)for(const a of this.#s.values())a.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ne{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return _t(this,"_svgFactory",new lo)}static#r(t,[e,s,a,o]){const{style:l}=t;l.top=`${100*s}%`,l.left=`${100*e}%`,l.width=`${100*a}%`,l.height=`${100*o}%`}#s(){const t=Ne._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,e){const s=Ne._svgFactory.createElement("clipPath");t.append(s);const a=`clip_${e}`;s.setAttribute("id",a),s.setAttribute("clipPathUnits","objectBoundingBox");const o=Ne._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),a}#o(t,e){for(const[s,a]of Object.entries(e))a===null?t.removeAttribute(s):t.setAttribute(s,a)}draw(t,e=!1,s=!1){const a=Ne.#n++,o=this.#s(),l=Ne._svgFactory.createElement("defs");o.append(l);const u=Ne._svgFactory.createElement("path");l.append(u);const d=`path_p${this.pageIndex}_${a}`;u.setAttribute("id",d),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,u);const f=s?this.#a(l,d):null,m=Ne._svgFactory.createElement("use");return o.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(o,t),this.#e.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const s=Ne.#n++,a=this.#s(),o=Ne._svgFactory.createElement("defs");a.append(o);const l=Ne._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Ne._svgFactory.createElement("mask");o.append(y),d=`mask_p${this.pageIndex}_${s}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Ne._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Ne._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Ne._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),d&&f.setAttribute("mask",`url(#${d})`);const m=f.cloneNode();return a.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(s,a),s}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:s,bbox:a,rootClass:o,path:l}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#o(u,s),a&&Ne.#r(u,a),o){const{classList:d}=u;for(const[f,m]of Object.entries(o))d.toggle(f,m)}if(l){const f=u.firstChild.firstChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const s=this.#e.get(t);s&&(e.#t.append(s),this.#e.delete(t),e.#e.set(t,s))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:xd};globalThis.pdfjsLib={AbortException:_i,AnnotationEditorLayer:ni,AnnotationEditorParamsType:Lt,AnnotationEditorType:At,AnnotationEditorUIManager:Ti,AnnotationLayer:lf,AnnotationMode:ii,AnnotationType:fe,applyOpacity:K0,build:mv,ColorPicker:yn,createValidAbsoluteUrl:Gd,CSSConstants:$0,DOMSVGFactory:lo,DrawLayer:Ne,FeatureTest:De,fetchData:Ya,findContrastColor:W0,getDocument:ef,getFilenameFromUrl:q0,getPdfFilenameFromUrl:X0,getRGB:$a,getUuid:qd,getXfaPageViewport:Y0,GlobalWorkerOptions:as,ImageKind:Jr,InvalidPDFException:lc,isDataScheme:yo,isPdfFile:Sc,isValidExplicitDest:tv,MathClamp:Ue,noContextMenu:vn,normalizeUnicode:G0,OPS:Ua,OutputScale:Hn,PasswordResponses:U0,PDFDataRangeTransport:sf,PDFDateString:cc,PDFWorker:Ha,PermissionFlag:I0,PixelsPerInch:Os,RenderingCancelledException:Ac,renderRichText:$d,ResponseException:so,setLayerDimensions:rs,shadow:_t,SignatureExtractor:Ms,stopEvent:re,SupportedImageMimeTypes:uc,TextLayer:ro,TouchManager:vo,updateUrlHash:Vd,Util:it,VerbosityLevel:po,version:af,XfaLayer:Yd};const O_=Object.freeze(Object.defineProperty({__proto__:null,AbortException:_i,AnnotationEditorLayer:ni,AnnotationEditorParamsType:Lt,AnnotationEditorType:At,AnnotationEditorUIManager:Ti,AnnotationLayer:lf,AnnotationMode:ii,AnnotationType:fe,CSSConstants:$0,ColorPicker:yn,DOMSVGFactory:lo,DrawLayer:Ne,FeatureTest:De,GlobalWorkerOptions:as,ImageKind:Jr,InvalidPDFException:lc,MathClamp:Ue,OPS:Ua,OutputScale:Hn,PDFDataRangeTransport:sf,PDFDateString:cc,PDFWorker:Ha,PasswordResponses:U0,PermissionFlag:I0,PixelsPerInch:Os,RenderingCancelledException:Ac,ResponseException:so,SignatureExtractor:Ms,SupportedImageMimeTypes:uc,TextLayer:ro,TouchManager:vo,Util:it,VerbosityLevel:po,XfaLayer:Yd,applyOpacity:K0,build:mv,createValidAbsoluteUrl:Gd,fetchData:Ya,findContrastColor:W0,getDocument:ef,getFilenameFromUrl:q0,getPdfFilenameFromUrl:X0,getRGB:$a,getUuid:qd,getXfaPageViewport:Y0,isDataScheme:yo,isPdfFile:Sc,isValidExplicitDest:tv,noContextMenu:vn,normalizeUnicode:G0,renderRichText:$d,setLayerDimensions:rs,shadow:_t,stopEvent:re,updateUrlHash:Vd,version:af},Symbol.toStringTag,{value:"Module"}));var cb=Object.prototype.hasOwnProperty;function ub(h,t,e){for(e of h.keys())if(Ba(e,t))return e}function Ba(h,t){var e,s,a;if(h===t)return!0;if(h&&t&&(e=h.constructor)===t.constructor){if(e===Date)return h.getTime()===t.getTime();if(e===RegExp)return h.toString()===t.toString();if(e===Array){if((s=h.length)===t.length)for(;s--&&Ba(h[s],t[s]););return s===-1}if(e===Set){if(h.size!==t.size)return!1;for(s of h)if(a=s,a&&typeof a=="object"&&(a=ub(t,a),!a)||!t.has(a))return!1;return!0}if(e===Map){if(h.size!==t.size)return!1;for(s of h)if(a=s[0],a&&typeof a=="object"&&(a=ub(t,a),!a)||!Ba(s[1],t.get(a)))return!1;return!0}if(e===ArrayBuffer)h=new Uint8Array(h),t=new Uint8Array(t);else if(e===DataView){if((s=h.byteLength)===t.byteLength)for(;s--&&h.getInt8(s)===t.getInt8(s););return s===-1}if(ArrayBuffer.isView(h)){if((s=h.byteLength)===t.byteLength)for(;s--&&h[s]===t[s];);return s===-1}if(!e||typeof h=="object"){s=0;for(e in h)if(cb.call(h,e)&&++s&&!cb.call(t,e)||!(e in t)||!Ba(h[e],t[e]))return!1;return Object.keys(t).length===s}}return h!==h&&t!==t}function So(h){let t=!1;return{promise:new Promise((s,a)=>{h.then(o=>!t&&s(o)).catch(o=>!t&&a(o))}),cancel(){t=!0}}}const P_=["onCopy","onCut","onPaste"],j_=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],B_=["onFocus","onBlur"],F_=["onInput","onInvalid","onReset","onSubmit"],z_=["onLoad","onError"],I_=["onKeyDown","onKeyPress","onKeyUp"],U_=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],H_=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],G_=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],V_=["onSelect"],q_=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],X_=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Y_=["onScroll"],$_=["onWheel"],K_=["onAnimationStart","onAnimationEnd","onAnimationIteration"],W_=["onTransitionEnd"],Q_=["onToggle"],Z_=["onChange"],J_=[...P_,...j_,...B_,...F_,...z_,...I_,...U_,...H_,...G_,...V_,...q_,...X_,...Y_,...$_,...K_,...W_,...Z_,...Q_];function Ev(h,t){const e={};for(const s of J_){const a=h[s];a&&(t?e[s]=(o=>a(o,t(s))):e[s]=a)}return e}var t2="Invariant failed";function Qt(h,t){if(!h)throw new Error(t2)}var od,hb;function e2(){if(hb)return od;hb=1;var h=function(){};return od=h,od}var n2=e2();const Ge=vb(n2),Cv=R.createContext(null),i2="noopener noreferrer nofollow";class s2{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Qt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){Qt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}addLinkAttributes(t,e,s){t.href=e,t.rel=this.externalLinkRel||i2,t.target=s?"_blank":this.externalLinkTarget||""}goToDestination(t){return new Promise(e=>{Qt(this.pdfDocument),Qt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{Qt(Array.isArray(e));const s=e[0];new Promise(a=>{Qt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{a(o)}).catch(()=>{Qt(!1)}):typeof s=="number"?a(s):Qt(!1)}).then(a=>{const o=a+1;Qt(this.pdfViewer),Qt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:a,pageNumber:o})})})}goToPage(t){const e=t-1;Qt(this.pdfViewer),Qt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(t){this.goToDestination(t)}}function Fa({children:h,type:t}){return v.jsx("div",{className:`react-pdf__message react-pdf__message--${t}`,children:h})}const db={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function a2(h,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return h}}function Ga(){return R.useReducer(a2,{value:void 0,error:void 0})}const Cc=typeof window<"u",_v=Cc&&window.location.protocol==="file:";function r2(h){return typeof h<"u"}function Ts(h){return r2(h)&&h!==null}function o2(h){return typeof h=="string"}function l2(h){return h instanceof ArrayBuffer}function c2(h){return Qt(Cc),h instanceof Blob}function wd(h){return o2(h)&&/^data:/.test(h)}function fb(h){Qt(wd(h));const[t="",e=""]=h.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function u2(){return Cc&&window.devicePixelRatio||1}const Tv="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function pb(){Ge(!_v,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Tv}`)}function h2(){Ge(!_v,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Tv}`)}function js(h){h?.cancel&&h.cancel()}function Ed(h,t){return Object.defineProperty(h,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(h,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(h,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(h,"originalHeight",{get(){return this.view[3]},configurable:!0}),h}function d2(h){return h.name==="RenderingCancelledException"}function f2(h){return new Promise((t,e)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return e(new Error("Error while reading a file."));t(s.result)},s.onerror=a=>{if(!a.target)return e(new Error("Error while reading a file."));const{error:o}=a.target;if(!o)return e(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},s.readAsArrayBuffer(h)})}const{PDFDataRangeTransport:p2}=O_,m2=(h,t)=>{switch(t){case db.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");h(e);break}case db.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");h(e);break}}};function mb(h){return typeof h=="object"&&h!==null&&("data"in h||"range"in h||"url"in h)}const g2=R.forwardRef(function({children:t,className:e,error:s="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:u,imageResourcesPath:d,loading:f="Loading PDF",noData:m="No PDF file specified.",onItemClick:y,onLoadError:b,onLoadProgress:A,onLoadSuccess:w,onPassword:S=m2,onSourceError:E,onSourceSuccess:C,options:T,renderMode:M,rotate:D,scale:k,...F},B){const[P,H]=Ga(),{value:Z,error:J}=P,[ct,dt]=Ga(),{value:at,error:ht}=ct,L=R.useRef(new s2),V=R.useRef([]),Y=R.useRef(void 0),pt=R.useRef(void 0);l&&l!==Y.current&&mb(l)&&(Ge(!Ba(l,Y.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Y.current=l),T&&T!==pt.current&&(Ge(!Ba(T,pt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),pt.current=T);const vt=R.useRef({scrollPageIntoView:Bt=>{const{dest:Ft,pageNumber:se,pageIndex:le=se-1}=Bt;if(y){y({dest:Ft,pageIndex:le,pageNumber:se});return}const Mi=V.current[le];if(Mi){Mi.scrollIntoView();return}Ge(!1,`An internal link leading to page ${se} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});R.useImperativeHandle(B,()=>({linkService:L,pages:V,viewer:vt}),[]);function O(){C&&C()}function q(){J&&(Ge(!1,J.toString()),E&&E(J))}function K(){H({type:"RESET"})}R.useEffect(K,[l,H]);const tt=R.useCallback(async()=>{if(!l)return null;if(typeof l=="string")return wd(l)?{data:fb(l)}:(pb(),{url:l});if(l instanceof p2)return{range:l};if(l2(l))return{data:l};if(Cc&&c2(l))return{data:await f2(l)};if(Qt(typeof l=="object"),Qt(mb(l)),"url"in l&&typeof l.url=="string"){if(wd(l.url)){const{url:Bt,...Ft}=l;return{data:fb(Bt),...Ft}}pb()}return l},[l]);R.useEffect(()=>{const Bt=So(tt());return Bt.promise.then(Ft=>{H({type:"RESOLVE",value:Ft})}).catch(Ft=>{H({type:"REJECT",error:Ft})}),()=>{js(Bt)}},[tt,H]),R.useEffect(()=>{if(!(typeof Z>"u")){if(Z===!1){q();return}O()}},[Z]);function lt(){at&&(w&&w(at),V.current=new Array(at.numPages),L.current.setDocument(at))}function ft(){ht&&(Ge(!1,ht.toString()),b&&b(ht))}R.useEffect(function(){dt({type:"RESET"})},[dt,Z]),R.useEffect(function(){if(!Z)return;const Ft=T?{...Z,...T}:Z,se=ef(Ft);A&&(se.onProgress=A),S&&(se.onPassword=S);const le=se,Mi=le.promise.then(Ri=>{dt({type:"RESOLVE",value:Ri})}).catch(Ri=>{le.destroyed||dt({type:"REJECT",error:Ri})});return()=>{Mi.finally(()=>le.destroy())}},[T,dt,Z]),R.useEffect(()=>{if(!(typeof at>"u")){if(at===!1){ft();return}lt()}},[at]),R.useEffect(function(){L.current.setViewer(vt.current),L.current.setExternalLinkRel(a),L.current.setExternalLinkTarget(o)},[a,o]);const et=R.useCallback((Bt,Ft)=>{V.current[Bt]=Ft},[]),Gt=R.useCallback(Bt=>{delete V.current[Bt]},[]),wt=R.useMemo(()=>({imageResourcesPath:d,linkService:L.current,onItemClick:y,pdf:at,registerPage:et,renderMode:M,rotate:D,scale:k,unregisterPage:Gt}),[d,y,at,et,M,D,k,Gt]),jt=R.useMemo(()=>Ev(F,()=>at),[F,at]);function Ce(){function Bt(se){return!!se?.pdf}if(!Bt(wt))throw new Error("pdf is undefined");const Ft=typeof t=="function"?t(wt):t;return v.jsx(Cv.Provider,{value:wt,children:Ft})}function _e(){return l?at==null?v.jsx(Fa,{type:"loading",children:typeof f=="function"?f():f}):at===!1?v.jsx(Fa,{type:"error",children:typeof s=="function"?s():s}):Ce():v.jsx(Fa,{type:"no-data",children:typeof m=="function"?m():m})}return v.jsx("div",{className:Va("react-pdf__Document",e),ref:u,...jt,children:_e()})});function Mv(){return R.useContext(Cv)}function Rv(){for(var h=[],t=0;t<arguments.length;t++)h[t]=arguments[t];var e=h.filter(Boolean);if(e.length<=1){var s=e[0];return s||null}return function(o){for(var l=0,u=e;l<u.length;l++){var d=u[l];typeof d=="function"?d(o):d&&(d.current=o)}}}const Nv=R.createContext(null);function _c(){return R.useContext(Nv)}function y2(){const h=Mv(),t=_c();Qt(t);const e={...h,...t},{imageResourcesPath:s,linkService:a,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:u,onRenderAnnotationLayerSuccess:d,page:f,pdf:m,renderForms:y,rotate:b,scale:A=1}=e;Qt(m),Qt(f),Qt(a);const[w,S]=Ga(),{value:E,error:C}=w,T=R.useRef(null);Ge(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function M(){E&&l&&l(E)}function D(){C&&(Ge(!1,C.toString()),o&&o(C))}R.useEffect(function(){S({type:"RESET"})},[S,f]),R.useEffect(function(){if(!f)return;const H=So(f.getAnnotations()),Z=H;return H.promise.then(J=>{S({type:"RESOLVE",value:J})}).catch(J=>{S({type:"REJECT",error:J})}),()=>{js(Z)}},[S,f]),R.useEffect(()=>{if(E!==void 0){if(E===!1){D();return}M()}},[E]);function k(){d&&d()}function F(P){Ge(!1,`${P}`),u&&u(P)}const B=R.useMemo(()=>f.getViewport({scale:A,rotation:b}),[f,b,A]);return R.useEffect(function(){if(!m||!f||!a||!E)return;const{current:H}=T;if(!H)return;const Z=B.clone({dontFlip:!0}),J={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:m.annotationStorage,commentManager:null,div:H,l10n:null,linkService:a,page:f,structTreeLayer:null,viewport:Z},ct={annotations:E,annotationStorage:m.annotationStorage,div:H,imageResourcesPath:s,linkService:a,page:f,renderForms:y,viewport:Z};H.innerHTML="";try{new lf(J).render(ct),k()}catch(dt){F(dt)}return()=>{}},[E,s,a,f,m,y,B]),v.jsx("div",{className:Va("react-pdf__Page__annotations","annotationLayer"),ref:T})}const Dv={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},b2=/^H(\d+)$/;function v2(h){return h in Dv}function Tc(h){return"children"in h}function kv(h){return Tc(h)?h.children.length===1&&0 in h.children&&"id"in h.children[0]:!1}function x2(h){const t={};if(Tc(h)){const{role:e}=h,s=e.match(b2);if(s)t.role="heading",t["aria-level"]=Number(s[1]);else if(v2(e)){const a=Dv[e];a&&(t.role=a)}}return t}function Lv(h){const t={};if(Tc(h)){if(h.alt!==void 0&&(t["aria-label"]=h.alt),h.lang!==void 0&&(t.lang=h.lang),kv(h)){const[e]=h.children;if(e){const s=Lv(e);return{...t,...s}}}}else"id"in h&&(t["aria-owns"]=h.id);return t}function A2(h){return h?{...x2(h),...Lv(h)}:null}function Ov({className:h,node:t}){const e=R.useMemo(()=>A2(t),[t]),s=R.useMemo(()=>!Tc(t)||kv(t)?null:t.children.map((a,o)=>v.jsx(Ov,{node:a},o)),[t]);return v.jsx("span",{className:h,...e,children:s})}function S2(){const h=_c();Qt(h);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=h,[s,a]=Ga(),{value:o,error:l}=s,{customTextRenderer:u,page:d}=h;function f(){o&&e&&e(o)}function m(){l&&(Ge(!1,l.toString()),t&&t(l))}return R.useEffect(function(){a({type:"RESET"})},[a,d]),R.useEffect(function(){if(u||!d)return;const b=So(d.getStructTree()),A=b;return b.promise.then(w=>{a({type:"RESOLVE",value:w})}).catch(w=>{a({type:"REJECT",error:w})}),()=>js(A)},[u,d,a]),R.useEffect(()=>{if(o!==void 0){if(o===!1){m();return}f()}},[o]),o?v.jsx(Ov,{className:"react-pdf__Page__structTree structTree",node:o}):null}const gb=ii;function w2(h){const t=_c();Qt(t);const e={...t,...h},{_className:s,canvasBackground:a,devicePixelRatio:o=u2(),onRenderError:l,onRenderSuccess:u,page:d,renderForms:f,renderTextLayer:m,rotate:y,scale:b}=e,{canvasRef:A}=h;Qt(d);const w=R.useRef(null);function S(){d&&u&&u(Ed(d,b))}function E(D){d2(D)||(Ge(!1,D.toString()),l&&l(D))}const C=R.useMemo(()=>d.getViewport({scale:b*o,rotation:y}),[o,d,y,b]),T=R.useMemo(()=>d.getViewport({scale:b,rotation:y}),[d,y,b]);R.useEffect(function(){if(!d)return;d.cleanup();const{current:k}=w;if(!k)return;k.width=C.width,k.height=C.height,k.style.width=`${Math.floor(T.width)}px`,k.style.height=`${Math.floor(T.height)}px`,k.style.visibility="hidden";const F={annotationMode:f?gb.ENABLE_FORMS:gb.ENABLE,canvas:k,canvasContext:k.getContext("2d",{alpha:!1}),viewport:C};a&&(F.background=a);const B=d.render(F),P=B;return B.promise.then(()=>{k.style.visibility="",S()}).catch(E),()=>js(P)},[a,d,f,C,T]);const M=R.useCallback(()=>{const{current:D}=w;D&&(D.width=0,D.height=0)},[]);return R.useEffect(()=>M,[M]),v.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:Rv(A,w),style:{display:"block",userSelect:"none"},children:m?v.jsx(S2,{}):null})}function E2(h){return"str"in h}function C2(){const h=_c();Qt(h);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:s,onRenderTextLayerError:a,onRenderTextLayerSuccess:o,page:l,pageIndex:u,pageNumber:d,rotate:f,scale:m}=h;Qt(l);const[y,b]=Ga(),{value:A,error:w}=y,S=R.useRef(null);Ge(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){A&&s&&s(A)}function C(){w&&(Ge(!1,w.toString()),e&&e(w))}R.useEffect(function(){b({type:"RESET"})},[l,b]),R.useEffect(function(){if(!l)return;const P=So(l.getTextContent()),H=P;return P.promise.then(Z=>{b({type:"RESOLVE",value:Z})}).catch(Z=>{b({type:"REJECT",error:Z})}),()=>js(H)},[l,b]),R.useEffect(()=>{if(A!==void 0){if(A===!1){C();return}E()}},[A]);const T=R.useCallback(()=>{o&&o()},[o]),M=R.useCallback(B=>{Ge(!1,B.toString()),a&&a(B)},[a]);function D(){const B=S.current;B&&B.classList.add("selecting")}function k(){const B=S.current;B&&B.classList.remove("selecting")}const F=R.useMemo(()=>l.getViewport({scale:m,rotation:f}),[l,f,m]);return R.useLayoutEffect(function(){if(!l||!A)return;const{current:P}=S;if(!P)return;P.innerHTML="";const H=l.streamTextContent({includeMarkedContent:!0}),Z={container:P,textContentSource:H,viewport:F},J=new ro(Z),ct=J;return J.render().then(()=>{const dt=document.createElement("div");dt.className="endOfContent",P.append(dt);const at=P.querySelectorAll('[role="presentation"]');if(t){let ht=0;A.items.forEach((L,V)=>{if(!E2(L))return;const Y=at[ht];if(!Y)return;const pt=t({pageIndex:u,pageNumber:d,itemIndex:V,...L});Y.innerHTML=pt,ht+=L.str&&L.hasEOL?2:1})}T()}).catch(M),()=>js(ct)},[t,M,T,l,u,d,A,F]),v.jsx("div",{className:Va("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:D,ref:S})}const yb=1;function _2(h){const e={...Mv(),...h},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:a=!0,canvasBackground:o,canvasRef:l,children:u,className:d,customRenderer:f,customTextRenderer:m,devicePixelRatio:y,error:b="Failed to load the page.",height:A,inputRef:w,loading:S="Loading page",noData:E="No page specified.",onGetAnnotationsError:C,onGetAnnotationsSuccess:T,onGetStructTreeError:M,onGetStructTreeSuccess:D,onGetTextError:k,onGetTextSuccess:F,onLoadError:B,onLoadSuccess:P,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:Z,onRenderError:J,onRenderSuccess:ct,onRenderTextLayerError:dt,onRenderTextLayerSuccess:at,pageIndex:ht,pageNumber:L,pdf:V,registerPage:Y,renderAnnotationLayer:pt=!0,renderForms:vt=!1,renderMode:O="canvas",renderTextLayer:q=!0,rotate:K,scale:tt=yb,unregisterPage:lt,width:ft,...et}=e,[Gt,wt]=Ga(),{value:jt,error:Ce}=Gt,_e=R.useRef(null);Qt(V);const Bt=Ts(L)?L-1:ht??null,Ft=L??(Ts(ht)?ht+1:null),se=K??(jt?jt.rotate:null),le=R.useMemo(()=>{if(!jt)return null;let Ln=1;const On=tt??yb;if(ft||A){const qn=jt.getViewport({scale:1,rotation:se});ft?Ln=ft/qn.width:A&&(Ln=A/qn.height)}return On*Ln},[A,jt,se,tt,ft]);R.useEffect(function(){return()=>{Ts(Bt)&&a&&lt&&lt(Bt)}},[a,V,Bt,lt]);function Mi(){if(P){if(!jt||!le)return;P(Ed(jt,le))}if(a&&Y){if(!Ts(Bt)||!_e.current)return;Y(Bt,_e.current)}}function Ri(){Ce&&(Ge(!1,Ce.toString()),B&&B(Ce))}R.useEffect(function(){wt({type:"RESET"})},[wt,V,Bt]),R.useEffect(function(){if(!V||!Ft)return;const On=So(V.getPage(Ft)),qn=On;return On.promise.then(zs=>{wt({type:"RESOLVE",value:zs})}).catch(zs=>{wt({type:"REJECT",error:zs})}),()=>js(qn)},[wt,V,Ft]),R.useEffect(()=>{if(jt!==void 0){if(jt===!1){Ri();return}Mi()}},[jt,le]);const os=R.useMemo(()=>Ts(Bt)&&Ft&&Ts(se)&&Ts(le)?{_className:s,canvasBackground:o,customTextRenderer:m,devicePixelRatio:y,onGetAnnotationsError:C,onGetAnnotationsSuccess:T,onGetStructTreeError:M,onGetStructTreeSuccess:D,onGetTextError:k,onGetTextSuccess:F,onRenderAnnotationLayerError:H,onRenderAnnotationLayerSuccess:Z,onRenderError:J,onRenderSuccess:ct,onRenderTextLayerError:dt,onRenderTextLayerSuccess:at,page:jt,pageIndex:Bt,pageNumber:Ft,renderForms:vt,renderTextLayer:q,rotate:se,scale:le}:null,[s,o,m,y,C,T,M,D,k,F,H,Z,J,ct,dt,at,jt,Bt,Ft,vt,q,se,le]),Ka=R.useMemo(()=>Ev(et,()=>jt&&(le?Ed(jt,le):void 0)),[et,jt,le]),Ni=`${Bt}@${le}/${se}`;function Mc(){switch(O){case"custom":return Qt(f),v.jsx(f,{},`${Ni}_custom`);case"none":return null;case"canvas":default:return v.jsx(w2,{canvasRef:l},`${Ni}_canvas`)}}function Rc(){return q?v.jsx(C2,{},`${Ni}_text`):null}function Ve(){return pt?v.jsx(y2,{},`${Ni}_annotations`):null}function Nc(){function Ln(qn){return!!qn?.page}if(!Ln(os))throw new Error("page is undefined");const On=typeof u=="function"?u(os):u;return v.jsxs(Nv.Provider,{value:os,children:[Mc(),Rc(),Ve(),On]})}function wo(){return Ft?V===null||jt===void 0||jt===null?v.jsx(Fa,{type:"loading",children:typeof S=="function"?S():S}):V===!1||jt===!1?v.jsx(Fa,{type:"error",children:typeof b=="function"?b():b}):Nc():v.jsx(Fa,{type:"no-data",children:typeof E=="function"?E():E})}return v.jsx("div",{className:Va(s,d),"data-page-number":Ft,ref:Rv(w,_e),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${le}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ka,children:wo()})}h2();as.workerSrc="pdf.worker.mjs";as.workerSrc=`//unpkg.com/pdfjs-dist@${af}/build/pdf.worker.min.mjs`;function T2({filename:h,initialPage:t=1,onClose:e}){const[s,a]=R.useState(null),[o,l]=R.useState(0),[u,d]=R.useState(t),[f,m]=R.useState(1),[y,b]=R.useState(!0),[A,w]=R.useState(null),[S,E]=R.useState(!1),C=R.useMemo(()=>s?{data:s}:null,[s]);R.useEffect(()=>{let H=!0;async function Z(){try{b(!0),w(null);const J=await qE(h);H&&a(new Uint8Array(J))}catch(J){H&&w(J instanceof Error?J.message:"Failed to load PDF")}finally{H&&b(!1)}}return Z(),()=>{H=!1}},[h]),R.useEffect(()=>{d(t)},[t]);const T=R.useCallback(({numPages:H})=>{l(H),t>H&&d(1)},[t]),M=()=>d(H=>Math.max(1,H-1)),D=()=>d(H=>Math.min(o,H+1)),k=()=>m(H=>Math.min(3,H+.2)),F=()=>m(H=>Math.max(.5,H-.2)),B=()=>{window.open(`/pdfs/${encodeURIComponent(h)}`,"_blank")},P=()=>{E(!S)};return R.useEffect(()=>{const H=Z=>{Z.key==="Escape"&&e(),Z.key==="ArrowLeft"&&d(J=>Math.max(1,J-1)),Z.key==="ArrowRight"&&d(J=>Math.min(o,J+1)),(Z.key==="+"||Z.key==="=")&&m(J=>Math.min(3,J+.2)),Z.key==="-"&&m(J=>Math.max(.5,J-.2))};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[o,e]),v.jsxs("div",{className:"fixed inset-0 z-50 bg-background/95 backdrop-blur-sm flex flex-col",children:[v.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-border bg-card/50",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("h2",{className:"font-medium text-sm truncate max-w-[300px]",title:h,children:h}),o>0&&v.jsxs("span",{className:"text-xs text-muted-foreground",children:["Page ",u," of ",o]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("div",{className:"flex items-center gap-1 mr-2",children:[v.jsx(Ut,{variant:"ghost",size:"sm",onClick:M,disabled:u<=1,children:v.jsx(Md,{className:"h-4 w-4"})}),v.jsx("input",{type:"number",value:u,onChange:H=>{const Z=parseInt(H.target.value);Z>=1&&Z<=o&&d(Z)},className:"w-12 text-center text-sm bg-accent border border-border rounded px-2 py-1",min:1,max:o}),v.jsx(Ut,{variant:"ghost",size:"sm",onClick:D,disabled:u>=o,children:v.jsx(Td,{className:"h-4 w-4"})})]}),v.jsxs("div",{className:"flex items-center gap-1 border-l border-border pl-2",children:[v.jsx(Ut,{variant:"ghost",size:"sm",onClick:F,children:v.jsx(xS,{className:"h-4 w-4"})}),v.jsxs("span",{className:"text-xs w-12 text-center",children:[Math.round(f*100),"%"]}),v.jsx(Ut,{variant:"ghost",size:"sm",onClick:k,children:v.jsx(gS,{className:"h-4 w-4"})})]}),v.jsxs("div",{className:"flex items-center gap-1 border-l border-border pl-2",children:[v.jsx(Ut,{variant:"ghost",size:"sm",onClick:P,children:S?v.jsx(YA,{className:"h-4 w-4"}):v.jsx(qA,{className:"h-4 w-4"})}),v.jsx(Ut,{variant:"ghost",size:"sm",onClick:B,children:v.jsx(Rd,{className:"h-4 w-4"})}),v.jsx(Ut,{variant:"ghost",size:"sm",onClick:e,children:v.jsx(pS,{className:"h-4 w-4"})})]})]})]}),v.jsxs("div",{className:"flex-1 overflow-auto flex justify-center py-4 bg-zinc-900",children:[y&&v.jsxs("div",{className:"flex items-center justify-center h-full",children:[v.jsx(ic,{className:"h-8 w-8 animate-spin text-primary"}),v.jsx("span",{className:"ml-2",children:"Loading PDF..."})]}),A&&v.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-destructive",children:[v.jsx("p",{className:"text-lg font-medium",children:"Error loading PDF"}),v.jsx("p",{className:"text-sm text-muted-foreground",children:A}),v.jsx(Ut,{className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]}),s&&!y&&!A&&C&&v.jsx(g2,{file:C,onLoadSuccess:T,loading:v.jsx("div",{className:"flex items-center",children:v.jsx(ic,{className:"h-6 w-6 animate-spin text-primary"})}),error:v.jsx("div",{className:"text-destructive",children:"Failed to render PDF"}),children:v.jsx(_2,{pageNumber:u,scale:f,className:"shadow-2xl",renderTextLayer:!0,renderAnnotationLayer:!0})})]}),v.jsxs("div",{className:"px-4 py-2 border-t border-border bg-card/50 text-xs text-muted-foreground text-center",children:[v.jsx("span",{className:"mr-4",children:"  Navigate pages"}),v.jsx("span",{className:"mr-4",children:"+ - Zoom"}),v.jsx("span",{children:"Esc Close"})]})]})}function M2({onComplete:h}){const[t,e]=R.useState([]),[s,a]=R.useState(!0),[o,l]=R.useState(!1),[u,d]=R.useState(""),[f,m]=R.useState(0),[y,b]=R.useState(0),[A,w]=R.useState(0),[S,E]=R.useState([]),[C,T]=R.useState(!1),M=67.5*1024*1024;R.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}),[]),R.useEffect(()=>{(async()=>{a(!0);const F=await zn.getAllCached(),P=ss.map(H=>H.file).filter(H=>!F.includes(H));e(P.map(H=>({filename:H,estimatedSize:0}))),a(!1),P.length===0&&T(!0)})()},[]);const D=async()=>{l(!0),E([]),w(0);const k=[];let F=0;for(let B=0;B<t.length;B++){const P=t[B];d(P.filename),m(B/t.length*100);try{const H=await fetch(`/pdfs/${encodeURIComponent(P.filename)}`);if(!H.ok)throw new Error(`HTTP ${H.status}`);const Z=await H.arrayBuffer();await zn.set(P.filename,Z),F+=Z.byteLength,w(F),b(B+1)}catch{k.push(P.filename)}m((B+1)/t.length*100)}E(k),l(!1),T(!0)};return v.jsxs("div",{className:"fixed inset-0 z-100 bg-background flex flex-col overflow-hidden",children:[v.jsx("header",{className:"flex items-center justify-center p-6 border-b border-border bg-card",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Sb,{className:"h-10 w-10 text-primary"}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-2xl font-bold",children:"P1100 Study App"}),v.jsx("p",{className:"text-sm text-muted-foreground",children:"Classical Mechanics"})]})]})}),v.jsx("main",{className:"flex-1 overflow-auto",children:v.jsx("div",{className:"min-h-full flex items-center justify-center p-6",children:v.jsx("div",{className:"max-w-xl w-full my-auto",children:s?v.jsxs("div",{className:"text-center py-12",children:[v.jsx(ic,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),v.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Preparing your study materials..."}),v.jsx("p",{className:"text-muted-foreground",children:"Checking which files need to be downloaded"})]}):C?v.jsx("div",{className:"text-center py-12 space-y-6",children:S.length===0?v.jsxs(v.Fragment,{children:[v.jsx(wb,{className:"h-20 w-20 text-green-500 mx-auto"}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold mb-2",children:"You're All Set!"}),v.jsxs("p",{className:"text-muted-foreground",children:["All ",t.length>0?t.length:ss.length," PDFs are ready for offline access."]}),A>0&&v.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Downloaded ",La(A)]})]}),v.jsx(Ut,{size:"lg",onClick:h,className:"mt-4",children:"Start Studying"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Eb,{className:"h-20 w-20 text-yellow-500 mx-auto"}),v.jsxs("div",{children:[v.jsxs("h2",{className:"text-2xl font-bold mb-2",children:[t.length-S.length," of ",t.length," Downloaded"]}),v.jsx("p",{className:"text-muted-foreground mb-4",children:"Some files couldn't be downloaded. You can still use the app."}),v.jsxs("div",{className:"text-left bg-destructive/10 p-4 rounded-lg max-h-32 overflow-y-auto mx-auto max-w-sm",children:[v.jsx("p",{className:"text-sm font-medium text-destructive mb-2",children:"Failed files:"}),S.map(k=>v.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",k]},k))]})]}),v.jsx(Ut,{size:"lg",onClick:h,className:"mt-4",children:"Continue Anyway"})]})}):o?v.jsxs("div",{className:"py-12 space-y-8",children:[v.jsxs("div",{className:"text-center",children:[v.jsx(ic,{className:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),v.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Downloading Course Materials"}),v.jsx("p",{className:"text-muted-foreground",children:"Please wait while we prepare your study materials"})]}),v.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[v.jsxs("div",{className:"flex items-center justify-between text-sm",children:[v.jsx("span",{className:"font-medium",children:"Progress"}),v.jsxs("span",{className:"text-muted-foreground",children:[y," of ",t.length," files"]})]}),v.jsx(eo,{value:f,className:"h-4"}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[v.jsxs("span",{children:[Math.round(f),"% complete"]}),v.jsxs("span",{children:[La(A)," downloaded"]})]}),v.jsxs("div",{className:"pt-2 border-t border-border",children:[v.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently downloading:"}),v.jsx("p",{className:"text-sm font-medium truncate mt-1",children:u})]})]}),v.jsx("p",{className:"text-center text-sm text-muted-foreground",children:" Files are stored locally for instant access"})]}):v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to P1100 Study App"}),v.jsx("p",{className:"text-muted-foreground",children:"Before you begin, let's download the course materials for the best experience."})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{className:"bg-card border border-border p-6 rounded-xl text-center",children:[v.jsx(Ls,{className:"h-8 w-8 mx-auto mb-3 text-primary"}),v.jsx("div",{className:"text-3xl font-bold",children:t.length}),v.jsx("div",{className:"text-sm text-muted-foreground",children:"PDF Files"})]}),v.jsxs("div",{className:"bg-card border border-border p-6 rounded-xl text-center",children:[v.jsx(Mb,{className:"h-8 w-8 mx-auto mb-3 text-primary"}),v.jsxs("div",{className:"text-3xl font-bold",children:["~",La(M)]}),v.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Size"})]})]}),v.jsxs("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:[v.jsx("div",{className:"p-4 bg-accent/30 border-b border-border",children:v.jsx("span",{className:"font-medium",children:"Files to download"})}),v.jsxs("div",{className:"max-h-48 overflow-y-auto p-3 space-y-1",children:[t.slice(0,10).map(k=>v.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm rounded bg-accent/20",children:[v.jsx(Ls,{className:"h-4 w-4 text-muted-foreground shrink-0"}),v.jsx("span",{className:"truncate",children:k.filename})]},k.filename)),t.length>10&&v.jsxs("p",{className:"text-sm text-muted-foreground text-center py-2",children:["... and ",t.length-10," more files"]})]})]}),v.jsxs("div",{className:"bg-primary/10 border border-primary/20 rounded-xl p-4",children:[v.jsx("p",{className:"text-sm",children:v.jsx("strong",{children:" Benefits of downloading:"})}),v.jsxs("ul",{className:"text-sm text-muted-foreground mt-2 space-y-1",children:[v.jsx("li",{children:" Instant PDF loading with no wait time"}),v.jsx("li",{children:" Works offline - study anywhere"}),v.jsx("li",{children:" Files are cached in your browser"})]})]}),v.jsxs(Ut,{size:"lg",onClick:D,className:"w-full h-14 text-lg",children:[v.jsx(Rd,{className:"h-5 w-5 mr-2"}),"Download All Files"]})]})})})}),v.jsxs("footer",{className:"p-4 border-t border-border bg-card text-center text-sm text-muted-foreground space-y-1",children:[v.jsx("p",{children:"Lebanese University  Faculty of Sciences, B3"}),v.jsxs("p",{children:["Found inaccurate information?"," ",v.jsx("a",{href:"https://github.com/zakaria-mourtaban/P1100/issues",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Open an issue on GitHub"})]})]})]})}const bb="studyApp_preloadComplete";function R2(){const[h,t]=R.useState("home"),[e,s]=R.useState(!0),[a,o]=R.useState(!0),[l,u]=R.useState(!0),[d,f]=R.useState({isOpen:!1,filename:"",page:1});R.useEffect(()=>{(async()=>{if(localStorage.getItem(bb)){const E=await zn.getCacheCount(),C=ss.length;E>=C*.8&&o(!1)}u(!1)})()},[]);const m=()=>{localStorage.setItem(bb,"true"),o(!1)},y=R.useCallback((w,S=1)=>{Na.recordPDFView(w),f({isOpen:!0,filename:w,page:S})},[]),b=R.useCallback(()=>{f(w=>({...w,isOpen:!1}))},[]),A=()=>{if(h==="home")return v.jsx(Ly,{onNavigate:t});if(h==="flashcards")return v.jsx(FE,{});if(h==="exams")return v.jsx(zE,{});if(h==="pdfs")return v.jsx(UE,{});if(h==="settings")return v.jsx(YE,{});const w=Ra.find(S=>S.id===h);return w?(Na.markChapterViewed(w.id),v.jsx(BE,{chapter:w})):v.jsx(Ly,{onNavigate:t})};return l?null:a?v.jsx(M2,{onComplete:m}):v.jsx(z0.Provider,{value:{openPDF:y},children:v.jsxs("div",{className:"flex min-h-screen bg-background",children:[v.jsx(uw,{currentPage:h,onNavigate:t,isOpen:e,onToggle:()=>s(!e)}),v.jsx("main",{className:`flex-1 transition-all duration-300 ${e?"ml-64":"ml-16"}`,children:v.jsx("div",{className:"p-6",children:A()})}),d.isOpen&&v.jsx(T2,{filename:d.filename,initialPage:d.page,onClose:b})]})})}lA.createRoot(document.getElementById("root")).render(v.jsx(R.StrictMode,{children:v.jsx(R2,{})}));
